define("page/cjmall/myzone/activity/c/helper/commentHelper",["common/cjos/util/configUtil","common/cjos/util/requestUtil"],function(e,t){return{custAdditionalInfoValidation:function(e,t,i,o){var n=this;if(document.getElementById("addInfo_height"))if(e||t||o){if(!(e&&t&&o))return e?t?o||(alert($("._info2 option:first()").text()+"을 해주세요."),$("._info2").focus()):alert("몸무게 정보를 입력해주세요."):alert("키 정보를 입력해주세요."),!1;if(!n.isNumber(e)||!n.isNumber(t))return alert("키/몸무게는 숫자만 입력 가능합니다."),!1;if(e<100||e>200||t<30||t>120)return alert("키/몸무게의 수치가 입력범위가 아닙니다."),!1}else;else if(!_.isUndefined(i)&&_.isUndefined(o)||_.isUndefined(i)&&!_.isUndefined(o))return _.isUndefined(i)?(alert($("._option1Title").text()+"에 대한 고객님의 의견을 선택해주세요."),$("._info1").focus()):_.isUndefined(o)&&(alert($("._option2Title").text()+"에 대한 고객님의 의견을 선택해주세요."),$("._info2").focus()),!1;return!0},isNumber:function(e){return!!/^[0-9]*$/.test(e)},starNumText:function(e,t){return 1==e?1==t?"별로예요 ㅠㅠ":2==t?"그저 그래요..":3==t?"괜찮아요.":4==t?"만족해요!":5==t?"최고예요♥":"만족도를 선택해주세요.":1==t?"오래 걸렸어요 ㅠㅠ":2==t?"조금 느려요..":3==t?"보통이예요.":4==t?"빠르네요~":5==t?"정말 빨라요!":"만족도를 선택해주세요."},popUpInfoAgreeLayer:function(){if("mobile"===e.get("platform"))require(["common/cjmall/ui/m/fullLayer/views/fullLayerView"],function(t){new t({title:"개인정보 수집 및 이용동의",useHistory:!0,container:"content",iframeContent:e.get("ecBaseSslUrl")+"/m/page/account/personalInfoAgree/6"}).show()});else if("pc"===e.get("platform")){var i=e.get("ecBaseSslUrl"),o=i+"/p/page/account/personalInfoAgree/6";try{t.navigateToURL(o,!0,"personalInfoAgreePopup","width=770,height=450,menubar=no,status=no,toolbar=no,scrollbars=yes")}catch(e){console.log(e)}}}}}),define("page/cjmall/myzone/activity/c/helper/itemReviewPhotoUploadHelper",["common/cjos/util/configUtil","common/cjos/inflowInfo/inflowInfo","page/cjmall/myzone/common/helper/myzoneGTMHelper"],function(e,t,i){return{isPhotoModify:!1,isMonthReview:__cjos_config__.isMonthReview,uploadedPhotoInfoTemplate:Handlebars.compile($("#itemReviewUploadedPhotoInfoTemplate").html()),uploadedPhotoInfoEmptyTemplate:Handlebars.compile($("#itemReviewUploadedPhotoInfoEmptyTemplate").html()),uploadedPhotoListTemplate:Handlebars.compile($("#itemReviewUploadedPhotoListTemplate").html()),itemReviewPhotoSwiper:null,MESSAGE:{DELETE_CONFIRM:"선택한 사진을 삭제하시겠습니까?",DELETE_COMPLETE:"삭제 되었습니다.",REGIETER_CONFIRM:"등록된 사진이 없습니다.\n사진 등록 시 추가 포인트가 지급됩니다",REGIETER_COMPLETE:"등록이 완료되었습니다."},CSS_CLASS:{IMG_TYPE:"img_type",CHOICE:"choice",IMG:"img",SELECTED:"selected",UPLOAD_INFO_SELECTOR:".upload_info",UPLOAD_MEDIA_LIST_SELECTOR:".upload_media_list",PHOTO_BX_SELECTOR:".__photo_bx",USER_REVIEW_SELECTOR:".__user_review",PHOTO_AREA_SELECTOR:".__photo_area",TAG_AREA_SELECTOR:".__tag_area",PHOTO_LIST_SELECTOR:".__photo_list",UPLOAD_MEDIA_SELECTOR:".__upload_media",TAG_SELECTOR:".tag",IMG_TYPE_SELECTOR:".img_type",CHOICE_SELECTOR:".choice",IMG_SELECTOR:".img"},PHOTO_DATA_TAG:{SEQ:"seq",INFO:"info",TAG:"tag"},CRUD_TYPE:{INSERT:"I",DELETE:"D"},removeCSSPhotoChoiceClass:function(){var e=this;$(e.CSS_CLASS.PHOTO_BX_SELECTOR+e.CSS_CLASS.IMG_TYPE_SELECTOR).removeClass(e.CSS_CLASS.CHOICE),$(e.CSS_CLASS.IMG_SELECTOR).attr("aria-selected","false")},removeCSSTagSelectedClass:function(){var e=this;$(e.CSS_CLASS.TAG_SELECTOR).removeClass(e.CSS_CLASS.SELECTED),$(e.CSS_CLASS.TAG_SELECTOR).attr("aria-selected","false"),0==$(".user_review").length-1&&$(e.CSS_CLASS.TAG_AREA_SELECTOR).hide()},removeCSSPhotoImgTypeAndChoiceClass:function(e){var t=this;if(void 0!==e){var i=t.CSS_CLASS.IMG_TYPE,o=t.CSS_CLASS.CHOICE,n=$(t.CSS_CLASS.USER_REVIEW_SELECTOR+e).find(t.CSS_CLASS.PHOTO_BX_SELECTOR);n.removeClass(i),n.removeClass(o)}},updateCssForSelectedPhoto:function(e){var t=this,i=$(t.CSS_CLASS.USER_REVIEW_SELECTOR+e).find(t.CSS_CLASS.PHOTO_BX_SELECTOR);i.addClass(t.CSS_CLASS.IMG_TYPE),i.addClass(t.CSS_CLASS.CHOICE),i.find(t.CSS_CLASS.IMG_SELECTOR).attr("aria-selected",!0),$(t.CSS_CLASS.TAG_AREA_SELECTOR).show()},uploadPhotoFetch:function(t,i,o,n){var a=this,r=e.get("ecBaseSslUrl")+"/c/rest/myzone/uploadImage",l=$('<form action="'+r+'" method="post" name="imageUploadForm" enctype="multipart/form-data" style="display:none;" target="dummy" ></form>');$(a.CSS_CLASS.UPLOAD_INFO_SELECTOR).append(l),l.append($('<input type="hidden" name="crudType"\tvalue="'+i+'" />')),l.append($('<input type="hidden" name="procNum" value="'+t+'" />')),l.append($('<input type="hidden" name="deleteFileName" value="'+o+'" />')),i===a.CRUD_TYPE.INSERT&&l.append($('input[id="image'+t+'"]')),l.ajaxSubmit({xhrFields:{withCredentials:!0},success:function(e,t,i,o){200===e.status?(a.isPhotoModify=!0,n(e),cjosLogUtil.log("response",e)):413===e.status?alert("이미지 사이즈는 10MB를 초과할 수 없습니다."):cjosLogUtil.log("error",error)},error:function(){cjosLogUtil.log("[uploadPhotoFetch error]")}})},initFormData:function(){$("form[name=imageUploadForm]").remove()},isSupportMutiplUploads:function(){if("mobile"!==e.get("platform"))return!0;if(void 0===t||void 0===t.userAgent||!t.userAgent.get("isOshoppingApp"))return!0;var i=t.userAgent;return"android"!=i.get(i.OS_NAME)&&("ios"==i.get(i.OS_NAME)||void 0)},isLocalTest:function(){return!1},uploadedPhotoSelectStatus:function(){return!0},photoTagReplace:function(e){return _.isUndefined(e)||null===e?"":e.replace("#","")},photoTagSharpAttach:function(e){return _.isUndefined(e)||null===e?"":"#"+e},showSimpleLoadingBar:function(){"m"==t.get("applicationType")?require(["common/cjmall/ui/m/loading/views/simpleLoadingBar"],function(e){(new e).appendTo(".upload_info",!0,!0)}):require(["common/cjmall/ui/p/loading/views/simpleLoadingBar"],function(e){(new e).appendTo(".ly_msgct.upload_info",!0,!0)})},hideSimpleLoadingBar:function(){$("._cjmallSimpleLoadingBar").remove()},setPhotoListInfo:function(e){var t=this,i=t.CSS_CLASS.PHOTO_LIST_SELECTOR,o=t.PHOTO_DATA_TAG.INFO,n=t.PHOTO_DATA_TAG.TAG,a=$(i).eq(0).data(o),r=$(i).eq(1).data(o),l=$(i).eq(2).data(o);_.isUndefined(a)||_.isEmpty(a)||(e.imagePath1=a.imagePath,e.tempImagePath1=a.tempImagePath,e.img1ProcState="10",e.isNew1=a.isNew),_.isUndefined(r)||_.isEmpty(r)||(e.imagePath2=r.imagePath,e.tempImagePath2=r.tempImagePath,e.img2ProcState="10",e.isNew2=r.isNew),_.isUndefined(l)||_.isEmpty(l)||(e.imagePath3=l.imagePath,e.tempImagePath3=l.tempImagePath,e.img3ProcState="10",e.isNew3=l.isNew);var s=$(i).eq(0).data(n),c=$(i).eq(1).data(n),m=$(i).eq(2).data(n);return _.isUndefined(s)||_.isEmpty(s)||(e.img1TagCode=t.photoTagReplace(s)),_.isUndefined(c)||_.isEmpty(c)||(e.img2TagCode=t.photoTagReplace(c)),_.isUndefined(m)||_.isEmpty(m)||(e.img3TagCode=t.photoTagReplace(m)),e.isPhotoModify=t.isPhotoModify,e},imageDelete:function(e){e.preventDefault();var t=this;if(confirm(t.MESSAGE.DELETE_CONFIRM)){var i=t.CSS_CLASS.UPLOAD_MEDIA_SELECTOR,o=t.CSS_CLASS.PHOTO_LIST_SELECTOR,n=t.PHOTO_DATA_TAG.SEQ,a=$(e.currentTarget).parent().find(o).data(n),r=$(o).eq(a-1),l=t.CRUD_TYPE.DELETE,s=r.data("image");t.uploadPhotoFetch(a,l,s,function(e){if(cjosLogUtil.log("[리뷰 이미지 삭제 업로드 응답결과]",e),void 0!==e&&null!==e){var o=e.code,n=e.resMsg;1!==o||_.isEmpty(n)||"삭제 되었습니다."!==n||(alert(t.MESSAGE.DELETE_COMPLETE),$(i+a).remove())}})}},photoSwiper:function(){var e=this,t=e.CSS_CLASS.UPLOAD_INFO_SELECTOR,o=e.CSS_CLASS.USER_REVIEW_SELECTOR,n=e.CSS_CLASS.PHOTO_BX_SELECTOR,a=e.CSS_CLASS.TAG_AREA_SELECTOR,r=(e.CSS_CLASS.CHOICE_SELECTOR,e.CSS_CLASS.CHOICE),l="Y"===e.isMonthReview?"한달리뷰작성":"리뷰작성";e.itemReviewPhotoSwiper=new Swiper(t,{initialSlide:0,wrapperClass:"user_img_wrap",slideClass:"user_review",observer:!0,observeParents:!0}),e.itemReviewPhotoSwiper.on("slideChangeStart",function(t){cjosLogUtil.log("onSlideChangeStart"),e.removeCSSPhotoChoiceClass(),e.removeCSSTagSelectedClass(),$(a).show(),i.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_"+l,"NONE_사진등록레이어/스와이프_NONE_NONE_NONE_NONE",!1)}),e.itemReviewPhotoSwiper.on("TransitionEnd",function(e){cjosLogUtil.log("onTransitionEnd"),cjosLogUtil.log(e.activeIndex);var t=e.activeIndex+1;$(o+t).find(n).addClass(r)}),e.itemReviewPhotoSwiper.on("click",function(e){cjosLogUtil.log("click")}),e.itemReviewPhotoSwiper.update()},setIsPhotoModify:function(){this.isPhotoModify=!0}}}),define("page/cjmall/myzone/activity/c/helper/mGA360Helper",[],function(){return{GA_EVENT_CATEGORY:{RECOMM:"마이존_NONE_NONE",SIMILAR:"나의관심_NONE_NONE"},GA_EVENT_ACTION:{RECOMM:"NONE_NONE_추천상품",SIMILAR:"NONE_NONE_추천버튼"},GA_EVENT_LABEL:{RECOMM:"NONE_NONE_추천상품"},GA_EVENT_TYPE:{C:"클릭",D:"노출",P:"페이지이동",S:"스와이프"}}}),define("page/cjmall/myzone/activity/c/view/itemReviewModifyView",["page/cjmall/myzone/activity/models/itemReviewWriteModel","common/cjos/util/configUtil","common/cjos/inflowInfo/inflowInfo","common/cjos/util/appInterfaceUtil","common/cjos/util/globalVariables","page/cjmall/myzone/activity/collections/itemReviewControlCollection","page/cjmall/myzone/activity/c/helper/commentHelper","page/cjmall/myzone/activity/c/view/itemReviewPhotoUploadLayerView","page/cjmall/myzone/activity/c/helper/itemReviewPhotoUploadHelper","page/cjmall/myzone/common/helper/myzoneGTMHelper"],function(e,t,i,o,n,a,r,l,s,c){"use strict";return Backbone.View.extend({el:"#content",template:Handlebars.compile($("#itemReviewModifyTemplate").html()),inflowInfo:i,reviewNo:__cjos_config__.reviewNo,isMonthReview:__cjos_config__.isMonthReview,commentItemCode:__cjos_config__.commentItemCode,orderNo:__cjos_config__.orderNo,orderGseq:__cjos_config__.orderGseq,itemClsCode:__cjos_config__.itemClsCode,procType:__cjos_config__.procType,channelCode:__cjos_config__.channelCode,isRental:__cjos_config__.isRental,isPhotoPage:__cjos_config__.isPhotoPage,itemReviewPhotoUploadLayerView:null,initialize:function(){var i=this,o=new e,n=new a;i.model=o,i.itemReviewControlCollection=n,i.itemReviewModifyModelFetch();var r=i.inflowInfo.get("applicationType");i.procType="true"===i.isPhotoPage?"IMG":"TEXT",i.listenTo(i.itemReviewControlCollection,"registerComplete",function(){"m"===r?location.replace(t.get("ecBaseSslUrl")+"/m/myzone/itemReviewableList"):location.replace(t.get("ecBaseSslUrl")+"/p/myzone/itemReviewableList")}),i.listenTo(i.itemReviewControlCollection,"validCheck",function(e){return alert(e),!1}),i.listenTo(i.itemReviewControlCollection,"error",function(){return alert("리뷰 수정시 오류가 발생했습니다."),!1})},events:{"click .btn_about_review":"guideOpen","click .lk_guide":"clickGuide","click .howto_review":"howtoReview","click .btn_close":"howtoClose","input #text_area":"textCount","click ._review_btn_modify":"reviewModify","click .img_submit":"imageRegister","click .btn_delete.__btn_delete":"imageDelete","click #bodyInfoAgreeLayer":"bodyInfoAgreeLayer"},guideOpen:function(e){e.preventDefault();var t=this;$(e.currentTarget).parents(".guide_inner").toggleClass("open"),$(".guide_inner").hasClass("open")?(t.$el.find(".btn_about_review").attr("aria-pressed","true"),t.gaIntegrationTagging("안내배너열기")):(t.$el.find(".btn_about_review").attr("aria-pressed","false"),t.gaIntegrationTagging("안내배너닫기"))},clickGuide:function(e){e.preventDefault(),"m"===this.inflowInfo.get("applicationType")?document.location.href=t.get("ecBaseSslUrl")+"/m/myzone/itemReviewNotice":window.open("/p/myzone/itemReviewNotice","","menubar=no, scrollbars=yes, resizable=no, width=750, height=500")},howtoReview:function(e){e.preventDefault(),$(".howto_review_cont").show()},howtoClose:function(e){e.preventDefault(),$(".howto_review_cont").hide()},textCount:function(e){var t=this,i=$(e.target).val().replace(/^\s\s*/,"").replace(/\s\s*$/,"").length,o=0,n=/[^A-Za-z0-9가-힣ㄱ-ㅎㅏ-ㅣ_\`\~\!\@\#\$\%\^\&\*\(\)\-\=\+\\\{\}\[\]\'\"\;\:\<\,\>\.\?\/\s]/gm;i>1e3?(i-=n.test($(e.target).val())?2:1,o=i>50?1e3:i,alert("1000글자까지 등록 가능합니다"),$(e.target).val($(e.target).val().substring(0,o)),t.$el.find("._write_count").html(o)):t.$el.find("._write_count").html(i)},reviewModify:function(e){var i=this;i.gaIntegrationTagging("리뷰수정버튼");var o={orderNo:i.orderNo,orderGSeq:i.orderGseq,itemCode:i.commentItemCode,isRental:i.isRental,reviewNo:i.reviewNo,contents:i.$el.find("#text_area").val(),procType:i.procType};o=s.setPhotoListInfo(o),i.modifyValidate(o)||(i.itemReviewControlCollection.url=t.get("ecBaseSslUrl")+"/c/rest/myzone/itemReviewModify",confirm("작성하신 내용을 수정하시겠습니까?")&&i.itemReviewControlCollection.update(o,"register"))},imageRegister:function(e){var t=this;null===t.itemReviewPhotoUploadLayerView&&(t.itemReviewPhotoUploadLayerView=new l),t.itemReviewPhotoUploadLayerView.openLayer(),t.gaIntegrationTagging("사진등록버튼")},imageDelete:function(e){var t=this;s.imageDelete(e),t.gaIntegrationTagging("미리보기삭제")},itemReviewModifyModelFetch:function(){var e=this,i="itemCode="+e.commentItemCode+"&orderNo="+e.orderNo+"&itemClsCode="+e.itemClsCode+"&orderGseq="+e.orderGseq+"&reviewNo="+e.reviewNo+"&channelCode="+e.channelCode;e.model.url=t.get("ecBaseSslUrl")+"/c/rest/myzone/itemReviewModifyPage?"+i,e.deferred=e.model.fetch({cache:!1,success:function(t){"MSG_COM_ERR_999"!=t.get("resCode")&&"MSG_COM_VAL_001"!=t.get("resCode")||(alert(t.get("description")),history.back()),e.render()},error:function(){cjosLogUtil.log("[itemReviewWriteModelFetch error]")}})},initSet:function(){var e=this,t=e.model.get("grade1"),i=e.model.get("grade2"),o=r.starNumText(1,t);$("._guide1").html(o);var n=r.starNumText(2,i);$("._guide2").html(n);var a=e.$el.find("#text_area").val().replace(/^\s\s*/,"").replace(/\s\s*$/,"").length;e.$el.find("._write_count").html(a)},render:function(){var e=this,t=e.model.toJSON();if(t._isPhotoPage="true"===e.isPhotoPage,t._isMonthReview="Y"===e.isMonthReview,e.$el.find("._myzoneReviewContainer").html(e.template(t)),e.initSet(),"IMG"!==e.procType){var i=new Array;_.each(t.titemvalbbsImgListTupleList,function(e,t){var o=Number(e.seq),n=e.imageName,a=e.orgimageName,r=s.photoTagSharpAttach(e.imageTagCode),l=e.imageUrl,c={imagePath:n,tempImagePath:a,tempProcNum:o,viewImageUrl:l,isNew:!1},m={seq:o,info:c,tag:r};i.push(m)});var t={photoInfoList:i},o=s.CSS_CLASS.UPLOAD_MEDIA_LIST_SELECTOR;$(o).show(),$(o).html(s.uploadedPhotoListTemplate(t)),e.itemReviewPhotoUploadLayerView=new l}},bodyInfoAgreeLayer:function(e){e.preventDefault(),r.popUpInfoAgreeLayer()},modifyValidate:function(e){if("Y"===this.isMonthReview){if(_.size(e.contents.trim())<30)return alert("리뷰는 30자 이상 등록하셔야 합니다. \n고객님의 소중한 의견을 남겨주세요."),$("#text_area").focus(),!0;if(null==e.imagePath1&&null==e.imagePath2&&null==e.imagePath3)return alert("한달리뷰는 사진이 꼭! 필요합니다.\n사진을 등록해주세요."),!0}else if(_.size(e.contents.trim())<10)return alert("리뷰는 10자 이상 등록하셔야 합니다. \n고객님의 소중한 의견을 남겨주세요."),$("#text_area").focus(),!0},gaIntegrationTagging:function(e){var t=this,i="Y"===t.isMonthReview?"한달리뷰작성":"리뷰작성";return c.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_"+i,"NONE_"+e+"/NONE_NONE_NONE_NONE_NONE",!1),!0}})}),define("page/cjmall/myzone/activity/c/view/itemReviewNoticeView",["page/cjmall/myzone/common/helper/myzoneHandelbarsHelper"],function(e){"use strict";return Backbone.View.extend({el:".guide_wrap",initialize:function(){},criteria:{pageNumber:0},events:{"click ._change_tab":"changeNoticeGuidance"},changeNoticeGuidance:function(e){e.preventDefault();var t=Number($(e.target).parents("._change_tab").attr("for-index"));$(".guide_info").hide(),$(".guide_info").eq(t).show(),$("._change_tab").removeClass("on"),$("._change_tab").eq(t).addClass("on")}})}),define("page/cjmall/myzone/activity/c/view/itemReviewPhotoUploadLayerView",["common/cjos/util/configUtil","common/cjos/inflowInfo/inflowInfo","common/cjos/logger/utils/loggerUtil","common/cjos/util/appInterfaceUtil","common/cjos/util/globalVariables","page/cjmall/myzone/activity/models/itemReviewPhotoUploadInfoModel","page/cjmall/myzone/activity/c/helper/itemReviewPhotoUploadHelper","page/cjmall/myzone/common/helper/myzoneGTMHelper"],function(e,t,i,o,n,a,r,l){return Backbone.View.extend({el:"._itemReviewPhotoLayerContainer",itemReviewPhotoUploadLayerTemplate:Handlebars.compile($("#itemReviewPhotoUploadLayerTemplate").html()),itemReviewPhotoUploadInfoModel:null,inflowInfo:t,isMonthReview:__cjos_config__.isMonthReview,isCfs:__cjos_config__.isCfs,events:{"click .img":"selectPhotoArea","click .__tag":"selectTaggingArea","click .btn_lyclr":"closeLayer","click .btn_photo_upload":"photoFileRegister","click input[name=fileData]":"selectPhoto","change input[name=fileData]":"uploadPhoto","click .btn_delete.__btn_delete_layer":"deletePhoto"},initialize:function(){var t=this,i=t.inflowInfo.get("applicationType");if(t.itemReviewPhotoUploadInfoModel=new a,"pc"===e.get("platform")){t.itemReviewPhotoUploadInfoFetch(!0)}n.set("imageFileSet",t.imageFileSet,!0),n.set("imageViewSetting",t.imageViewSetting,!0),n.set("initFormData",r.initFormData,!0),n.set("globalApplicationType",i,!0),n.set("getUploadedPhotoData",t.getUploadedPhotoData,!0),n.set("renderPhotoArea",t.renderPhotoArea,!0),n.set("isCfs",t.isCfs,!0),r.removeCSSTagSelectedClass()},selectPhotoArea:function(t){cjosLogUtil.log("selectPhotoArea"),t.preventDefault();var i=r.CSS_CLASS.CHOICE,o=r.CSS_CLASS.TAG_AREA_SELECTOR;r.removeCSSPhotoChoiceClass(),r.removeCSSTagSelectedClass(),$(o).show(),"mobile"===e.get("platform")?$(t.currentTarget).parent().parent().addClass(i):$(t.currentTarget).parent().addClass(i),$(t.currentTarget).data("aria-selected","true")},selectTaggingArea:function(e){cjosLogUtil.log("selectTaggingArea"),e.preventDefault();var t=this,i=r.CSS_CLASS.PHOTO_BX_SELECTOR,o=r.CSS_CLASS.TAG_SELECTOR,n=r.CSS_CLASS.IMG_TYPE_SELECTOR,a=r.CSS_CLASS.CHOICE_SELECTOR,o=r.CSS_CLASS.TAG_SELECTOR,s=r.CSS_CLASS.SELECTED,c=r.PHOTO_DATA_TAG.TAG,m=r.PHOTO_DATA_TAG.SEQ,d=r.CSS_CLASS.TAG_AREA_SELECTOR,u=$(i+n+a),p=u.data(m),g=$(i).eq(p-1);if(void 0!==u&&u.length>0){if($(e.currentTarget).hasClass(s))cjosLogUtil.log("재선택!"),r.removeCSSTagSelectedClass(),u.find(o).html(""),u.find(o).hide(),g.data(c,"");else{r.removeCSSTagSelectedClass(),$(d).show(),$(e.currentTarget).addClass(s),$(e.currentTarget).data("aria-selected","true");var f=$(e.currentTarget).html();u.find(o).html(f),u.find(o).show(),g.data(c,f)}cjosLogUtil.log(g.data(c))}else alert("사진을 선택 또는 등록 하세요.");var _="Y"===t.isMonthReview?"한달리뷰작성":"리뷰작성";l.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_"+_,"NONE_사진등록레이어/태그_NONE_NONE_NONE_NONE",!1)},selectPhoto:function(e){var i=r.CSS_CLASS.IMG,n=r.PHOTO_DATA_TAG.SEQ,a=$(e.currentTarget).closest("div").data(n);if($(e.currentTarget).closest("div").find(i).size()>0)return!1;var l=t.userAgent,s=l.get(l.IS_OSHOPPING_APP),c=l.get(l.OS_NAME),m=l.get(l.OS_VERSION_MAJOR),d=l.get(l.OSHOPPING_APP_VERSION_MAJOR),u=l.get(l.OSHOPPING_APP_VERSION_MINOR),p=l.get(l.OSHOPPING_APP_VERSION_BUGFIX);s&&"android"===c&&""!=d&&(d<=6?"true"===isCfs?o.productCommentImageUpload(998):o.productCommentImageUpload(a):d<=7&&u<=1&&p<9?"true"===isCfs?o.productCommentImageUpload(998):o.productCommentImageUpload(a):d>8?m<5&&(alert("고객님의 안드로이드 버전이 5이하라서 사진 등록 기능을 이용하실 수 없습니다. 소프트웨어 업데이트 후 이용해주세요."),e.preventDefault()):7==d&&u>1?m<5&&(alert("고객님의 안드로이드 버전이 5이하라서 사진 등록 기능을 이용하실 수 없습니다. 소프트웨어 업데이트 후 이용해주세요."),e.preventDefault()):7==d&&1==u&&p>=9&&m<5&&(alert("고객님의 안드로이드 버전이 5이하라서 사진 등록 기능을 이용하실 수 없습니다. 소프트웨어 업데이트 후 이용해주세요."),e.preventDefault()))},uploadPhoto:function(e){e.preventDefault();var t=this,i=r.PHOTO_DATA_TAG.SEQ,o=r.CRUD_TYPE.INSERT,n=$(e.currentTarget).closest("div").data(i),a=$(".user_review").length-1,l=e.currentTarget,s=l.files;if(s[0].size>9988560)return void alert("10MB 이하의 이미지만 등록 가능해요");if(s.length+a>3){alert("사진 첨부는 최대 3개까지 가능합니다.");const c=new DataTransfer;for(var m=0,d=0;d<s.length;d++){var u=s[d];3>d&&(c.items.add(u),m++)}l.onchange=null,s=c.files}r.showSimpleLoadingBar(),r.uploadPhotoFetch(n,o,"",function(e){cjosLogUtil.log("[리뷰 임시 이미지 업로드 응답결과] // callback"),cjosLogUtil.log(e);var i=e.code,o=e.resMsg,a=n;if(1!==i&&_.isEmpty(e.result)){alert(o),r.hideSimpleLoadingBar();var l=getUploadedPhotoData(!0,null);renderPhotoArea(l),r.removeCSSPhotoChoiceClass(),r.removeCSSTagSelectedClass(),r.initFormData()}else{for(var s=e.result,c=0,m=0;m<s.length;m++)cjosLogUtil.log(s[m]),"null"===e.result[m].imageFileName?c++:imageViewSetting(s[m],n+m,a);c===s.length&&(alert(e.result[0].message),t.initialize())}})},imageViewSetting:function(e,t,i){var o=this;if(!_.isEmpty(e)){var n=e.realUploadFileName,a=e.imageFileName,l=e.tempProcNum,s=e.viewImageUrl;"true"===isCfs&&(n=e.targetFilePath,a=e.imageFileName,l=e.tempProcNum,s=e.viewImageUrl),void 0===t&&(t=Number(l));var c=r.isLocalTest(),m={imagePath:n,tempImagePath:a,tempProcNum:l,viewImageUrl:s,isNew:!0,isLocalTest:c},d=getUploadedPhotoData(!0,m);renderPhotoArea(d)}void 0!==o.itemReviewPhotoSwiper&&o.itemReviewPhotoSwiper.update(),void 0===i&&(i=t),r.removeCSSPhotoChoiceClass(),r.removeCSSTagSelectedClass(),r.updateCssForSelectedPhoto(i),r.hideSimpleLoadingBar(),r.initFormData()},deletePhoto:function(e){e.preventDefault();var t=this;if(confirm(r.MESSAGE.DELETE_CONFIRM)){var i=r.CSS_CLASS.PHOTO_BX_SELECTOR,o=r.PHOTO_DATA_TAG.INFO,n=r.PHOTO_DATA_TAG.SEQ,a=r.CSS_CLASS.USER_REVIEW_SELECTOR,s=r.CSS_CLASS.UPLOAD_MEDIA_SELECTOR,c=$(e.currentTarget).parent().data(n);void 0===c&&(c=$(e.currentTarget).parent().parent().data(n));var m=$(i).eq(c-1),d=r.CRUD_TYPE.DELETE,u=m.data(o).tempImagePath;r.uploadPhotoFetch(c,d,u,function(e){if(cjosLogUtil.log("[리뷰 이미지 삭제 업로드 응답결과]",e),void 0!==e&&null!==e){var t=e.code,i=e.resMsg;e.result;if(1===t&&!_.isEmpty(i)&&"삭제 되었습니다."===i){alert(r.MESSAGE.DELETE_COMPLETE),$(a+c).remove(),$(s+c).remove();var o=getUploadedPhotoData(!0,null);renderPhotoArea(o),r.removeCSSPhotoChoiceClass(),r.removeCSSTagSelectedClass();var n=$(".img").length;c<=n&&r.updateCssForSelectedPhoto(c)}}});var p="Y"===t.isMonthReview?"한달리뷰작성":"리뷰작성";l.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_"+p,"NONE_사진등록레이어/삭제_NONE_NONE_NONE_NONE",!1)}},getUploadedPhotoData:function(e,t){for(var i=r.CSS_CLASS.USER_REVIEW_SELECTOR,o=r.CSS_CLASS.PHOTO_BX_SELECTOR,n=r.CSS_CLASS.PHOTO_LIST_SELECTOR,a=r.CSS_CLASS.UPLOAD_MEDIA_SELECTOR,l=r.PHOTO_DATA_TAG.INFO,s=r.PHOTO_DATA_TAG.TAG,c=new Array,m=new Array,d=0;d<=3;d++){var u,p,g=d+1;e?($userReviewAndPhotoBxWrapper=$(i+g).find(o),u=$userReviewAndPhotoBxWrapper.data(l),p=$userReviewAndPhotoBxWrapper.data(s)):r.uploadedPhotoSelectStatus()&&($uploadMediaAndPhotoListWrapper=$(a+g).find(n),u=$uploadMediaAndPhotoListWrapper.data(l),p=$uploadMediaAndPhotoListWrapper.data(s)),_.isEmpty(u)||(c.push(u),m.push(p))}return _.isEmpty(t)||c.push(t),{info:c,tag:m}},renderPhotoArea:function(t){var i,o,n=r.CSS_CLASS.USER_REVIEW_SELECTOR,a=r.CSS_CLASS.PHOTO_AREA_SELECTOR,l=r.CSS_CLASS.TAG_SELECTOR,s=(r.CSS_CLASS.PHOTO_BX_SELECTOR,r.CSS_CLASS.CHOICE,r.CSS_CLASS.UPLOAD_INFO_SELECTOR,0);_.isEmpty(t)||(i=t.info,o=t.tag);for(var c=r.isSupportMutiplUploads(),m=r.isLocalTest(),d=0;d<3;d++){var u=d+1;if($(n+u).remove(),_.isEmpty(i[d])){var t={seq:u,isSupportMutiplUploads:c};c?s<1?$(a).append(r.uploadedPhotoInfoEmptyTemplate(t)):r.removeCSSPhotoImgTypeAndChoiceClass(u):$(a).append(r.uploadedPhotoInfoEmptyTemplate(t)),s++}else{var t={seq:u,info:i[d],viewImageUrl:i[d].viewImageUrl,tag:o[d],isSupportMutiplUploads:c,isLocalTest:m};$(a).append(r.uploadedPhotoInfoTemplate(t)),_.isEmpty(o[d])||$(n+u+" "+l).show()}}"mobile"===e.get("platform")&&r.photoSwiper()},imageFileSet:function(e,t,i,o,n){if(r.hideSimpleLoadingBar(),(_.isEmpty(t)||"null"===t)&&!_.isEmpty(n))return alert(n),initFormData(),!1;var a=r.isLocalTest();if(r.setIsPhotoModify(),"true"===isCfs){var l={targetFilePath:o,imageFileName:o,viewImageUrl:i,tempProcNum:e,isLocalTest:a};imageViewSetting(l,e)}else{var l={realUploadFileName:o,imageFileName:t,viewImageUrl:i,tempProcNum:e,isLocalTest:a};imageViewSetting(l,e)}},openLayer:function(){var t=this;"pc"===e.get("platform")?(t.itemReviewPhotoUploadInfoFetch(!1),$("._itemReviewPhotoLayerContainer").show(),r.removeCSSTagSelectedClass()):t.itemReviewPhotoUploadInfoFetch()},closeLayer:function(t){t.preventDefault();var i=this;"pc"===e.get("platform")?$("._itemReviewPhotoLayerContainer").hide():(itemReviewPhotoUploadFullLayerView.hide(),r.itemReviewPhotoSwiper=null);var o="Y"===i.isMonthReview?"한달리뷰작성":"리뷰작성";l.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_"+o,"NONE_사진등록레이어/닫기_NONE_NONE_NONE_NONE",!1)},photoFileRegister:function(){var t=this,i=r.CSS_CLASS.PHOTO_BX_SELECTOR,o=r.CSS_CLASS.UPLOAD_MEDIA_LIST_SELECTOR,n=$(i),a=new Array;if(n.length>0){for(var s=0;s<n.length;s++){var c=n.eq(s).data();_.isEmpty(c.info)||a.push(c)}if(void 0!==a&&0===a.length)return void alert(r.MESSAGE.REGIETER_CONFIRM);var m={photoInfoList:a};$(o).show(),$(o).html(r.uploadedPhotoListTemplate(m)),n.parent().remove(),"pc"===e.get("platform")?$("._itemReviewPhotoLayerContainer").hide():(itemReviewPhotoUploadFullLayerView.hide(),r.itemReviewPhotoSwiper=null),alert(r.MESSAGE.REGIETER_COMPLETE)}var d="Y"===t.isMonthReview?"한달리뷰작성":"리뷰작성";l.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_"+d,"NONE_사진등록레이어/완료_NONE_NONE_NONE_NONE",!1)},itemReviewPhotoUploadInfoFetch:function(t){var i=this,o=e.get("ecBaseSslUrl")+"/c/rest/myzone/itemReviewPhotoUploadInfo";return i.itemReviewPhotoUploadInfoModel.url=o,i.itemReviewPhotoUploadInfoModel.fetch({cache:!1,success:function(o){"pc"===e.get("platform")?i.render(t):i.fullLayerViewRender()},error:function(){cjosLogUtil.log("[itemReviewPhotoUploadInfo error]")}})},photoFileUploadEvent:function(){$("input[name=fileData]").trigger("click")},render:function(t){var i=this;if("pc"===e.get("platform")){var o=i.itemReviewPhotoUploadInfoModel.toJSON();i.$el.html(i.itemReviewPhotoUploadLayerTemplate(o));var n=getUploadedPhotoData(!1,null);renderPhotoArea(n),r.removeCSSTagSelectedClass(),i.initFocus(),void 0===t||t||i.photoFileUploadEvent()}},fullLayerViewRender:function(){var e=this,t=e.itemReviewPhotoUploadInfoModel.toJSON(),i=e.itemReviewPhotoUploadLayerTemplate(t);r.CSS_CLASS.UPLOAD_INFO_SELECTOR;requirejs(["common/cjmall/ui/m/fullLayer/views/fullLayerView"],function(t){itemReviewPhotoUploadFullLayerView=new t({title:"사진 등록",content:i,contentEvents:{"click .img":e.selectPhotoArea,"click .tag":e.selectTaggingArea,"click .btn_photo_upload":e.photoFileRegister,"click input[name=fileData]":e.selectPhoto,"change input[name=fileData]":e.uploadPhoto,"click .btn_delete":e.deletePhoto},hideHeader:!1,iframeContent:!1,useHistory:!1,autoDestroyOnHide:!0}),itemReviewPhotoUploadFullLayerView.on(t.EVENT.SHOW,function(){var t=getUploadedPhotoData(!1,null);renderPhotoArea(t),void 0!==t&&t.info.length>0&&r.updateCssForSelectedPhoto(1),r.isSupportMutiplUploads()&&e.photoFileUploadEvent()}),itemReviewPhotoUploadFullLayerView.show()})},initFocus:function(){}})}),define("page/cjmall/myzone/activity/c/view/itemReviewWriteView",["page/cjmall/myzone/activity/models/itemReviewWriteModel","common/cjos/util/configUtil","common/cjos/inflowInfo/inflowInfo","common/cjos/logger/utils/loggerUtil","common/cjos/util/appInterfaceUtil","common/cjos/util/globalVariables","page/cjmall/myzone/activity/collections/itemReviewControlCollection","page/cjmall/myzone/activity/c/helper/commentHelper","page/cjmall/myzone/activity/c/view/itemReviewPhotoUploadLayerView","page/cjmall/myzone/activity/c/helper/itemReviewPhotoUploadHelper","page/cjmall/myzone/common/helper/myzoneGTMHelper"],function(e,t,i,o,n,a,r,l,s,c,m){"use strict";return Backbone.View.extend({el:"#content",template:Handlebars.compile($("#itemReviewWriteTemplate").html()),inflowInfo:i,criteria:{grade1:0,grade2:0},isMonthReview:__cjos_config__.isMonthReview,commentItemCode:__cjos_config__.commentItemCode,orderNo:__cjos_config__.orderNo,orderGseq:__cjos_config__.orderGseq,itemClsCode:__cjos_config__.itemClsCode,procType:__cjos_config__.procType,channelCode:__cjos_config__.channelCode,isRental:__cjos_config__.isRental,isPhotoPage:__cjos_config__.isPhotoPage,itemReviewPhotoUploadLayerView:null,initialize:function(){var o=this;o.model=new e,o.itemReviewControlCollection=new r,o.itemReviewWriteModelFetch(),o.needAddInfoUpdate=!1,o.listenTo(o.itemReviewControlCollection,"registerComplete",function(){var e=i.userAgent;if(e.get(e.IS_OSHOPPING_APP)){var a=o.$el.context.title,r=o.$el.context.documentURI;n.openAppReview("마이존_리뷰작성조회_NONE",a,r)}location.replace(t.get("ecBaseSslUrl")+"/"+o.inflowInfo.get("applicationType")+"/myzone/itemReviewableList")}),o.listenTo(o.itemReviewControlCollection,"validCheck",function(e){return alert(e),!1}),o.listenTo(o.itemReviewControlCollection,"error",function(){return alert("리뷰 등록시 오류가 발생했습니다."),!1})},events:{"click .btn_about_review":"guideOpen","click .lk_guide":"clickGuide","click .ico_star":"starChange","click .howto_review":"howtoReview","click .btn_close":"howtoClose","input #text_area":"textCount","click .btn_register":"reviewRegister","click .img_submit":"imageRegister","click .btn_delete.__btn_delete":"imageDelete","click #bodyInfoAgreeLayer":"bodyInfoAgreeLayer","change ._custAddInfo":"addInfoChange","click ._ga_event":"gaEventTagging"},guideOpen:function(e){e.preventDefault();var t=this;$(e.currentTarget).parents(".guide_inner").toggleClass("open"),$(".guide_inner").hasClass("open")?(t.$el.find(".btn_about_review").attr("aria-pressed","true"),t.gaIntegrationTagging("안내배너열기")):(t.$el.find(".btn_about_review").attr("aria-pressed","false"),t.gaIntegrationTagging("안내배너닫기"))},clickGuide:function(e){e.preventDefault(),"m"===this.inflowInfo.get("applicationType")?requirejs(["common/cjmall/ui/m/fullLayer/views/fullLayerView","page/cjmall/myzone/activity/m/view/itemReviewNoticeLayerView"],function(e,t){new e({title:"리뷰 작성 유의사항",container:"body",content:new t,iframeContent:null,autoDestroyOnHide:!1}).show()}):window.open("/p/myzone/itemReviewNotice","","menubar=no, scrollbars=yes, resizable=no, width=750, height=500")},starChange:function(e){var t=this;e.preventDefault();var i=$(e.currentTarget).data("star"),o=$(e.currentTarget).closest("div").data("grade");$("#score_area"+o).html(i+"개"),$("._guide"+o).addClass("selected");var n=l.starNumText(o,i);$("._guide"+o).html(n);var a=$(e.currentTarget).index(),r=$(e.currentTarget).closest("div").children();switch(o){case 1:t.criteria.grade1=a+1,"Y"===t.isMonthReview?m.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_한달리뷰작성","NONE_한달사용만족도/NONE_NONE_NONE_NONE_NONE",!1):m.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_리뷰작성","NONE_상품만족도/NONE_NONE_NONE_NONE_NONE",!1);break;case 2:t.criteria.grade2=a+1,m.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_리뷰작성","NONE_배송만족도/NONE_NONE_NONE_NONE_NONE",!1)}_.each(r,function(e,t){t<=a?$(e).addClass("on"):$(e).removeClass("on")})},howtoReview:function(e){e.preventDefault(),$(".howto_review_cont").show()},howtoClose:function(e){e.preventDefault(),$(".howto_review_cont").hide()},textCount:function(e){var t=this,i=$(e.target).val().replace(/^\s\s*/,"").replace(/\s\s*$/,"").length,o=0,n=/[^A-Za-z0-9가-힣ㄱ-ㅎㅏ-ㅣ_\`\~\!\@\#\$\%\^\&\*\(\)\-\=\+\\\{\}\[\]\'\"\;\:\<\,\>\.\?\/\s]/gm;i>1e3?(i-=n.test($(e.target).val())?2:1,o=i>50?1e3:i,alert("1000글자까지 등록 가능합니다"),$(e.target).val($(e.target).val().substring(0,o)),t.$el.find("._write_count").html(o)):t.$el.find("._write_count").html(i)},reviewRegister:function(e){var i=this;i.gaIntegrationTagging("리뷰등록버튼");for(var o,n=i.$el.find(".review_radio").data("infosize"),a=[],r=[],s=1;s<=n;s++)a.push(i.$el.find("input[name=rdbx"+s+"]:checked").val()),r.push(i.$el.find("input[name=rdbx"+s+"]:checked").data("questseq")),o=i.$el.find("input[name=rdbx"+s+"]:checked").data("itemtypecode");var m=$("input[name=custInfo1]:checked").val(),d=i.$el.find("#addInfo_height").val(),u=i.$el.find("#addInfo_weight").val(),p=null;if(p=document.getElementById("addInfo_height")?i.$el.find("._info2").find("option:selected").attr("value"):$("input[name=custInfo2]:checked").val(),!l.custAdditionalInfoValidation(d,u,m,p))return!1;var g=$("input:checkbox[id='custInfo_agree']").is(":checked");i.needAddInfoUpdate=i.needAddInfoUpdate&&g;var f={orderNo:i.model.get("orderNo"),orderGSeq:i.model.get("orderGseq"),itemCode:i.model.get("itemCode"),isRental:i.isRental,contents:i.$el.find("#text_area").val(),grade1:i.criteria.grade1,grade2:i.criteria.grade2,bodyTall:_.isUndefined(m)?"":m,bodyType:_.isUndefined(p)?"":p,bodyHeight:_.isUndefined(d)?null:parseInt(d),
bodyWeight:_.isUndefined(u)?null:parseInt(u),questSeq:r,arclSeq:a,itemTypeCd:o,categoryType:$("#categoryType").val(),opnionIndex:n,needAddInfoUpdate:i.needAddInfoUpdate,procType:"true"===i.isPhotoPage?"IMG":"TEXT",isMonthReview:"Y"===i.isMonthReview};f=c.setPhotoListInfo(f),i.writeValidate(f)||(i.itemReviewControlCollection.url=t.get("ecBaseSslUrl")+"/c/rest/myzone/itemReviewRegister",confirm("작성하신 내용을 등록하시겠습니까?")&&i.itemReviewControlCollection.update(f,"register"))},addInfoChange:function(e){this.needAddInfoUpdate=!0},imageRegister:function(e){var t=this;null===t.itemReviewPhotoUploadLayerView&&(t.itemReviewPhotoUploadLayerView=new s),t.itemReviewPhotoUploadLayerView.openLayer(),t.gaIntegrationTagging("사진등록버튼")},imageDelete:function(e){var t=this;c.imageDelete(e),t.gaIntegrationTagging("미리보기삭제")},itemReviewWriteModelFetch:function(){var e=this,i="itemCode="+e.commentItemCode+"&orderNo="+e.orderNo+"&itemClsCode="+e.itemClsCode+"&orderGseq="+e.orderGseq+"&procType="+e.procType+"&channelCode="+e.channelCode+"&isRental="+e.isRental;e.model.url=t.get("ecBaseSslUrl")+"/c/rest/myzone/itemReviewWritePage?"+i,e.deferred=e.model.fetch({cache:!1,success:function(t){"MSG_COM_ERR_999"!=t.get("resCode")&&"MSG_COM_VAL_001"!=t.get("resCode")||(alert(t.get("description")),history.back()),e.render()},error:function(){cjosLogUtil.log("[itemReviewWriteModelFetch error]")}})},render:function(){var e=this,t=e.model.toJSON();t._isPhotoPage="true"===e.isPhotoPage,t._isMonthReview="Y"===e.isMonthReview,e.$el.find("._myzoneReviewContainer").html(e.template(t)),e.itemReviewPhotoUploadLayerView=new s},bodyInfoAgreeLayer:function(e){e.preventDefault(),l.popUpInfoAgreeLayer()},writeValidate:function(e){var t=this;if("Y"===t.isMonthReview){if(0==$('.star_btn_wrap[data-grade="1"]').children(".ico_star.on").size())return alert("상품을 사용해보신 후, 어떠신가요~? \n한달사용 만족도를 등록해주세요."),$('.star_btn_wrap[data-grade="1"]').attr("tabindex",-1).focus(),!0;for(var i=1;i<=e.opnionIndex;i++)if(!$("input[name=rdbx"+i+"]").is(":checked"))return alert(t.$el.find("input[name=rdbx"+i+"]").data("questdesc")+"에 대한 \n고객님의 의견을 선택해주세요."),$("input[name=rdbx"+i+"]")[0].focus(),!0;if(_.size(e.contents.trim())<30)return alert("리뷰는 30자 이상 등록하셔야 합니다. \n고객님의 소중한 의견을 남겨주세요."),$("#text_area").focus(),!0;if(null==e.imagePath1&&null==e.imagePath2&&null==e.imagePath3)return alert("한달리뷰는 사진이 꼭! 필요합니다.\n사진을 등록해주세요."),!0}else{if(0==$('.star_btn_wrap[data-grade="2"]').children(".ico_star.on").size())return alert("이 상품의 배송은 어떠셨나요~? \n배송만족도를 등록해주세요."),$('.star_btn_wrap[data-grade="2"]').attr("tabindex",-1).focus(),!0;if(0==$('.star_btn_wrap[data-grade="1"]').children(".ico_star.on").size())return alert("상품은 만족스러우셨나요~? \n상품만족도를 등록해주세요."),$('.star_btn_wrap[data-grade="1"]').attr("tabindex",-1).focus(),!0;for(var i=1;i<=e.opnionIndex;i++)if(!$("input[name=rdbx"+i+"]").is(":checked"))return alert(t.$el.find("input[name=rdbx"+i+"]").data("questdesc")+"에 대한 \n고객님의 의견을 선택해주세요."),$("input[name=rdbx"+i+"]")[0].focus(),!0;if(_.size(e.contents.trim())<10)return alert("리뷰는 10자 이상 등록하셔야 합니다. \n고객님의 소중한 의견을 남겨주세요."),$("#text_area").focus(),!0}},gaEventTagging:function(e){var t=this,i=$(e.currentTarget).attr("ga-event-area");t.gaIntegrationTagging(i)},gaIntegrationTagging:function(e){var t=this,i="Y"===t.isMonthReview?"한달리뷰작성":"리뷰작성";return m.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_"+i,"NONE_"+e+"/NONE_NONE_NONE_NONE_NONE",!1),!0}})}),define("page/cjmall/myzone/activity/collections/beautyPouchMasterCollection",["common/cjos/util/configUtil","page/cjmall/myzone/activity/models/beautyPouchMasterModel"],function(e,t){"use strict";return Backbone.Collection.extend({url:"",model:t,initialize:function(){},parse:function(e){if(!_.isEmpty(e))return e}})}),define("page/cjmall/myzone/activity/collections/beautyPouchMasterListCollection",["common/cjos/util/configUtil","page/cjmall/myzone/activity/models/beautyPouchMasterListModel"],function(e,t){"use strict";return Backbone.Collection.extend({url:"",model:t,initialize:function(){},parse:function(e){if(1===e.code&&!_.isEmpty(e))return cjosLogUtil.log("[beautyPouchMasterListCollection parse]",e.result),e.result}})}),define("page/cjmall/myzone/activity/collections/beautyPouchOrderCollection",["common/cjos/util/configUtil","page/cjmall/myzone/activity/models/beautyPouchOrderModel"],function(e,t){"use strict";return Backbone.Collection.extend({url:"",model:t,initialize:function(){},parse:function(e){if(!_.isEmpty(e))return e}})}),define("page/cjmall/myzone/activity/collections/beautyPouchOrderListCollection",["common/cjos/util/configUtil","page/cjmall/myzone/activity/models/beautyPouchOrderMiddleModel"],function(e,t){"use strict";return Backbone.Collection.extend({url:"",model:t,initialize:function(){},parse:function(e){if(!_.isEmpty(e))return e}})}),define("page/cjmall/myzone/activity/collections/brandZzimCollection",["common/cjos/util/configUtil","page/cjmall/myzone/activity/models/brandZzimModel"],function(e,t){"use strict";return Backbone.Collection.extend({url:e.get("ecDisplayApiFrontUrl")+"/myzone/brandList",model:t,isAccum:!1,totalCount:0,isLastPage:!1,parse:function(e){var t=this,i=t.toJSON();if(!_.isObject(e)||!_.isObject(e.result))return t.totalCount=0,t.isLastPage=!0,[];var o=e.result,n=o.list,a=o.total,r=o.isLastPage;return n=_.isArray(n)?n:[],t.totalCount=_.isNumber(a)&&a>0?a:0,t.isLastPage=!_.isBoolean(r)||r,t.isAccum?i.concat(n):n}})}),define("page/cjmall/myzone/activity/collections/brandZzimItemCollection",["page/cjmall/myzone/activity/models/brandZzimItemModel"],function(e){"use strict";return Backbone.Collection.extend({model:e,parse:function(e){return _.isArray(e)?e:[]}})}),define("page/cjmall/myzone/activity/collections/foodAccountBookMasterCollection",["common/cjos/util/configUtil","page/cjmall/myzone/activity/models/foodAccountBookMasterModel"],function(e,t){"use strict";return Backbone.Collection.extend({url:"",model:t,initialize:function(){},parse:function(e){if(1===e.code&&!_.isEmpty(e.result))return e.result}})}),define("page/cjmall/myzone/activity/collections/foodAccountBookOrderCollection",["common/cjos/util/configUtil","page/cjmall/myzone/activity/models/foodAccountBookOrderModel"],function(e,t){"use strict";return Backbone.Collection.extend({url:"",model:t,initialize:function(){},parse:function(e){if(!_.isEmpty(e))return e}})}),define("page/cjmall/myzone/activity/collections/foodAccountBookOrderListCollection",["common/cjos/util/configUtil","page/cjmall/myzone/activity/models/foodAccountBookOrderMiddleModel"],function(e,t){"use strict";return Backbone.Collection.extend({url:"",model:t,initialize:function(){},parse:function(e){if(!_.isEmpty(e))return e}})}),define("page/cjmall/myzone/activity/collections/foodAccountBookStampCollection",["common/cjos/util/configUtil","page/cjmall/myzone/activity/models/foodAccountBookStampModel"],function(e,t){"use strict";return Backbone.Collection.extend({url:"",model:t,initialize:function(){},parse:function(e){if(!_.isEmpty(e))return e}})}),define("page/cjmall/myzone/activity/collections/interestCollection",["common/cjos/util/configUtil","page/cjmall/myzone/activity/models/interestModel"],function(e,t){"use strict";return Backbone.Collection.extend({url:"",model:t,initialize:function(){},parse:function(e){if(!_.isEmpty(e)&&!_.isEmpty(e.result))return e.result}})}),define("page/cjmall/myzone/activity/collections/itemReviewableCollection",["page/cjmall/myzone/activity/models/itemReviewableModel"],function(e){return Backbone.Collection.extend({initialize:function(){this.model=e},parse:function(e){if(1===e.code)return e.result.list}})}),define("page/cjmall/myzone/activity/collections/itemReviewCollection",["page/cjmall/myzone/activity/models/itemReviewModel"],function(e){return Backbone.Collection.extend({initialize:function(){this.model=e},parse:function(e){if(1===e.code)return e.result.list}})}),define("page/cjmall/myzone/activity/collections/itemReviewControlCollection",["common/cjos/inflowInfo/inflowInfo","common/cjos/util/appInterfaceUtil"],function(e,t){return Backbone.Collection.extend({initialize:function(){},update:function(e,t){var i=this;i.deferred=Backbone.ajax({url:i.url,data:JSON.stringify(e),type:"POST",contentType:"application/json",success:function(e){"MSG_COM_ERR_999"===e.resCode?i.trigger("validCheck",e.resMsg):(alert(e.resMsg),i.trigger(t+"Complete"))},error:function(){i.trigger("error")}})}})}),define("page/cjmall/myzone/activity/collections/newItemReviewableCollection",["page/cjmall/myzone/activity/models/newItemReviewableModel"],function(e){return Backbone.Collection.extend({initialize:function(){this.model=e},parse:function(e){if(200===e.status)return e.result.list}})}),define("page/cjmall/myzone/activity/collections/newItemReviewCollection",["page/cjmall/myzone/activity/models/newItemReviewModel"],function(e){return Backbone.Collection.extend({initialize:function(){this.model=e},parse:function(e){if(200===e.status)return e.result.list}})}),define("page/cjmall/myzone/activity/collections/recentCollection",["common/cjos/util/configUtil","page/cjmall/myzone/activity/models/recentModel","common/cjos/util/logUtil"],function(e,t){"use strict";var i=Backbone.Collection.extend({url:"",model:t,initialize:function(){},parse:function(e){if(1===e.code&&1===e.code&&!_.isEmpty(e.result)&&!_.isEmpty(e.result.detailContentsList))return e.result.detailContentsList},remove:function(e){var t=this,o=$.Deferred();return e.destroy().then(function(){i.__super__.remove.apply(t,[e]),o.resolve(t)}).fail(function(e){o.reject(t)}),o},isValidateResponse:function(e,t,i,o){return i=_.isUndefined(i)?"code":i,o=_.isUndefined(o)?1:o,!(!e||!e[i]||e[i]!==o||!t&&!e.result)}});return i}),define("page/cjmall/myzone/activity/collections/recommendCollection",["common/cjos/util/configUtil","page/cjmall/myzone/activity/models/recommendModel"],function(e,t){"use strict";return Backbone.Collection.extend({url:"",model:t,initialize:function(){},parse:function(e){if(!_.isEmpty(e)&&1===e.code&&!_.isEmpty(e.result))return e.result}})}),define("page/cjmall/myzone/activity/collections/shoppingZzimCollection",["common/cjos/util/configUtil","page/cjmall/myzone/activity/models/shoppingZzimModel"],function(e,t){return Backbone.Collection.extend({url:"",model:t,totalCount:0,initialize:function(){},parse:function(e){var t=this;if(1===e.code&&!_.isEmpty(e.result)){if(!_.isEmpty(e.result.detailZzimList))return t.totalCount=e.result.paginationInfoTuple?e.result.paginationInfoTuple.totalCount:0,e.result.detailZzimList;if(!_.isEmpty(e.result.simpleZZimList))return e.result.simpleZZimList}}})}),define("page/cjmall/myzone/activity/collections/shoppingZzimListCollection",["common/cjos/util/configUtil","page/cjmall/myzone/activity/models/shoppingZzimModel"],function(e,t){return Backbone.Collection.extend({url:e.get("ecBaseSslUrl")+"/c/rest/myzone/zzimlist",model:t,initialize:function(){var e=this;e.on({destroy:_.bind(e.destroyHandler,e)})},destroyHandler:function(e,t,i){},parse:function(e){var t=this;try{var i=e.result;cjosLogUtil.log("[shoppingZzimListCollection parse]",i.ds_zzim),_.isEmpty(i)||t.set({ds_zzim:i.ds_zzim})}catch(e){cjosLogUtil.log("[shoppingZzimListCollection parse error]",e)}return t}})}),define("page/cjmall/myzone/activity/collections/similarCollection",["common/cjos/util/configUtil","page/cjmall/myzone/activity/models/similarModel"],function(e,t){"use strict";return Backbone.Collection.extend({url:"",model:t,initialize:function(){},parse:function(e){if(!_.isEmpty(e)&&!_.isEmpty(e.result))return e.result}})}),define("page/cjmall/myzone/activity/collections/styleZzimCollection",["common/cjos/util/configUtil","page/cjmall/myzone/activity/models/styleZzimModel"],function(e,t){"use strict";return Backbone.Collection.extend({url:"",model:t,initialize:function(){},parse:function(e){if(1===e.code&&1===e.code&&!_.isEmpty(e.result))return _.isUndefined(e.result.list)?e.result:e.result.list}})}),define("page/cjmall/myzone/activity/helper/recentHandelbarsHelper",["common/cjos/util/configUtil","common/cjos/util/currencyUtil"],function(e,t){"use strict";Handlebars.registerHelper("_getFlagName",function(e){var t="";switch(e){case"H":t="검색";break;case"S":case"N":t="기획전";break;case"E":case"NE":t="이벤트";break;case"C":t="카테고리";break;case"B":case"NB":t="임직원몰";break;case"V":t="동영상"}return t}),Handlebars.registerHelper("_getClickCode",function(e){var t="";switch(e){case"I":case"M":t="RESE____list__goods__";break;case"H":t="RESE____list__search__";break;case"S":t="RESE____list__plnshop__";break;case"E":t="RESE____list__event__";break;case"C":t="RESE____list__cate__";break;case"B":t="RESE____list__btemall__";break;case"V":t="RESE____list__vod__"}return t})}),define("page/cjmall/myzone/activity/m/view/beautyPouchMainView",["page/cjmall/myzone/common/helper/myzoneHandelbarsHelper","common/cjos/util/configUtil","common/cjos/inflowInfo/inflowInfo","common/cjos/logger/utils/loggerUtil","common/cjos/logger/models/fdsConstantsModel","common/cjmall/ui/m/fullLayer/views/fullLayerView","common/cjmall/ui/m/loading/views/simpleLoadingBar","page/cjmall/myzone/activity/collections/beautyPouchMasterListCollection","page/cjmall/myzone/activity/models/beautyPouchDetailModel","page/cjmall/myzone/activity/m/view/beautyPouchOrderListView","page/cjmall/myzone/activity/m/view/beautyPouchNoticeView"],function(e,t,i,o,n,a,r,l,s,c,m){"use strict";return Backbone.View.extend({el:"#content",masterListCollection:new l,model:new s,template:Handlebars.compile($("#beautyPouchMasterListTemplate").html()),detailTemplate:Handlebars.compile($("#beautyPouchDetailTemplate").html()),beautyPouchLayerTemplate:Handlebars.compile($("#beautyPouchLayerTemplate").html()),simpleLoadingBar:new r,criteria:{gubun:"002",stepIndex:""},saveDepositData:{gubun:"",stepIndex:""},orderListData:[],initialize:function(){var e=this;e.simpleLoadingBar.appendTo("#container",!0,!0),o.setFdsKey(n.KEY.PAGE_TITLE),o.setFdsKey(n.KEY.PAGE_TYPE),o.setFdsValue(n.KEY.PAGE_TITLE,"마이존>쇼핑컨텐츠>식품가계부"),o.setFdsValue(n.KEY.PAGE_TYPE,n.PV.PAGE_TYPE.saved_money),e.fetch()},events:{"click .account_more":"openBeautyPouchDetail","click .lk_detail":"moveBeautyPouchNotice","click ._openOrderList":"openBeautyPouchOrderList","click .btn_saving":"saveDeposit","click .btn_chk":"refreshBeautyPouch"},openBeautyPouchDetail:function(e){e.preventDefault();var t=this,i=$(e.currentTarget).parents(".account_bx"),o=i.data("stepindex"),n=i.hasClass("is_open");t.criteria.stepIndex=o,$(".account_bx").removeClass("is_open"),n?i.removeClass("is_open"):(i.addClass("is_open"),t.detailfetch(t.criteria.stepIndex))},moveBeautyPouchNotice:function(e){e.preventDefault();var t=this;t.beautyPouchNoticeView=new m,new a({title:"뷰티파우치 자세히보기",container:"body",content:t.beautyPouchNoticeView,iframeContent:null}).show()},openBeautyPouchOrderList:function(e){e.preventDefault();var t=this,i=$(e.currentTarget).parents(".account_bx").data("stepindex");t.beautyPouchOrderListView=new c(t.orderListData[i]),new a({title:"뷰티파우치 주문내역",container:"body",content:t.beautyPouchOrderListView,iframeContent:null,autoDestroyOnHide:!1}).show()},saveDeposit:function(e){e.preventDefault();var i=this,o={gubun:i.saveDepositData.gubun,stepIndex:i.saveDepositData.stepIndex};i.simpleLoadingBar.appendTo("#container",!0,!0),$.ajax({url:t.get("ecBaseSslUrl")+"/c/rest/myzone/beautyPouchSaveAmount",xhrFields:{withCredentials:!0},type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(o),success:function(e){var t=e.resCode,o=e.resMsg;"MSG_COM_SUC_999"===t?i.$el.find("._beautyPouchSaveDepositLayerContainer").show():alert(o)},error:function(e,t,i){if(void 0!==e.resCode){var o=(e.code,e.resCode,e.resMsg),n=e.description,a=_.size(n)>0?n:o;alert(a)}}}).always(function(){i.simpleLoadingBar.remove()})},refreshBeautyPouch:function(e){location.reload()},fetch:function(){var e=this;e.masterListCollection.url=t.get("ecBaseSslUrl")+"/c/rest/myzone/beautyPouchMasterList",e.masterDeferred=e.masterListCollection.fetch({cache:!1,success:function(t){e.render()},error:function(){cjosLogUtil.log("[beautyPouchCollectionFetch error]")}}).always(function(){e.simpleLoadingBar.remove()})},detailfetch:function(e){var i=this;i.model.url=t.get("ecBaseSslUrl")+"/c/rest/myzone/beautyPouchDetailList.jsp?gubun=002&stepIndex="+e,i.detailDeferred=i.model.fetch({cache:!1,success:function(t){i.detailrender(e)},error:function(){cjosLogUtil.log("[beautyPouchDetailFetch error]")}})},render:function(){var e=this,t=e.masterListCollection.toJSON();e.$el.find("._beautyPouchMasterListContainer").html(e.template({list:t})),e.$el.find("._beautyPouchSaveDepositLayerContainer").html(e.beautyPouchLayerTemplate()),t.length>0&&($(".account_bx").first().addClass("is_open"),e.detailfetch(t[0].beautyPouchMasterList[0].stepIndex)),$.when(e.deferred).then(function(){e.simpleLoadingBar.remove()})},detailrender:function(e){for(var t=this,i=t.model.toJSON(),o=i.beautyPouchAmount,n=i.beautyPouchOrderList,a=[],r=0;r<n.length;r++)if("0"===n[r].returnYn){var l=n[r].orderDate;a.push(l)}for(var s=[],r=a.length;r<5;r++)s.push("emptyStamp");t.$el.find(".account_info"+e).html(t.detailTemplate({priceData:o,stampData:a,emptyStamp:s})),t.orderListData[e]=n,t.saveDepositData.gubun=t.criteria.gubun,t.saveDepositData.stepIndex=e}})}),define("page/cjmall/myzone/activity/m/view/beautyPouchNoticeView",["common/cjos/util/configUtil","page/cjmall/myzone/common/helper/myzoneHandelbarsHelper"],function(e,t){"use strict";return Backbone.View.extend({el:"._beautyPouchNoticeContainer",noticeTemplate:Handlebars.compile($("#beautyPouchNoticeTemplate").html()),initialize:function(){this.render()},events:{},render:function(e){var t=this;t.$el.html(t.noticeTemplate())}})}),define("page/cjmall/myzone/activity/m/view/beautyPouchOrderListView",["common/cjos/util/configUtil","page/cjmall/myzone/common/helper/myzoneHandelbarsHelper"],function(e,t){"use strict";return Backbone.View.extend({el:"._beautyPouchOrderListContainer",orderListTemplate:Handlebars.compile($("#beautyPouchOrderListTemplate").html()),initialize:function(e){this.render(e)},events:{},render:function(e){var t=this;t.$el.html(t.orderListTemplate({orderListData:e}))}})}),define("page/cjmall/myzone/activity/m/view/brandZzimListView",["common/cjos/util/configUtil","common/cjos/util/loginUserInfo","common/cjmall/ui/m/loading/views/simpleLoadingBar","page/cjmall/myzone/activity/collections/brandZzimCollection"],function(e,t,i,o){"use strict";return Backbone.View.extend({el:"._brandZzimContentsContainer",collection:new o,loadingBar:new i,template:Handlebars.compile($("#brandZzimListTemplate").html()),criteria:{isEmployee:t.getIsEmployee(),pmType:"M",sortTpCd:"LIKE",pagingType:"SEE_MORE",pageSize:10,pageNum:1},sortTypes:{LIKE:"최근 좋아요 순",HAN:"가나다 순",ENG:"ABC 순"},brandTabUrl:e.get("ecDisplayUrl")+"/m/homeTab/main?hmtabMenuId=004889&rPIC=brandnew",itemSwiper:null,isActiveTab:!1,isLastPage:!0,isLoading:!0,initialize:function(){var e=this;e.collectionFetch(),$(window).on("scroll",function(){!e.isActiveTab||e.isLastPage||e.isLoading||e.checkNearEnd()})},collectionFetch:function(e){var t=this,i=t.collection;i.isAccum=!0===e,t.isLoading||(t.isLoading=!0,t.loadingBar.appendTo("#container",!0,!0)),t.deferred=i.fetch({xhrFields:{withCredentials:!0},data:t.criteria,complete:function(){t.isLastPage=i.isLastPage,t.isLoading=!1,t.render(),t.loadingBar.remove()}})},setTopCount:function(){var e=this,t=e.$el,i=e.collection,o=i.totalCount,n=t.find(".item_total._brand_total");o>0?n.show().text("전체 "+String(o<1e3?o:999)+"개"):n.hide().text("")},render:function(){var e=this,t=e.$el,i=e.sortTypes,o=e.collection;t.html(e.template({sortTypes:i,sortTypeName:i[e.criteria.sortTpCd],brandList:o.toJSON(),brandTabUrl:e.brandTabUrl})),e.setTopCount(),!0===e.isActiveTab&&(e.itemSwiper=new Swiper(t.find(".item_area"),{slidesPerView:"auto"}))},setIsActiveTab:function(e){if(_.isBoolean(e)){var t=this;t.isActiveTab=e,e&&null===t.itemSwiper&&(t.itemSwiper=new Swiper(t.$el.find(".item_area"),{slidesPerView:"auto"}))}},checkNearEnd:function(){var e=this;($("#wrap").outerHeight(!0)||0)-($("#footer").outerHeight(!0)||0)-(e.$el.find(".brand_noti_wrap").outerHeight(!0)||0)-window.scrollY<1.3*window.innerHeight&&(e.criteria.pageNum++,e.collectionFetch(!0))},events:{"click ._brandBtnSorting":"showSortTypes","click ._brandBtnOption":"changeSortType","click .btn_brand_like":"deleteBrand","click a[data-ga-label]":"sendGAEvent"},showSortTypes:function(e){if(e&&e.currentTarget){e.preventDefault();var t=this,i=$(e.currentTarget);"true"===i.attr("aria-expanded")?(i.next("div").slideUp(150),i.attr("aria-expanded",!1)):(i.next("div").slideDown(150),i.attr("aria-expanded",!0)),t.sendGAEvent("정렬순선택")}},changeSortType:function(e){if(e&&e.currentTarget){e.preventDefault();var t=this,i=t.criteria,o=$(e.currentTarget),n=o.data("code");_.isUndefined(t.sortTypes[n])||n===i.sortTpCd?t.$el.find(".btn_filter").attr("aria-expanded","false"):(i.sortTpCd=n,i.pageSize=10,i.pageNum=1,t.collectionFetch())}},deleteBrand:function(t){if(t&&t.currentTarget){t.preventDefault();var i=this,o=$(t.currentTarget),n=o.data("code");_.isString(n)&&!_.isEmpty(n)&&(i.ajax&&i.ajax.abort(),i.ajax=Backbone.ajax({xhrFields:{withCredentials:!0},type:"GET",url:e.get("ecDisplayUrl")+"/c/rest/my/zzim/v1/zzimDelete/brand/"+n,cache:!1,success:function(e){if(e&&200===e.status){var t=i.collection,o=t.findWhere({repBrandCd:n}),a=t.totalCount;if(!o)return;t.remove(o),t.totalCount=a>0?a-1:0,i.render(),i.sendGAEvent("브랜드찜삭제")}}}))}},sendGAEvent:function(e){var t=e&&e.currentTarget?$(e.currentTarget).data("ga-label"):e;_.isString(t)&&!_.isEmpty(t)&&dataLayer.push({event:"ga_event",category:"나의관심_NONE_NONE",action:"NONE_나의관심_브랜드찜",label:"NONE_"+t+"/NONE_NONE_NONE_NONE_NONE"})}})}),define("page/cjmall/myzone/activity/m/view/foodAccountBookDetailView",["page/cjmall/myzone/common/helper/myzoneHandelbarsHelper","common/cjos/util/configUtil","common/cjos/inflowInfo/inflowInfo","page/cjmall/myzone/activity/models/foodAccountBookListModel"],function(e,t,i,o){"use strict";return Backbone.View.extend({el:".account_info",initialize:function(){this.fetch()},events:{},fetch:function(){var e=this;e.collection.url=t.get("ecBaseSslUrl")+"/c/rest/myzone/foodAccountBookDetailList.jsp?gubun=001&stepIndex=1&mallCd=001",e.deferred=e.collection.fetch({cache:!1,success:function(t){e.render()},error:function(){cjosLogUtil.log("[foodAccountBookDetailView error]")}})},render:function(){var e=this;e.collection.toJSON()}})}),define("page/cjmall/myzone/activity/m/view/foodAccountBookMainView",["page/cjmall/myzone/common/helper/myzoneHandelbarsHelper","common/cjos/util/configUtil","common/cjos/inflowInfo/inflowInfo","common/cjos/logger/utils/loggerUtil","common/cjos/logger/models/fdsConstantsModel","common/cjmall/ui/m/fullLayer/views/fullLayerView","common/cjmall/ui/m/loading/views/simpleLoadingBar","page/cjmall/myzone/activity/collections/foodAccountBookMasterCollection","page/cjmall/myzone/activity/models/foodAccountBookListModel","page/cjmall/myzone/activity/m/view/foodAccountBookOrderListView","page/cjmall/myzone/activity/m/view/foodAccountBookNoticeView"],function(e,t,i,o,n,a,r,l,s,c,m){"use strict";return Backbone.View.extend({el:"#content",collection:new l,detailModel:new s,template:Handlebars.compile($("#foodAccountBookMasterListTemplate").html()),detailTemplate:Handlebars.compile($("#foodAccountBookDetailTemplate").html()),foodAccountBookLayerTemplate:Handlebars.compile($("#foodAccountBookLayerTemplate").html()),simpleLoadingBar:new r,criteria:{stepIndex:""},saveDepositData:{saveAmount:"",gubun:"",stepIndex:""},orderListData:[],initialize:function(){var e=this;e.simpleLoadingBar.appendTo("#container",!0,!0),o.setFdsKey(n.KEY.PAGE_TITLE),o.setFdsKey(n.KEY.PAGE_TYPE),o.setFdsValue(n.KEY.PAGE_TITLE,"마이존>쇼핑컨텐츠>식품가계부"),o.setFdsValue(n.KEY.PAGE_TYPE,n.PV.PAGE_TYPE.saved_money),e.fetch()},events:{"click .account_more":"openFoodAccountBookDetail","click .lk_detail":"moveFoodAccountBookNotice","click ._openOrderList":"openFoodAccountBookOrderList","click .btn_saving":"saveDeposit","click .btn_chk":"refreshFoodAccountBook"},openFoodAccountBookDetail:function(e){e.preventDefault();var t=this,i=$(e.currentTarget).parents(".account_bx"),o=i.data("stepindex"),n=i.hasClass("is_open");t.criteria.stepIndex=o,$(".account_bx").removeClass("is_open"),n?i.removeClass("is_open"):(i.addClass("is_open"),t.detailfetch(t.criteria.stepIndex))},moveFoodAccountBookNotice:function(e){e.preventDefault();var t=this;t.foodAccountBookNoticeView=new m,new a({title:"식품가계부 자세히보기",container:"body",content:t.foodAccountBookNoticeView,iframeContent:null}).show()},openFoodAccountBookOrderList:function(e){e.preventDefault();var t=this,i=$(e.currentTarget).parents(".account_bx").data("stepindex");t.foodAccountBookOrderListView=new c(t.orderListData[i]),new a({title:"식품가계부 주문내역",container:"body",content:t.foodAccountBookOrderListView,iframeContent:null,autoDestroyOnHide:!1}).show()},saveDeposit:function(e){e.preventDefault();var i=this,o={saveAmount:i.saveDepositData.saveAmount,gubun:i.saveDepositData.gubun,stepIndex:i.saveDepositData.stepIndex};i.simpleLoadingBar.appendTo("#container",!0,!0),$.ajax({url:t.get("ecBaseSslUrl")+"/c/rest/myzone/foodAccountBookSaveAmount",xhrFields:{withCredentials:!0},type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(o),success:function(e){var t=e.resCode,o=e.resMsg;"MSG_COM_SUC_999"===t?i.$el.find("._foodAccountBookSaveDepositLayerContainer").show():alert(o)},error:function(e,t,i){if(void 0!==e.resCode){var o=(e.code,e.resCode,e.resMsg),n=e.description,a=_.size(n)>0?n:o;alert(a)}}}).always(function(){i.simpleLoadingBar.remove()})},refreshFoodAccountBook:function(e){e.preventDefault(),location.reload()},fetch:function(){var e=this;e.collection.url=t.get("ecBaseSslUrl")+"/c/rest/myzone/foodAccountBookMstList",e.deferred=e.collection.fetch({cache:!1,success:function(t){e.render()},error:function(){cjosLogUtil.log("[foodAccountBookCollectionFetch error]")}}).always(function(){e.simpleLoadingBar.remove()})},detailfetch:function(e){var i=this;i.detailModel.url=t.get("ecBaseSslUrl")+"/c/rest/myzone/foodAccountBookDetailList.jsp?gubun=001&stepIndex="+e+"&mallCd=001",i.deferred=i.detailModel.fetch({cache:!1,success:function(t){i.detailrender(e)},error:function(){cjosLogUtil.log("[foodAccountBookCollectionFetch error]")}})},render:function(){var e=this,t=e.collection.toJSON();e.$el.find("._foodAccountBookMasterListContainer").html(e.template({list:t})),e.$el.find("._foodAccountBookSaveDepositLayerContainer").html(e.foodAccountBookLayerTemplate()),t.length>0&&($(".account_bx").first().addClass("is_open"),e.detailfetch(t[0].stepIndex)),$.when(e.deferred).then(function(){e.simpleLoadingBar.remove()})},detailrender:function(e){for(var t=this,i=t.detailModel.get("priceModel").toJSON(),o=t.detailModel.get("stampModel").toJSON(),n=t.detailModel.get("orderModel"),a=[],r=o.length;r<7;r++)a.push("emptyStamp");t.$el.find(".account_info"+e).html(t.detailTemplate({priceData:i,stampData:o,emptyStamp:a})),t.orderListData[e]=n,t.saveDepositData.saveAmount=i.saveAmt,t.saveDepositData.gubun=i.gubun,t.saveDepositData.stepIndex=i.stepIndex}})}),define("page/cjmall/myzone/activity/m/view/foodAccountBookNoticeView",["common/cjos/util/configUtil","page/cjmall/myzone/common/helper/myzoneHandelbarsHelper"],function(e,t){"use strict";return Backbone.View.extend({el:"._foodAccountBookNoticeContainer",noticeTemplate:Handlebars.compile($("#foodAccountBookNoticeTemplate").html()),initialize:function(){this.render()},events:{},render:function(e){var t=this;t.$el.html(t.noticeTemplate())}})}),define("page/cjmall/myzone/activity/m/view/foodAccountBookOrderListView",["common/cjos/util/configUtil","page/cjmall/myzone/common/helper/myzoneHandelbarsHelper"],function(e,t){"use strict";return Backbone.View.extend({el:"._foodAccountBookOrderListContainer",orderListTemplate:Handlebars.compile($("#foodAccountBookOrderListTemplate").html()),initialize:function(e){this.render(e)},events:{},render:function(e){var t=this;t.$el.html(t.orderListTemplate({orderListData:e}))}})}),define("page/cjmall/myzone/activity/m/view/itemReviewableListView",["page/cjmall/myzone/common/helper/myzoneHandelbarsHelper","page/cjmall/myzone/activity/collections/itemReviewableCollection","page/cjmall/myzone/common/models/pageListModel","common/cjos/util/configUtil","common/cjos/inflowInfo/inflowInfo","common/cjos/logger/utils/loggerUtil","common/cjos/util/userAgentUtil","common/cjos/util/appInterfaceUtil","common/cjmall/ui/m/loading/views/simpleLoadingBar","common/cjos/util/loginUserInfo","page/cjmall/myzone/common/helper/myzoneGTMHelper","page/cjmall/myzone/activity/m/view/itemReviewNoticeLayerView","common/cjmall/ui/m/fullLayer/views/fullLayerView"],function(e,t,i,o,n,a,r,l,s,c,m,d,u){"use strict";return Backbone.View.extend({el:"._itemReviewListContainer",template:Handlebars.compile($("#itemReviewableListTemplate").html()),criteria:{pageNumber:1,isMonthReview:"N"},inflowInfo:n,simpleLoadingBar:new s,initialize:function(){var e=this;if(e.model=new i(null,{listCollection:t,pagingNumberUnit:"m"===e.inflowInfo.get("applicationType")?5:10}),_.isUndefined(document.location.hash)||""===document.location.hash)e.setPagingNumberAndFetch(1);else{var o=document.location.hash;o=o.replace("#",""),_.isUndefined(o)||""===o||(e.criteria.pageNumber=o),e.pageListModelFetch()}$(window).on("hashchange",function(){var t=document.location.hash;t=t.replace("#",""),_.isUndefined(t)||""===t||(e.criteria.pageNumber=t),e.pageListModelFetch()})},events:{"click .btn_about_review":"guideOpen","click .lk_guide":"clickGuide","click #month_review":"onlyMonthReviewShow","click ._commentWrite":"reviewWrite","click ._goPageWithNumber":"goPageWithNumber","click ._goPrevPage":"goPrevPage","click ._goNextPage":"goNextPage","click ._ga_event":"gaEventTagging","click ._photo_ga_event":"gaPhotoEventTagging"},clickGuide:function(e){e.preventDefault();var t=this,i=new d;t.full=new u({title:"리뷰 작성 유의사항",container:"body",content:i,iframeContent:null,autoDestroyOnHide:!1}),t.full.show()},guideOpen:function(e){e.preventDefault();var t=this;$(e.currentTarget).parents(".guide_inner").toggleClass("open"),$(".guide_inner").hasClass("open")?(t.$el.find(".btn_about_review").attr("aria-pressed","true"),m.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성할리뷰","NONE_혜택배너열기/NONE_NONE_NONE_NONE_NONE",!1)):(t.$el.find(".btn_about_review").attr("aria-pressed","false"),m.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성할리뷰","NONE_혜택배너닫기/NONE_NONE_NONE_NONE_NONE",!1))},onlyMonthReviewShow:function(e){var t=this,i=(t.$el,"N");if($(e.currentTarget).is(":checked"))i="Y",t.criteria.pageNumber=1;else{i="N";var o=document.location.hash;o=o.replace("#",""),_.isUndefined(o)||""===o||(t.criteria.pageNumber=o)}t.criteria.isMonthReview=i,t.pageListModelFetch()},reviewWrite:function(e){e.preventDefault();for(var t=this,i=$(e.currentTarget).data("from"),n=$(e.currentTarget).closest("div"),a=n.data("cid"),r=0;r<t.model.get("list").length;r++){var l=t.model.get("list").at(r);if(l.cid===a){var s=l.get("orderNumber"),c=l.get("orderGSeq"),d=l.get("itemCode"),u=l.get("channelCode"),p=l.get("itemClsCd"),g=l.get("orderDt"),f=l.get("isItemReview");"N"==l.get("mmReviewYn")?(f=l.get("isItemReview"),m.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성할리뷰","NONE_리뷰작성버튼/NONE_NONE_NONE_NONE_NONE",!1)):(f=l.get("isMonthReview"),m.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성할리뷰","NONE_한달리뷰작성버튼/NONE_NONE_NONE_NONE_NONE",!1)),
"review"==i?location.href=o.get("ecBaseSslUrl")+"/m/myzone/itemReviewWritePage?itemCode="+d+"&orderNo="+s+"&itemClsCode="+p+"&orderGseq="+c+"&channelCode="+u+"&orderDt="+g:"photo"==i?location.href=o.get("ecBaseSslUrl")+"/m/myzone/photoItemReviewWritePage?itemCode="+d+"&orderNo="+s+"&itemClsCode="+p+"&orderGseq="+c+"&reviewNo="+f+"&channelCode="+u+"&orderDt="+g:"month_review"==i?location.href=o.get("ecBaseSslUrl")+"/m/myzone/itemReviewWritePage?itemCode="+d+"&orderNo="+s+"&itemClsCode="+p+"&orderGseq="+c+"&channelCode="+u+"&orderDt="+g+"&isMonthReview=Y":"month_photo"==i&&(location.href=o.get("ecBaseSslUrl")+"/m/myzone/photoItemReviewWritePage?itemCode="+d+"&orderNo="+s+"&itemClsCode="+p+"&orderGseq="+c+"&reviewNo="+f+"&channelCode="+u+"&orderDt="+g+"&isMonthReview=Y")}}},pageListModelFetch:function(){var e=this;e.simpleLoadingBar.appendTo("#container",!0,!0);var t=o.get("ecBaseSslUrl")+"/c/rest/myzone/itemReviewableList?paging.pageNumber="+e.criteria.pageNumber+"&isMonthReview="+e.criteria.isMonthReview;e.model.url=t,e.deferred=e.model.fetch({success:function(t){e.render()},error:function(){cjosLogUtil.log("[pageListModelFetch error]")}})},render:function(){for(var e=this,t=!1,i=0;i<e.model.get("list").length;i++){var o=e.model.get("list").at(i);o.set("cid",o.cid),o.get("periodMonthReviewableCnt")>0&&(t=!0)}if(!_.isEmpty(e.model)){var n={list:e.model.get("list").toJSON(),paginationInfoModel:e.model.get("paginationInfoModel").toJSON(),paginationInfoCollection:e.model.get("paginationInfoCollection").toJSON(),isMonthShowChk:t};Handlebars.registerPartial("paginationTemplate",$("#paginationTemplate").html()),e.$el.html(e.template(n)),$("body").animate({scrollTop:$("body").offset().top},200),"Y"==e.criteria.isMonthReview&&$("#month_review").prop("checked",!0)}$.when(e.deferred).then(function(){e.simpleLoadingBar.remove()})},setPagingNumberAndFetch:function(e){var t=this;$("html").animate({scrollTop:$("html").offset().top},200),_.isUndefined(e)||(document.location.hash="#"+e,t.criteria.pageNumber=e)},goPageWithNumber:function(e){e.preventDefault();var t=this,i=$(e.currentTarget).text();t.setPagingNumberAndFetch(i),m.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성할리뷰","NONE_페이지/NONE_NONE_NONE_NONE_NONE",!1)},goPrevPage:function(e){e.preventDefault();var t=this,i=t.model.get("paginationInfoModel").toJSON();if(!_.isEmpty(i)){var o=i.pageNumber;if(o=_.isUndefined(o)?0:Number(o),!(0!==--o&&o>0))return alert("이전 페이지 목록이 없습니다."),!1;t.setPagingNumberAndFetch(o)}m.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성할리뷰","NONE_이전페이지/NONE_NONE_NONE_NONE_NONE",!1)},goNextPage:function(e){e.preventDefault();var t=this,i=t.model.get("paginationInfoModel").toJSON();if(!_.isEmpty(i)){var o=i.pageNumber;o=_.isUndefined(o)?0:Number(o),o++;var n=i._totalPageSize;if(n=_.isUndefined(n)?0:Number(n),!(0!==o&&0!==n&&o<=n))return alert("다음 페이지 목록이 없습니다."),!1;t.setPagingNumberAndFetch(o)}m.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성할리뷰","NONE_다음페이지/NONE_NONE_NONE_NONE_NONE",!1)},gaEventTagging:function(e){var t=$(e.currentTarget).attr("ga-event-area");m.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성할리뷰","NONE_"+t+"/NONE_NONE_NONE_NONE_NONE",!1)},gaPhotoEventTagging:function(e){var t=$(e.currentTarget).attr("ga-event-area");m.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성할리뷰",t,!1)}})}),define("page/cjmall/myzone/activity/m/view/itemReviewListView",["page/cjmall/myzone/common/helper/myzoneHandelbarsHelper","page/cjmall/myzone/activity/collections/itemReviewCollection","page/cjmall/myzone/activity/collections/itemReviewControlCollection","page/cjmall/myzone/common/models/pageListModel","common/cjos/util/configUtil","common/cjos/inflowInfo/inflowInfo","common/cjmall/ui/m/loading/views/simpleLoadingBar","common/cjos/util/loginUserInfo","page/cjmall/myzone/common/helper/myzoneGTMHelper"],function(e,t,i,o,n,a,r,l,s){"use strict";return Backbone.View.extend({el:"._itemReviewListContainer",template:Handlebars.compile($("#itemReviewListTemplate").html()),criteria:{pageNumber:1,month:1,imageUrl:"",isCJOneMember:!1,isMonthReview:"N"},inflowInfo:a,simpleLoadingBar:new r,_reviewImgSwiper:null,initialize:function(){var e=this;l.get(function(t){t.isCJOneMember&&(e.criteria.isCJOneMember=!0)});var n=e.inflowInfo.get("applicationType");if(e.model=new o(null,{listCollection:t,pagingNumberUnit:"m"===n?5:10}),_.isUndefined(document.location.hash)||""===document.location.hash)e.setPagingNumberAndFetch(1);else{var a=document.location.hash;a=a.replace("#","");var r=a.split("/");e.criteria.month=r[0],e.criteria.pageNumber=r[1],e.pageListModelFetch()}$(window).on("hashchange",function(){if(_.isUndefined(document.location.hash)||""===document.location.hash)history.back();else{var t=document.location.hash;t=t.replace("#","");var i=t.split("/");e.criteria.month=i[0],e.criteria.pageNumber=i[1]}e.pageListModelFetch()}),e.itemReviewControlCollection=new i,e.listenTo(e.itemReviewControlCollection,"deleteComplete",e.pageListModelFetch)},events:{"click #month_review":"onlyMonthReviewShow","click ._month":"monthClick","click ._reviewComment":"reviewDetail","click ._deleteComment":"deleteComment","click ._commentModify":"commentModify","click ._goPageWithNumber":"goPageWithNumber","click ._goPrevPage":"goPrevPage","click ._goNextPage":"goNextPage"},onlyMonthReviewShow:function(e){var t=this,i=(t.$el,"N");i=$(e.currentTarget).is(":checked")?"Y":"N",t.criteria.month=t.criteria.month,t.criteria.pageNumber=1,t.criteria.isMonthReview=i,t.pageListModelFetch(),s.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성한리뷰","NONE_한달리뷰보기/NONE_NONE_NONE_NONE_NONE",!1)},monthClick:function(e){e.preventDefault();var t=this,i=$(e.currentTarget),o=i.hasClass("current"),n=i.data("month");o||($("button._month").removeClass("current"),i.addClass("current"),t.criteria.month=Number(n),t.criteria.pageNumber=1,t.setPagingNumberAndFetch(t.criteria.pageNumber)),s.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성한리뷰","NONE_작성기간/NONE_NONE_NONE_NONE_NONE",!1)},reviewDetail:function(e){e.preventDefault();var t=this,i=$(e.currentTarget),o=i.hasClass("on");$("li._reviewComment").removeClass("on"),$("._review_wrapper").css({transform:"translate3d(0px,0px,0px)"}),i.addClass("on"),t._reviewImgSwiper=new Swiper($('[id="'+i.data("cid")+'"]').find("._review"),{wrapperClass:"_review_wrapper",slideClass:"_review_img",slidesPerView:"auto",initialSlide:-1});var n=i.children().find("._review");o?(i.removeClass("on"),n.addClass("swiper-no-swiping"),s.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성한리뷰","NONE_작성한리뷰닫기/NONE_NONE_NONE_NONE_NONE",!1)):($("._review").addClass("swiper-no-swiping"),n.removeClass("swiper-no-swiping"),s.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성한리뷰","NONE_작성한리뷰열기/NONE_NONE_NONE_NONE_NONE",!1))},deleteComment:function(e){e.preventDefault(),s.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성한리뷰","NONE_삭제버튼/NONE_NONE_NONE_NONE_NONE",!1);for(var t=this,i=($(e.currentTarget),$(e.currentTarget).data("cid")),o=0;o<t.model.get("list").length;o++){var a=t.model.get("list").at(o);if(a.cid===i){var r=a.get("reviewNo"),l=a.get("channelCode"),c={reviewNo:r,channelCode:l};t.itemReviewControlCollection.url=n.get("ecBaseSslUrl")+"/c/rest/myzone/itemReviewDelete",confirm("정말 삭제하시겠습니까?")&&t.itemReviewControlCollection.update(c,"delete")}}},commentModify:function(e){var t=this;t.$el;e.stopPropagation(),s.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성한리뷰","NONE_수정버튼/NONE_NONE_NONE_NONE_NONE",!1);for(var i=$(e.currentTarget).data("cid"),o=0;o<t.model.get("list").length;o++){var a=t.model.get("list").at(o);if(a.cid===i){var r=a.get("reviewNo"),l=a.get("orderNo"),c=a.get("orderGSeq"),m=a.get("itemCode"),d=a.get("mallCode"),u=a.get("channelCode"),p=a.get("itemClsCd"),g=a.get("orderDt"),f=a.get("addReviewYn")?"Y":"N";location.href=n.get("ecBaseSslUrl")+"/m/myzone/itemReviewModifyPage?itemCode="+m+"&orderNo="+l+"&itemClsCode="+p+"&orderGseq="+c+"&reviewNo="+r+"&channelCode="+u+"&mallCode="+d+"&orderDt="+g+"&isMonthReview="+f}}},pageListModelFetch:function(){var e=this;e.simpleLoadingBar.appendTo("#container",!0,!0),e.model.url=n.get("ecBaseSslUrl")+"/c/rest/myzone/itemReviewList?paging.pageNumber="+e.criteria.pageNumber+"&month="+e.criteria.month+"&isMonthReview="+e.criteria.isMonthReview,e.deferred=e.model.fetch({cache:!1,success:function(t){e.render()},error:function(){cjosLogUtil.log("[itemReviewListCollectionFetch error]")}})},render:function(){for(var e=this,t=!1,i=0;i<e.model.get("list").length;i++){var o=e.model.get("list").at(i);o.set("cid",o.cid),o.get("periodMonthReviewCnt")>0&&(t=!0)}if(!_.isEmpty(e.model)){var n={list:e.model.get("list").toJSON(),paginationInfoModel:e.model.get("paginationInfoModel").toJSON(),paginationInfoCollection:e.model.get("paginationInfoCollection").toJSON(),month:e.criteria.month,isCJOneMember:e.criteria.isCJOneMember,isMonthShowChk:t};Handlebars.registerPartial("paginationTemplate",$("#paginationTemplate").html()),e.$el.html(e.template(n)),$("body").animate({scrollTop:$("body").offset().top},200),"Y"==e.criteria.isMonthReview&&$("#month_review").prop("checked",!0)}$.when(e.deferred).then(function(){e.simpleLoadingBar.remove()});var a=e.$el.find("#month"+e.criteria.month);a.addClass("current"),a.siblings("button").removeClass("current"),a.attr("aria-selected","true"),a.siblings("button").attr("aria-selected","false")},setPagingNumberAndFetch:function(e){var t=this;$("html").animate({scrollTop:$("html").offset().top},200),_.isUndefined(t.criteria.month)||_.isUndefined(e)||(t.criteria.pageNumber=e,document.location.hash="#"+t.criteria.month+"/"+t.criteria.pageNumber)},goPageWithNumber:function(e){e.preventDefault();var t=this,i=$(e.currentTarget).text();t.setPagingNumberAndFetch(i),s.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성한리뷰","NONE_페이지/NONE_NONE_NONE_NONE_NONE",!1)},goPrevPage:function(e){e.preventDefault();var t=this,i=t.model.get("paginationInfoModel").toJSON();if(!_.isEmpty(i)){var o=i.pageNumber;if(o=_.isUndefined(o)?0:Number(o),!(0!==--o&&o>0))return alert("이전 페이지 목록이 없습니다."),!1;t.setPagingNumberAndFetch(o)}s.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성한리뷰","NONE_이전페이지/NONE_NONE_NONE_NONE_NONE",!1)},goNextPage:function(e){e.preventDefault();var t=this,i=t.model.get("paginationInfoModel").toJSON();if(!_.isEmpty(i)){var o=i.pageNumber;o=_.isUndefined(o)?0:Number(o),o++;var n=i._totalPageSize;if(n=_.isUndefined(n)?0:Number(n),!(0!==o&&0!==n&&o<=n))return alert("다음 페이지 목록이 없습니다."),!1;t.setPagingNumberAndFetch(o)}s.myzoneCommoGAEventData("마이존_리뷰작성조회_NONE","NONE_NONE_NONE_작성한리뷰","NONE_다음페이지/NONE_NONE_NONE_NONE_NONE",!1)}})}),define("page/cjmall/myzone/activity/m/view/itemReviewNoticeLayerView",[],function(){"use strict";return Backbone.View.extend({el:"._itemReviewNoticeLayerContainer",template:Handlebars.compile($("#mobileItemReviewNoticeTemplate").html()),initialize:function(){var e=this;e.$el.html(e.template())},events:{"click ._change_tab":"changeNoticeGuidance"},changeNoticeGuidance:function(e){e.preventDefault();var t=Number($(e.target).parents("._change_tab").attr("for-index"));$(".guide_info").hide(),$(".guide_info").eq(t).show(),$("._change_tab").removeClass("on"),$("._change_tab").eq(t).addClass("on")}})}),define("page/cjmall/myzone/activity/m/view/itemZzimListView",["page/cjmall/myzone/common/helper/myzoneHandelbarsHelper","common/cjos/util/configUtil","common/cjos/inflowInfo/inflowInfo","common/cjos/logger/utils/loggerUtil","common/cjos/logger/models/fdsConstantsModel","common/cjmall/ui/m/loading/views/simpleLoadingBar","common/cjmall/ui/m/layerPopups/views/toastLayerPopupView","page/cjmall/myzone/activity/collections/shoppingZzimCollection","page/cjmall/myzone/common/models/pageListModel","page/cjmall/myzone/common/helper/myzoneCommonHelper","page/cjmall/myzone/common/helper/myzoneGTMHelper","common/cjos/util/loginUserInfo"],function(e,t,i,o,n,a,r,l,s,c,m,d){"use strict";return Backbone.View.extend({el:".myzone_choice",template:Handlebars.compile($("#shoppingZzimListTemplate").html()),shoppingZzimLayerTemplate:Handlebars.compile($("#shoppingZzimLayerTemplate").html()),simpleLoadingBar:new a,collection:new l,criteria:{pageNumber:1,isAvailableItem:!1,itemUrl:"",pageSize:10},isFirstLoad:!0,focusIndex:null,initialize:function(){var e=this;o.setFdsKey(n.KEY.PAGE_TITLE),o.setFdsKey(n.KEY.PAGE_TYPE);i.get("applicationType");e.model=new s(null,{listCollection:l}),e.pageListModelFetch()},pageListModelFetch:function(){var e=this;if(e.simpleLoadingBar.appendTo("#container",!0,!0),_.isUndefined(e.criteria))return cjosLogUtil.log("[pageListModelModelFetch required criteria]"),!1;var i=$("#ckbxZzim").is(":checked");e.criteria.isAvailableItem=!!i,e.model.url=t.get("ecBaseSslUrl")+"/m/rest/myzone/zzimList?type=D&isAvailableItem="+e.criteria.isAvailableItem,e.deferred=e.model.fetch({xhrFields:{withCredentials:!0},success:function(t){e.render()},error:function(){var e=r.getInstance();e.update("쇼핑찜 데이터 조회에 실패했습니다."),e.show(!0,3e3),cjosLogUtil.log("[pageListModelModelFetch error]")}})},events:{"click ._deleteZzimALL":"zzimDeletePopup","click ._itemdelete":"zzimItemDelete","click ._deleteOk":"deleteOk","click ._itemOnly":"showAvailableItem","click .btn_buy":"buyItem","click ._hideOptionLayer":"hideOptionZzimLayer","click ._hideDeleteLayer":"hideDeleteZzimLayer","click ._gaCheckOut":"goItemCheckoutPage"},zzimDeletePopup:function(e){var t=this;e.preventDefault(),setTimeout(function(){t.toggleShowLayer("._deleteAllLayer"),t.$el.find("#itemContainer ._deleteAllLayer .ly_msgwrap").attr("tabindex","-1").focus()},200)},deleteOk:function(e){var i=this;e.preventDefault(),o.splunkClickLog("ZZIM____button__alldel__");$("#ckbxZzim").is(":checked");i.ajax=Backbone.ajax({url:t.get("ecBaseSslUrl")+"/c/rest/myzone/zzimDelete",data:{type:"ALL"},type:"POST",xhrFields:{withCredentials:!0},success:function(e){i.pageListModelFetch()},error:function(e){var t=r.getInstance();t.update("쇼핑찜 전체삭제에 실패했습니다."),t.show(!0,3e3)}})},hideOptionZzimLayer:function(e){var t=this;e.preventDefault(),_.isUndefined(t.criteria.itemUrl)?t.toggleShowLayer("._optionExistLayer"):(t.ecommercePushForGA(t.gaData,!1),document.location.href=t.criteria.itemUrl,t.toggleShowLayer("._optionExistLayer"))},hideDeleteZzimLayer:function(e){var t=this;e.preventDefault(),setTimeout(function(){t.$el.find("#itemContainer ._deleteZzimALL").focus(),t.$el.find("#itemContainer ._deleteAllLayer .ly_msgwrap").removeAttr("tabindex"),t.toggleShowLayer("._deleteAllLayer")},200)},zzimItemDelete:function(e){var i=this;e.preventDefault(),o.splunkClickLog("ZZIM____list__del__");var n=$(e.currentTarget).parents("li"),a=n.index(),l=n.data("contentid");i.focusIndex=n.next().length?a:a-1,$.ajax({url:t.get("ecBaseSslUrl")+"/c/rest/myzone/zzimDelete",data:{itemCode:l},type:"POST",xhrFields:{withCredentials:!0},success:function(e){i.pageListModelFetch()},error:function(e){var t=r.getInstance();t.update("쇼핑찜 취소에 실패했습니다."),t.show(!0,3e3)}})},showAvailableItem:function(e){var t=this;e.preventDefault(),o.splunkClickLog("ZZIM____button__onsale__"),$("#ckbxZzim").is(":checked")?$("#ckbxZzim").prop("checked",!1):$("#ckbxZzim").prop("checked",!0),t.setPagingNumberAndFetch()},buyItem:function(e){var t=this;e.preventDefault(),o.splunkClickLog("ZZIM____list__buy__"),c.blockEventFromBadCustomer(function(){var i=$(e.currentTarget).parents("li"),o=(i.data("itemcode"),i.data("channelcode"),i.text(),i.children("a").attr("href"));location.href=o,t.criteria.itemUrl=o})},setPagingNumberAndFetch:function(){var e=this;$("html").animate({scrollTop:$("html").offset().top},200),e.pageListModelFetch()},toggleShowLayer:function(e){var t=this;t.$el.find(e).hasClass("on")?(t.$el.find("._shoppingZzimLayerTemplateContainer").hide(),t.$el.find(e).removeClass("on"),t.$el.find(e).hide()):(t.$el.find("._shoppingZzimLayerTemplateContainer").show(),t.$el.find(e).addClass("on"),t.$el.find(e).show())},setTopCount:function(){var e=this,t=e.model.get("list"),i=t?t.toJSON().length:0,o=e.$el.find(".item_total._item_total");i>0&&o.show().text("전체 "+String(i<1e3?i:999)+"개")},sendOrder:function(e){var i=this;$.ajax({type:"POST",xhrFields:{withCredentials:!0},contentType:"application/json",url:t.get("ecBaseSslUrl")+"/c/rest/order/tempOrder",data:JSON.stringify(e),success:function(e){if(1==e.code&&""!=e.result){i.ecommercePushForGA(i.gaData,!0);var o=e.result;location.href=t.get("ecBaseSslUrl")+"/m/order/sheet/"+o}else alert("주문서로 이동할 수 없습니다. 잠시 후 다시 시도해주세요.")},error:function(e,t,i){alert("주문서로 이동할 수 없습니다. 잠시 후 다시 시도해주세요.")},complete:function(){"function"==typeof callback&&context&&callback.apply(context,[])}})},getOrderItemForm:function(e,i,o,n,a,r){var l={};return l.orderItemType="NORMAL",l.itemCode=n,l.itemName=r,l.channelCode=a,l.unitName=o,l.unitCode=e,l.unitPrice=i,l.quantity="1",l.shopId=t.get("shopId"),l},render:function(){var e=this;if(!_.isEmpty(e.model)){var i,o,n={isAvailableItem:e.criteria.isAvailableItem,listLength:e.model.get("list")?e.model.get("list").toJSON().length:0,list:e.model.get("list")?e.model.get("list").toJSON():"",rankingUrl:t.get("ecDisplayUrl")+"/m/homeTab/main?hmtabMenuId=004255",paginationInfoModel:e.model.get("paginationInfoModel")?e.model.get("paginationInfoModel").toJSON():"",paginationInfoCollection:e.model.get("paginationInfoCollection")?e.model.get("paginationInfoCollection").toJSON():""};n.list.forEach(function(e){i="I"==e.contentType?"일반상품":"묶음상품",o="I"==e.contentType?e.itemCode:e.moCode,e.gaEventLabelLast=i+"_"+o+"_"+e.itemName}),e.$el.find("._shoppingZzimContentsContainer").html(e.template(n)),e.$el.find("._shoppingZzimLayerTemplateContainer").html(e.shoppingZzimLayerTemplate()),$("body").animate({scrollTop:$("body").offset().top},200),e.$el.find("._zzimcount").text(n.paginationInfoModel.totalCount)}e.$el.find("#ckbxZzim").attr("checked",e.criteria.isAvailableItem),e.$el.find("#ckbxZzim").is(":checked")?e.$el.find("._emptytxt").text("해당되는 상품이 없습니다."):e.$el.find("._emptytxt").text("찜한 상품이 없습니다."),e.setTopCount(),$.when(e.deferred).then(function(){e.simpleLoadingBar.remove(),e.isFirstLoad?e.isFirstLoad=!1:setTimeout(function(){n.listLength?_.isNumber(e.focusIndex)&&e.$el.find("#itemContainer .list_prod > li").eq(e.focusIndex).find("._itemImage").focus():e.$el.find("#itemContainer .box_no_prod").focus(),e.focusIndex=null},200)})},goItemCheckoutPage:function(e){var t=this,i=$(e.currentTarget).parents("li"),o=i.data("gainfo");t.gaData=o},ecommercePushForGA:function(e,t){var i={itemCode:e.itemCode,itemName:e.itemName,moCode:e.moCode,channelCode:e.channelCode,productType:e.productType,brandCode:e.brandCode,mainVenCode:e.mainVenCode,mdCode:e.mdCode,standardCategory:e.standardCategory,brandName:e.brandName,category:e.category,variant:e.variant,quantity:e.quantity,programCode:e.programCode,programName:e.programName,programType:e.programType,actionFieldListValue:m.ACTION_FIELD_LIST_VALUE.SHOPPING_ZZIM};t?m.ecommerceProductCheckoutEvent(i):m.ecommerceProductClickEvent(i)}})}),define("page/cjmall/myzone/activity/m/view/recentListView",["page/cjmall/myzone/common/helper/myzoneHandelbarsHelper","page/cjmall/myzone/activity/helper/recentHandelbarsHelper","common/cjos/util/configUtil","common/cjos/util/commonUtil","common/cjos/util/imageUtil","common/cjos/util/dateUtil","common/cjos/util/urlUtil","common/cjos/util/canIUseUtil","common/cjos/util/loginUserInfo","common/cjos/util/appInterfaceUtil","common/cjos/util/eventProxyManager","common/cjmall/util/m/eventProxyTypes","common/cjos/inflowInfo/inflowInfo","common/cjos/logger/utils/loggerUtil","common/cjos/util/requestUtil","common/cjmall/ui/m/loading/views/simpleLoadingBar","common/cjmall/ui/m/layerPopups/views/toastLayerPopupView","page/cjmall/myzone/activity/m/view/similarListView","page/cjmall/myzone/activity/collections/recentCollection","page/cjmall/myzone/activity/collections/similarCollection","page/cjmall/myzone/activity/models/recentModel","common/cjmall/util/collections/shoppingZzimCheckListCollection","common/cjmall/util/models/shoppingZzimModel","common/cjmall/ui/m/layerPopups/views/shoppingZzimLayerPopupView","common/cjmall/util/ga360Util","page/cjmall/myzone/activity/c/helper/mGA360Helper","page/cjmall/myzone/common/helper/myzoneGTMHelper"],function(e,t,i,o,n,a,r,l,s,c,m,d,u,p,g,f,h,v,y,C,N,w,E,b,S,T,I){"use strict";return Backbone.View.extend({el:".myzone_choice",simpleLoadingBar:new f,collection:new y,$wnd:$(window),template:null,listTemplate:null,itemTemplate:null,barTemplate:null,$deleteAllConfirmLayerPop:null,$itemContainer:null,initialize:function(){var e=this;e.advancedLazyLoadManager=n.createAdvancedLazyLoadManager(),e.template=Handlebars.compile($("#recentMainTmpl").html()),e.listTemplate=Handlebars.compile($("#recentMainTmpl-list").html()),e.itemTemplate=Handlebars.compile($("#recentMainTmpl-item").html()),e.barTemplate=Handlebars.compile($("#recentMainTmpl-bar").html()),e.emptyTemplate=Handlebars.compile($("#recentEmptyMainTmpl").html()),Handlebars.registerPartial("recentMainTmpl-item",e.itemTemplate),Handlebars.registerPartial("recentMainTmpl-bar",e.barTemplate),e.recentCollectionFetch(),e.similarListView=new v;var t=i.get("isMyzone");$.when(e.deferred).then(function(){_.isEmpty(t)||"true"!=t||(e.$("#ckbx1").attr("checked",!0),e.onlyProductHn())})},recentCollectionFetch:function(){var e=this,t=i.get("ecBaseSslUrl")+"/m/rest/myzone/recentview?type=D";e.collection.url=t,e.deferred=e.collection.fetch({xhrFields:{withCredentials:!0},success:function(t){e.render()},error:function(){cjosLogUtil.log("[recentCollectionFetch error]")}})},events:{"click .sorting_area ._recentDelAll":"deleteAllHn","click .lay_choice_wrap ._recentCancel":"deleteAllCancelHn","click .lay_choice_wrap ._recentChk":"deleteAllOkHn","click .lately_product ._recentDelete":"deleteItemHn","click .lately_product ._recentZzimBtn":"zzimHn","click ._onlyPrdRecent":"onlyProductHn","click .btn_similar_item":"similarPopupOpen","click .btn_pop_close":"similarPopupClose"},zzimHn:function(e){e.preventDefault();var t=this,i=$(e.currentTarget),o=i.parent().parent().parent().data("contentId"),n=!i.is(".before, .on");if(!(o=_.isUndefined(o)?"":o+""))return void alert("Error");s.get(function(e){if(e.isLogin)t.zzimItem(o,n);else{if(l.useSessionStorage())try{var i={zzimId:o,isAdd:n?"ADD":"DEL"};sessionStorage.setItem("page/cjmall/recent/m/views/recentMainView",JSON.stringify(i))}catch(e){}var a=location.href;a=r.removeParamFromURLString(location.href,"tab"),a=r.setParamToURLString(location.href,"tab","recentTab",!0),a=r.setParamToURLString(location.href,"chkStorage","Y"),g.goLoginPage("cjmall",a)}})},deleteAllHn:function(e){e.preventDefault();var t=this;t.$deleteAllConfirmLayerPop=t.$("._recentPopup"),t.$deleteAllConfirmLayerPop.show(0)},deleteAllCancelHn:function(e){e.preventDefault(),this.$deleteAllConfirmLayerPop.hide(0)},deleteAllOkHn:function(e){var t=this;e.preventDefault(),t.$deleteAllConfirmLayerPop.hide(0),t.showLoadingBar(),t.ajax=Backbone.ajax({url:i.get("ecBaseSslUrl")+"/c/rest/myzone/recentviewDelete",data:{type:"ALL"},type:"GET",xhrFields:{withCredentials:!0},success:function(e){var i=t.collection.toJSON(),o=[];_.each(i,function(e,t){"I"!=e.contentType&&"M"!=e.contentType||o.push(e.contentId)});var n={event:"delete_recentItemView",itemCodes:o};dataLayer.push(n),t.removeAllHn()},error:function(e){var t=h.getInstance();t.update("최근본 상품  전체삭제에 실패했습니다."),t.show(!0,3e3)},complete:function(){t.hideLoadingBar()}})},deleteItemHn:function(e){e.preventDefault();var t=this,i=$(e.currentTarget).data("parentCid"),o=t.collection,n=o.get(i);if(n)t.showLoadingBar(),o.remove(n).then(function(){if(n&&("I"==n.get("contentType")||"M"==n.get("contentType"))){var e={event:"delete_recentItemView",itemCodes:[n.get("contentId")]};dataLayer.push(e)}o.length?t.removeHn(n):t.removeAllHn()}).fail(function(){logUtil.log("[page/cjmall/myzone/activity/m/view/recentListView] 아이템 삭제에 실패하였습니다.")}).always(function(){t.hideLoadingBar()});else if(logUtil.log("[page/cjmall/myzone/activity/m/view/recentListView] 컬렉션에 매칭되는 아이템이 없습니다. 바로 삭제!"),o.length){var a=$(e.currentTarget).parent().parent();t.removeHn(null,a)}else t.removeAllHn()},getListGroupByDate:function(){var e=this,t=e.$("input#ckbx1").is(":checked"),i=e.collection,l=i.toJSON();l=_.isArray(l)?l.reverse():[];var s=[];t&&(l=_.reject(l,function(e){return"I"!==e.contentType&&"M"!==e.contentType}));var c=2*parseInt(o.getPxByRem(10),10),m=n.getDefaultNoImgUrl(),d=e.advancedLazyLoadManager.getLoadedImageList();_.map(l,function(e,t){var i=r.getThumbUrl(e.contentImgUrl,c,c,"",!0);d[i]&&(e.contendImgLoaded=!0),e.noImageUrl=m,e.contentImgUrl=i,e.idx=t});var u=_.groupBy(l,function(e){var t=a.getDateFromString(e.insertDate);return a.format("ymd",t)});_.each(u,function(e,t){var i=a.format("m",t,!0),o=a.format("d",t,!0);e[0].contentType;s.push({key:t,list:e,displayMonth:i,displayDay:o})}),s=_.sortBy(s,function(e){return-1*e.key});var p,g;return s.forEach(function(e){e.list.forEach(function(e){switch(e.contentType){case"M":p="묶음상품",g=e.moCode,e.gaEventLabelLast=p+"_"+g+"_"+e.contentName;break;case"I":p="일반상품",g=e.itemCode,e.gaEventLabelLast=p+"_"+g+"_"+e.contentName}})}),s},noListRender:function(){var e=this;e.$el.find("#recentContainer .sorting_area").hide(),e.$el.find(".lately_product").empty().hide(),e.$el.find("._nodata").html(e.emptyTemplate({rankingUrl:i.get("ecDisplayUrl")+"/m/homeTab/main?hmtabMenuId=004255"}))},onlyProductHn:function(e){this.listRender()},listRender:function(){var e=this,t=(e.collection,e.getListGroupByDate());_.isEmpty(t)?e.noListRender():(e.$el.find(".lately_product").html(e.listTemplate({groups:t})),e.setZzimYn()),e.updateCount()},removeHn:function(e,t){var i=this;t||(t=i.$('[data-cid="'+e.get("cid")+'"]'));var o=t.data("groupId"),n=i.$('.item_lately[data-group-id="'+o+'"]');0===t.siblings("[data-cid]").length?n.remove():t.remove(),i.$wnd.trigger("scroll"),0===i.$(".item_lately").length?(i.noListRender(),i.fnbEvent("all")):i.fnbEvent("single"),i.updateCount()},removeAllHn:function(){var e=this;e.noListRender(),e.updateCount(),e.fnbEvent("all")},fnbEvent:function(e){var t=this,o=i.get("imgServerUrl")+"/public/confirm/contents/ec-static-contents/design/img/ic_menub_history_off.png",n=a.format("ymd",new Date),r={contentId:"none",contentType:"I",contentImgUrl:o,contentName:"최근본상품없음",harmGrade:"",insertDate:n};if("single"==e){var l=t.collection,s=l.toJSON();if(s=_.isArray(s)?s.reverse():[],s=_.reject(s,function(e){return"I"!==e.contentType&&"M"!==e.contentType}),s.length>0){var p=s[0];r={contentId:p.contentId,contentType:p.contentType,contentImgUrl:p.contentImgUrl,contentName:p.contentName,harmGrade:p.harmGrd,insertDate:p.insertDate}}}var g=u.userAgent;if(!g.get(g.IS_OSHOPPING_APP)||"cjonstyle"!==g.get(g.APP_NAME))m.trigger(d.FOOTER.UPDATE_BOTTOM_NAVI_RECENT_PRODUCT,r);else{var f=g.get(g.OS_NAME),h="android"===f?"743":"700 ";("android"===f?g.get(g.OSHOPPING_APP_BUILD_VERSION):g.get(g.OSHOPPING_APP_VERSION).replace(/\./g,""))>=h&&(c.setProductDetailInfo(r),m.trigger(d.FOOTER.UPDATE_BOTTOM_NAVI_RECENT_PRODUCT,r))}},updateCount:function(){var e=this,t=e.$el,i=t.find(".lately_product").find("li[data-content-id]").length,o=t.find(".item_total._recent_total");i>0?o.show().text("전체 "+String(i<1e3?i:999)+"개"):o.hide().text("")},showLoadingBar:function(){var e=this;e.simpleLoadingBar=e.simpleLoadingBar||new f,e.simpleLoadingBar.appendTo("#container",!0,!0)},hideLoadingBar:function(){var e=this,t=e.simpleLoadingBar;t&&t.remove()},render:function(){var e=this,t=new w;e.zzimCheckListCollection=t,e.$el.find("#recentContainer").html(e.template());var i=(e.collection.toJSON(),e.getListGroupByDate());_.isEmpty(i)?e.noListRender():(e.$el.find(".lately_product").html(e.listTemplate({groups:i})),s.get(function(t){if(t.isLogin&&(e.setZzimYn(),"Y"===r.getParamFromURLString(location.href,"chkStorage")&&l.useSessionStorage())){var i=r.removeParamFromURLString(location.href,"chkStorage");history.replaceState(null,"최근 본 상품",i);var o=sessionStorage.getItem("page/cjmall/recent/m/views/recentMainView");o=o?JSON.parse(o):null;var n=o.similarPopId;sessionStorage.removeItem("page/cjmall/recent/m/views/recentMainView"),n?(sessionStorage.setItem("similarPopZzimId",o.zzimId),$(".lately_product button[data-item-id="+n+"]").trigger("click")):!o||_.isUndefined(o.zzimId)||_.isUndefined(o.isAdd)||e.zzimItem(o.zzimId,o.isAdd)}})),e.hideLoadingBar(),e.updateCount()},setZzimYn:function(){var e=this,t=e.zzimCheckListCollection,i=e.collection.toJSON();t.fetch({},!0).always(function(){_.each(i,function(i,o){if(t.findWhere({contentId:i.contentId})){var n=e.$el.find("#recentContainer button[data-itemcode="+i.contentId+"]");n.addClass("before"),n.attr("aria-pressed","true")}})})},zzimSave:function(e){var t=this;new E({contentId:e}).save().then(function(i){if("saveOK"==i.get("status")){var o=t.$el.find("#recentContainer button[data-itemcode="+e+"]");o.addClass("on"),o.attr("aria-pressed","true"),t.shoppingZzimLayerPopupView||(t.shoppingZzimLayerPopupView=new b),$(".circle_type").css("z-index","2100"),t.shoppingZzimLayerPopupView.show(!0),setTimeout(function(){$(".circle_type").css("z-index","210")},1301)}}).fail(function(){})},zzimDelete:function(e){var t=this;new E({contentId:e}).destroy().then(function(){var i=t.$el.find("#recentContainer button[data-itemcode="+e+"]");i.removeClass("on before"),i.attr("aria-pressed","false"),t.shoppingZzimLayerPopupView||(t.shoppingZzimLayerPopupView=new b),$(".circle_type").css("z-index","2100"),t.shoppingZzimLayerPopupView.show(!1),setTimeout(function(){$(".circle_type").css("z-index","210")},1301)}).fail(function(){})},zzimItem:function(e,t){var i=this;i.zzimCheckListCollection.fetch({},!0).always(function(){i.zzimCheckListCollection.findWhere({contentId:e}),t?i.zzimSave(e):i.zzimDelete(e)})},similarPopupOpen:function(e){var t=this,i=$("body"),o=$(".similarPopup"),n=$(".similarPopup .similarTopBtn"),a=$(e.currentTarget),r=a.attr("data-item-id");n.css("display","none"),i.addClass("disable_scroll"),i.hasClass("is_app")&&o.find("#container").css("padding-top","4.4rem"),o.css("display","block"),o.empty(),s.get(function(e){t.similarListView.similarCollectionFetch(r,e.isEmployee)}),t.sendGAEventC("NONE_유사상품추천버튼/NONE_NONE_NONE_NONE_NONE"),t.setUrlParam("layer","recommend"),t.setUrlParam("similarPopId",r),setTimeout(function(){dataLayer.push($.extend({},GtmLib.pvData,{event:"ga_virtual"}))},10)},similarPopupClose:function(e){var t=this;e.preventDefault();var i=$("body"),o=$(".similarPopup");o.css("display","none"),i.removeClass("disable_scroll"),o.empty(),t.sendGAEventC("NONE_유사상품추천레이어/닫기버튼_NONE_NONE_NONE_NONE"),t.setUrlParam("layer"),t.setUrlParam("similarPopId")},sendGAEventD:function(e){S.sendEventTagging(T.GA_EVENT_CATEGORY.SIMILAR,T.GA_EVENT_ACTION.SIMILAR,e,{92:T.GA_EVENT_TYPE.D})},sendGAEventC:function(e){S.sendEventTagging(T.GA_EVENT_CATEGORY.SIMILAR,T.GA_EVENT_ACTION.SIMILAR,e,{92:T.GA_EVENT_TYPE.C})},sendGAEventP:function(e){S.sendEventTagging(T.GA_EVENT_CATEGORY.SIMILAR,T.GA_EVENT_ACTION.SIMILAR,e,{92:T.GA_EVENT_TYPE.P})},setUrlParam:function(e,t){var i=this;if(i.isValidString(e)){var o=new URL(location.href);i.isValidString(t)?o.searchParams.set(e,t):o.searchParams.delete(e),history.replaceState(null,null,o.toString())}},isValidString:function(e){return"string"==typeof e&&e.length>0}})}),define("page/cjmall/myzone/activity/m/view/recommendListView",["page/cjmall/myzone/common/helper/myzoneHandelbarsHelper","common/cjos/util/configUtil","common/cjos/logger/utils/loggerUtil","common/cjos/logger/models/fdsConstantsModel","common/cjmall/ui/m/loading/views/simpleLoadingBar","common/cjmall/ui/m/layerPopups/views/toastLayerPopupView","page/cjmall/myzone/activity/collections/recommendCollection","page/cjmall/myzone/activity/models/recommendModel","common/cjmall/util/collections/shoppingZzimCheckListCollection","common/cjmall/util/models/shoppingZzimModel","common/cjos/util/loginUserDetailInfo"],function(e,t,i,o,n,a,r,l,s,c,m){"use strict"
;return Backbone.View.extend({el:".myzone_choice",simpleLoadingBar:new n,collection:new r,_styleInfoList:null,_recommendInfotemplate:Handlebars.compile($("#recommendListTemplate").html()),initialize:function(){var e=this;e.simpleLoadingBar.appendTo("#container",!0,!0),e.displayCount=100,m.get(function(t){t.isLogin&&(e.info=t),e.recommendCollectionFetch()},null,["requireFullName"],!1)},recommendCollectionFetch:function(){var e=this,i=t.get("ecBaseSslUrl")+"/c/rest/myzone/recommendList?pageSize=120";e.collection.url=i,e.deferred=e.collection.fetch({xhrFields:{withCredentials:!0},success:function(t){e.render()},error:function(e){cjosLogUtil.log("[recommendCollectionFetch error]")}})},events:{"click ._gaTarget":"ecommercePushForGA"},render:function(){var e=this,i=e.collection.toJSON();i=i.length>e.displayCount?i.slice(0,e.displayCount):i;var o,n;i.forEach(function(e){e.moCode?(o="묶음상품",n=e.moCode):(o="일반상품",n=e.itemCode),e.gaEventLabelLast=o+"_"+n+"_"+e.itemName});var a=e.info?e.info.custNm+"님":"고객님",r="defense2";if(i.length>0&&i[0].type){if(i[0].type.length>=4){"a002"==i[0].type.slice(-4)&&(r="originReq")}}var l=t.get("ecDisplayUrl")+"/m/homeTab/main?hmtabMenuId=004255";e.$el.find("#recommendContainer").html(e._recommendInfotemplate({list:i,custName:a,type:r,rankingUrl:l})),e.simpleLoadingBar.remove()}})}),define("page/cjmall/myzone/activity/m/view/shoppingZzimMainView",["common/cjos/util/configUtil","common/cjos/inflowInfo/inflowInfo","common/cjos/logger/utils/loggerUtil","common/cjos/util/loginUserInfo","common/cjos/util/urlUtil","common/cjos/util/requestUtil","common/cjmall/ui/m/loading/views/simpleLoadingBar","page/cjmall/myzone/common/helper/fontHelper","page/cjmall/myzone/activity/m/view/itemZzimListView","page/cjmall/myzone/activity/m/view/brandZzimListView","page/cjmall/myzone/activity/m/view/styleZzimListView","page/cjmall/myzone/activity/m/view/recommendListView","page/cjmall/myzone/activity/m/view/recentListView","common/cjos/util/commonUtil","page/cjmall/myzone/common/helper/myzoneGTMHelper"],function(e,t,i,o,n,a,r,l,s,c,m,d,u,p,g){"use strict";return Backbone.View.extend({el:"#content",simpleLoadingBar:new r,itemZzimListView:null,brandZzimListView:null,styleZzimListView:null,recommendListView:null,recentListView:null,tabSwiper:null,initialize:function(){var t=this,i=e.get("tab");l.applyFontPretendard(),t.simpleLoadingBar.appendTo("#container",!0,!0),t.itemZzimListView=new s,t.brandZzimListView=new c,t.styleZzimListView=new m,t.recommendListView=new d,t.recentListView=new u,$.when(t.itemZzimListView.deferred,t.brandZzimListView.deferred,t.styleZzimListView.deferred,t.recommendListView.deferred,t.recentListView.deferred).then(function(){t.$el.find(".myzone_choice").show(),t.toggleTabSwiper(),$(window).on("resize",function(){t.toggleTabSwiper()}),t.simpleLoadingBar.remove(),p.updateClickCode(t.$el),i&&t.initMoveTab(i)}),g.setValueForGtm(g.ACTION_FIELD_LIST_VALUE.SHOPPING_ZZIM)},toggleTabSwiper:function(){var e=this,t=e.$el.find(".tab_wrap"),i=$(window).width(),o=0;t.find(".tab_area .btn_tab").each(function(e,t){o+=$(t).outerWidth(!0)}),o>i?_.isNull(e.tabSwiper)&&(t.addClass("swiper-container"),t.find(".tab_area").addClass("swiper-wrapper"),t.find(".tab_area .btn_tab").addClass("swiper-slide"),e.tabSwiper=new Swiper(t,{slidesPerView:"auto",onClick:function(e,t){e.slideTo($(t.target).parent().index())}})):_.isNull(e.tabSwiper)||(t.removeClass("swiper-container"),t.find(".tab_area").removeClass("swiper-wrapper"),t.find(".tab_area .btn_tab").removeClass("swiper-slide"),e.tabSwiper.destroy(),e.tabSwiper=null)},events:{"click ._move":"moveTabHn","click ._moveCategory":"moveCategoryHn","click ._gaTarget":"ecommercePushForGA","click ._ga_event":"gaEventTagging"},moveTabHn:function(e){e.preventDefault();var t=this,i=$(e.currentTarget);t.moveTabCheck(i)},moveTabCheck:function(e){var t=this,i=e.data("id");["shoopingContainer","itemContainer","brandContainer","styleContainer"].includes(i)?o.get(function(o){if(o.isLogin)t.moveTab(e),"shoopingContainer"===i&&t.moveCategory($("#itemTab"));else{var r=location.href;r=n.removeParamFromURLString(r,"tab"),r=n.setParamToURLString(r,"tab",e.children("a").attr("id")||"",!0),a.goLoginPage("cjmall",r)}}):t.moveTab(e)},initMoveTab:function(e){var t=this,i=$("._"+e);"brandTab"===e||"styleTab"===e?(t.moveTabCheck($("._itemTab")),t.moveCategory($("#"+e))):t.moveTabCheck(i)},moveTab:function(e){var t=this,i=e.data("id");e.attr("aria-selected","true"),e.siblings().attr("aria-selected","false"),$("#"+i).show(),$("#"+i).siblings("._container").hide();var o=$(".fixed_btn_wrap");"styleContainer"==i?o.hide():o.is(":visible")||o.show(),$(window).scrollTop(0),"styleContainer"==i&&t.styleZzimListView._styleImageSwiper&&_.isObject(t.styleZzimListView._styleImageSwiper)&&t.styleZzimListView._styleImageSwiper.update();var a=location.href;a=n.removeParamFromURLString(a,"tab"),a=n.setParamToURLString(a,"tab",e.attr("id")||"",!0),history.replaceState(null,"나의찜",a),"brandContainer"===i?(t.brandZzimListView.setIsActiveTab(!0),history.scrollRestoration="manual"):t.brandZzimListView.isActiveTab&&(t.brandZzimListView.setIsActiveTab(!1),history.scrollRestoration="auto")},moveCategoryHn:function(e){e.preventDefault();var t=this,i=$(e.currentTarget);t.moveCategory(i)},moveCategory:function(e){var t=this,i=e.data("id");e.attr("aria-selected","true"),e.siblings().attr("aria-selected","false"),$("#"+i).show(),$("#"+i).siblings(".my_like_wrap").hide(),$(window).scrollTop(0),"styleContainer"==i&&t.styleZzimListView._styleImageSwiper&&_.isObject(t.styleZzimListView._styleImageSwiper)&&t.styleZzimListView._styleImageSwiper.update();var o=location.href;o=n.removeParamFromURLString(o,"tab"),o=n.setParamToURLString(o,"tab",e.attr("id")||"",!0),history.replaceState(null,"나의찜",o),"brandContainer"===i?(t.brandZzimListView.setIsActiveTab(!0),history.scrollRestoration="manual"):t.brandZzimListView.isActiveTab&&(t.brandZzimListView.setIsActiveTab(!1),history.scrollRestoration="auto")},gaEventTagging:function(e){var t=$(e.currentTarget),i=t.attr("ga-event-area"),o="NONE_나의관심_탭클릭",n="NONE_NONE_NONE";t.attr("ga-event-action")&&(o=t.attr("ga-event-action")),t.attr("ga-event-label-last")&&(n=t.attr("ga-event-label-last"));var a={};t.attr("ga-action-type")&&(a.dimension92=t.attr("ga-action-type")),t.attr("ga-event-d99")&&(a.dimension99=t.attr("ga-event-d99")),g.myzoneCommoGAEventData("나의관심_NONE_NONE",o,"NONE_"+i+"/NONE_NONE_"+n,!1,a)},ecommercePushForGA:function(e){var t=$(e.currentTarget).parents("li"),i=t.data("gainfo"),o={itemCode:i.itemCode,itemName:i.itemName,moCode:i.moCode,channelCode:i.channelCode,productType:i.productType,brandCode:i.brandCode,mainVenCode:i.mainVenCode,mdCode:i.mdCode,standardCategory:i.standardCategory,brandName:i.brandName,category:i.category,variant:i.variant,quantity:i.quantity,programCode:i.programCode,programName:i.programName,programType:i.programType,actionFieldListValue:g.ACTION_FIELD_LIST_VALUE.SHOPPING_ZZIM};g.ecommerceProductClickEvent(o)}})}),define("page/cjmall/myzone/activity/m/view/similarListView",["page/cjmall/myzone/common/helper/myzoneHandelbarsHelper","page/cjmall/myzone/activity/helper/recentHandelbarsHelper","common/cjos/util/configUtil","common/cjos/util/commonUtil","common/cjos/util/imageUtil","common/cjos/util/dateUtil","common/cjos/util/urlUtil","common/cjos/util/canIUseUtil","common/cjos/util/loginUserInfo","common/cjos/util/appInterfaceUtil","common/cjos/util/eventProxyManager","common/cjmall/util/m/eventProxyTypes","common/cjos/inflowInfo/inflowInfo","common/cjos/logger/utils/loggerUtil","common/cjos/util/requestUtil","common/cjmall/ui/m/loading/views/simpleLoadingBar","common/cjmall/ui/m/layerPopups/views/toastLayerPopupView","page/cjmall/myzone/activity/collections/similarCollection","common/cjmall/util/collections/shoppingZzimCheckListCollection","common/cjmall/util/models/shoppingZzimModel","common/cjmall/ui/m/layerPopups/views/shoppingZzimLayerPopupView","common/cjos/util/noImageReplaceUtil","common/cjmall/util/ga360Util","page/cjmall/myzone/activity/c/helper/mGA360Helper","page/cjmall/myzone/common/helper/myzoneGTMHelper"],function(e,t,i,o,n,a,r,l,s,c,m,d,u,p,g,f,h,v,y,C,N,w,E,b,S){"use strict";return Backbone.View.extend({el:".myzone_choice",similarCollection:new v,initialize:function(){var e=this;e.similarPopupTemplate=Handlebars.compile($("#recentSimilarPopup").html()),e.$el.find(".similarPopup").html(e.similarPopupTemplate())},similarCollectionFetch:function(e,t){var o=this;return o.similarCollection.url=i.get("ecDisplayApiFrontUrl")+"/recommend/list/relation",o.similarCollection.fetch({xhrFields:{withCredentials:!0},data:{itemCd:e,modulTpCd:"ZZIM",recomTpCd:"a11",isEmployee:t,recomApplyTit:"이 상품 어때요\n방금 본 상품의 연관상품이에요",commonTit:"이 상품 어때요\n요즘 클릭 많은 상품이에요",size:40},success:function(e){o.similarItemRender()},error:function(){cjosLogUtil.log("[similarCollectionFetch error]")}})},events:{"click .similarPopup ._similarZzimBtn":"zzimHnSimilar","scroll .similarPopup .ly_similar_item":"similarPopupScroll","click .similarTopBtn .btn_similar_top":"similarPopupTopBtn","click .similarPopup .btn_recommend":"gotoCategoryGa","click ._ga_event_similar":"gaEventTagging"},similarItemRender:function(){function e(){var i=t.$el.find(".lst_similar_item").get(0);i&&i.getBoundingClientRect().bottom-window.innerHeight-10<0&&(t.sendGAEventD("NONE_유사상품추천레이어추천구좌/노출끝_NONE_NONE_NONE_NONE"),p.off("scroll",e))}var t=this,o=new y;if(t.zzimCheckListCollection=o,!_.isEmpty(t.similarCollection)){var n=t.similarCollection.toJSON();if(!_.isEmpty(n)){var a=n[0].itemInfoList;a.forEach(function(e){e.gaEventLabelLast="일반상품_"+e.itemBaseInfo.itemCd+"_"+e.itemBaseInfo.itemNm}),$(".similarPopup").css("display"," block!important");a.length>40&&(a.length=40);var r={list:a,_ecBaseSslUrl:i.get("ecBaseSslUrl"),_ecDisplaySslUrl:i.get("ecDisplaySslUrl"),rankingUrl:i.get("ecDisplayUrl")+"/m/homeTab/main?hmtabMenuId=004255"};t.$el.find(".similarPopup").html(t.similarPopupTemplate(r)),s.get(function(e){e.isLogin&&t.setZzimYnSimilar()});var l=$(".similarPopup"),c=l.find(".ly_similar_item"),m=l.find(".btn_similar_top"),d=l.find("#header");m.css({position:"fixed",bottom:"6.9rem",right:"1.4rem","line-height":"0",width:"42px",transform:"translateY(54px)"});var u=0;c.on("scroll",function(){var e=$(this).scrollTop();e>u?m.css("display","inline-block"):c.scrollTop()<=d.height()&&m.css("display","none"),u=e});var p=$(".similarPopup .ly_similar_item"),g=$(".similarPopup header").height(),f=window.innerHeight,h=f-g+"px";p.css({overflow:"hidden","overflow-y":"auto",height:h}),p.on("scroll",e),e(),t.noImage()}}var v=sessionStorage.getItem("similarPopZzimId");if(null!=v){var C=$(".lst_similar_item button[data-itemcode="+v+"]");setTimeout(function(){C.hasClass("before")?alert("이미 찜한 상품입니다."):C.trigger("click")},100),sessionStorage.removeItem("similarPopZzimId")}},similarPopupTopBtn:function(e){var t=this;e.preventDefault(),e.stopPropagation();var i=$(".ly_similar_item"),o=$(".similarPopup .btn_similar_top");$(".similarPopup .ly_similar_item").scrollTop(0),i.offset().top<=44&&o.css("display","none"),t.sendGAEventC("NONE_유사상품추천레이어/탑버튼_NONE_NONE_NONE_NONE")},similarPopupScroll:function(){var e=$(".similarPopup");e.find("#header");if("block"==e.css("display")){var t=$(".ly_similar_item"),i=$(".similarPopup .btn_similar_top");i.css({position:"fixed",bottom:"6.9rem",right:"1.4rem","line-height":"0",width:"42px"}),t.offset().top<=44&&i.css("display","none")}},zzimHnSimilar:function(e){e.preventDefault();var t=this,i=$(e.currentTarget),o=i.closest("li").data("contentId"),n=!i.is(".before, .on");if(!(o=_.isUndefined(o)?"":o+""))return void alert("Error");t.sendGAEventC("NONE_유사상품추천레이어/상품찜_NONE_NONE_NONE_NONE");var a=new URL(location.href).searchParams.get("similarPopId");s.get(function(e){if(e.isLogin)t.zzimItemSimilar(o,n);else{if(l.useSessionStorage())try{var i={zzimId:o,isAdd:n?"ADD":"DEL",similarPopId:a};sessionStorage.setItem("page/cjmall/recent/m/views/recentMainView",JSON.stringify(i))}catch(e){}var s=location.href;s=r.setParamToURLString(location.href,"chkStorage","Y"),g.goLoginPage("cjmall",s)}})},setZzimYnSimilar:function(){var e=this,t=e.zzimCheckListCollection,i=e.similarCollection.toJSON();t.fetch({},!0).always(function(){_.each(i[0].itemInfoList,function(i,o){var n=i.itemBaseInfo.itemCd;if(t.findWhere({contentId:n})){var a=e.$el.find(".similarPopup button[data-itemcode="+n+"]");a.addClass("before"),a.attr("aria-pressed","true")}})})},zzimSaveSimilar:function(e){var t=this;new C({contentId:e}).save().then(function(i){if("saveOK"==i.get("status")){var o=t.$el.find(".similarPopup button[data-itemcode="+e+"]");o.addClass("on"),o.attr("aria-pressed","true"),t.shoppingZzimLayerPopupView||(t.shoppingZzimLayerPopupView=new N),$(".circle_type").css("z-index","2100"),t.shoppingZzimLayerPopupView.show(!0),setTimeout(function(){$(".circle_type").css("z-index","210")},1301)}}).fail(function(){})},zzimDeleteSimilar:function(e){var t=this;new C({contentId:e}).destroy().then(function(){var i=t.$el.find(".similarPopup button[data-itemcode="+e+"]");i.removeClass("on before"),i.attr("aria-pressed","false"),t.shoppingZzimLayerPopupView||(t.shoppingZzimLayerPopupView=new N),$(".circle_type").css("z-index","2100"),t.shoppingZzimLayerPopupView.show(!1),setTimeout(function(){$(".circle_type").css("z-index","210")},1301)}).fail(function(){})},zzimItemSimilar:function(e,t){var i=this;i.zzimCheckListCollection.fetch({},!0).always(function(){t?i.zzimSaveSimilar(e):i.zzimDeleteSimilar(e)})},noImage:function(){var e=this,t=r.getThumbUrl("http:"+r.getItemThumbImgUrl(),240,240,null,!0),i=e.$el.find(".img_item img").toArray();w.add(i,t)},sendGAEventC:function(e){E.sendEventTagging(b.GA_EVENT_CATEGORY.SIMILAR,b.GA_EVENT_ACTION.SIMILAR,e,{92:b.GA_EVENT_TYPE.C})},sendGAEventD:function(e){E.sendEventTagging(b.GA_EVENT_CATEGORY.SIMILAR,b.GA_EVENT_ACTION.SIMILAR,e,{92:b.GA_EVENT_TYPE.D})},sendGAEventP:function(e){E.sendEventTagging(b.GA_EVENT_CATEGORY.SIMILAR,b.GA_EVENT_ACTION.SIMILAR,e,{92:b.GA_EVENT_TYPE.P})},gotoCategoryGa:function(){this.sendGAEventP("NONE_유사상품추천레이어/인기상품더보기_NONE_NONE_NONE_NONE")},gaEventTagging:function(e){var t=$(e.currentTarget),i=t.attr("ga-event-area"),o="NONE_나의관심_탭클릭",n="NONE_NONE_NONE";t.attr("ga-event-action")&&(o=t.attr("ga-event-action")),t.attr("ga-event-label-last")&&(n=t.attr("ga-event-label-last"));var a={};t.attr("ga-action-type")&&(a.dimension92=t.attr("ga-action-type")),t.attr("ga-event-d99")&&(a.dimension99=t.attr("ga-event-d99")),S.myzoneCommoGAEventData("나의관심_NONE_NONE",o,"NONE_"+i+"_NONE_"+n,!1,a)}})}),define("page/cjmall/myzone/activity/m/view/styleZzimListView",["page/cjmall/myzone/common/helper/myzoneHandelbarsHelper","common/cjos/util/configUtil","common/cjos/logger/utils/loggerUtil","common/cjos/logger/models/fdsConstantsModel","common/cjmall/ui/m/loading/views/simpleLoadingBar","common/cjmall/ui/m/layerPopups/views/toastLayerPopupView","page/cjmall/myzone/activity/collections/styleZzimCollection","page/cjmall/myzone/activity/models/styleZzimModel","common/cjmall/util/collections/shoppingZzimCheckListCollection","common/cjmall/util/models/shoppingZzimModel","page/cjmall/myzone/common/helper/myzoneGTMHelper"],function(e,t,i,o,n,a,r,l,s,c,m){"use strict";return Backbone.View.extend({el:".myzone_choice",simpleLoadingBar:new n,collection:new r,_styleInfoList:null,_emptytemplate:Handlebars.compile($("#emptyStyleTemplate").html()),_optioniTemplate:Handlebars.compile($("#styleOptionTemplate").html()),_template:Handlebars.compile($("#styleZzimListTemplate").html()),_styleInfotemplate:Handlebars.compile($("#styleZzimInfoTemplate").html()),_styleItemLayertemplate:Handlebars.compile($("#styleZzimItemLayerTemplate").html()),_stylePopupLayertemplate:Handlebars.compile($("#styleZzimLayerTemplate").html()),_repImageSwiper:null,_styleImageSwiper:null,_layerImageSwiper:null,criteria:{sortTpCd:"LIKE",pagingType:"SEE_MORE",pageSize:10,pageNum:1},sortTypes:{LIKE:"최근 좋아요 순",HAN:"가나다 순",ENG:"ABC 순"},initialize:function(){var e=this;e.simpleLoadingBar.appendTo("#container",!0,!0),e.styleZzimCollectionFetch(),e.celebshopUrl="//display.cjonstyle.com/flagship/celebshop/m/main?tabMenuId=000003",e.selectedStyle=t.get("styleId")},styleZzimCollectionFetch:function(){var e=this,i=t.get("ecBaseSslUrl")+"/c/rest/myzone/styleList?mallCode=S";e.collection.url=i,e.deferred=e.collection.fetch({xhrFields:{withCredentials:!0},success:function(t){e.render()},error:function(){cjosLogUtil.log("[styleZzimCollectionFetch error]")}})},events:{"click ._show_layer_item":"_showItemHn","click ._hide_layer_item":"_hideItemHn","click ._rep_image_wrapper button":"_clickRepStyleHn","click ._image_slide":"_showItemHn","click ._deleteStyleZzimALL":"zzimDeletePopup","click ._styleDeleteOk":"deleteOk","click ._styleHideDeleteLayer":"hideDeleteZzimLayer","click ._style_delete":"styleZzimDelete","click ._item_zzim":"zzimItem","click ._styleBtnSorting":"showSortTypes","click ._styleBtnOption":"changeSortType","click ._gaTarget":"ecommercePushForGA"},zzimDeletePopup:function(e){var t=this;e.preventDefault(),t.toggleShowLayer("._deleteStyleAllLayer")},deleteOk:function(e){var i=this;e.preventDefault(),i.ajax=Backbone.ajax({url:t.get("ecBaseSslUrl")+"/c/rest/myzone/zzimDelete",data:{type:"ALL",mallCode:"S"},type:"POST",xhrFields:{withCredentials:!0},success:function(e){i.styleZzimCollectionFetch()},error:function(e){var t=a.getInstance();t.update("쇼핑찜 전체삭제에 실패했습니다."),t.show(!0,3e3)}})},hideDeleteZzimLayer:function(e){var t=this;e.preventDefault(),t.toggleShowLayer("._deleteStyleAllLayer")},styleZzimDelete:function(e){var i=this;e.preventDefault();var o=$(e.currentTarget).data("style");$.ajax({url:t.get("ecBaseSslUrl")+"/c/rest/myzone/zzimDelete",data:{itemCode:o,mallCode:"S"},type:"POST",xhrFields:{withCredentials:!0},success:function(e){i.styleZzimCollectionFetch()},error:function(e){var t=a.getInstance();t.update("쇼핑찜 취소에 실패했습니다."),t.show(!0,3e3)}})},_clickRepStyleHn:function(e){e.preventDefault();var t=this,i=Number($(e.currentTarget).attr("data-index"));i!==t._activeIndex&&(t._repImageSwiper instanceof Swiper&&t._repImageSwiper.slideTo(i),$("._rep_image_slide:eq("+t._activeIndex+") button").removeClass("on"),$("._rep_image_slide:eq("+i+") button").addClass("on"),t._activeIndex=i,t._updateInfo())},_showItemHn:function(e){var t=this;$(".layer_item").show().addClass("open"),$(".lay_wrap [tabindex]").focus(),$("#header, #footer").attr("aria-hidden","true"),$(".layer_item").siblings().attr("aria-hidden","true"),t._styleInfoList[t._activeIndex].itemList.length>2&&t._layerImageSwiper.update();var i=window.scrollY||window.pageYOffset;t._scroll=i,$("body").css({position:"fixed",top:-t._scroll,bottom:0,left:0,right:0,overflow:"hidden"})},_hideItemHn:function(e){var t=this;$(".layer_item").removeClass("open"),$("#header, #footer").attr("aria-hidden",""),$(".layer_item").siblings().attr("aria-hidden",""),setTimeout(function(){$(".layer_item").hide(),$(".btn_item").focus(),document.body.removeAttribute("style"),window.scrollTo(0,t._scroll)},200)},zzimItem:function(e){e.preventDefault();var t=this,i=String($(e.currentTarget).data("itemcode")),o=new s;o.fetch({},!0).always(function(){o.findWhere({contentId:i})?t.zzimDelete(i):t.zzimSave(i)})},showSortTypes:function(e){if(e&&e.currentTarget){e.preventDefault();var t=$(e.currentTarget);"true"===t.attr("aria-expanded")?(t.next("div").slideUp(150),t.attr("aria-expanded",!1)):(t.next("div").slideDown(150),t.attr("aria-expanded",!0))}},changeSortType:function(e){if(e&&e.currentTarget){e.preventDefault();var t=this,i=(t.criteria,$(e.currentTarget));i.data("code")}},toggleShowLayer:function(e){var t=this;t.$el.find(e).hasClass("on")?(t.$el.find("._styleZzimLayerTemplateContainer").hide(),t.$el.find(e).removeClass("on"),t.$el.find(e).hide()):(t.$el.find("._styleZzimLayerTemplateContainer").show(),t.$el.find(e).addClass("on"),t.$el.find(e).show())},_updateInfo:function(){var e=this;e.$el.find("._styleZzimInfo").html(e._styleInfotemplate({celebshopUrl:e.celebshopUrl,styleInfo:e._styleInfoList[e._activeIndex],activeCateIndex:e._activeIndex})),e.$el.find("._styleZzimLayer").html(e._styleItemLayertemplate({styleInfo:e._styleInfoList[e._activeIndex],activeCateIndex:e._activeIndex})),e.setStyleImageSwiper(),e.setlayerImageSwiper(),e.setZzimYn()},zzimSave:function(e){var t=this;new c({contentId:e}).save().then(function(o){if("saveOK"==o.get("status")){var n=t.$el.find("#styleContainer button[data-itemcode="+e+"]");n.addClass("on"),n.attr("aria-pressed","true"),i.splunkClickLog("ZZIM____button__zzimon__")}}).fail(function(){})},zzimDelete:function(e){var t=this;new c({contentId:e}).destroy().then(function(){var o=t.$el.find("#styleContainer button[data-itemcode="+e+"]");o.removeClass("on"),o.attr("aria-pressed","false"),i.splunkClickLog("ZZIM____button__zzimoff__")}).fail(function(){})},setZzimYn:function(){var e=this,t=new s,i=e._styleInfoList[e._activeIndex].itemList;t.fetch({},!0).always(function(){_.each(i,function(i,o){if(t.findWhere({contentId:i.itemCode})){var n=e.$el.find("#styleContainer button[data-itemcode="+i.itemCode+"]");n.addClass("on"),n.attr("aria-pressed","true")}})})},setTopCount:function(){var e=this,t=e._styleInfoList,i=t?t.length:0,o=e.$el.find(".item_total._style_total");i>0?o.show().text("전체 "+String(i<1e3?i:999)+"개"):o.hide().text("")},setRepImageSwiper:function(){var e=this,t=!1;e._repImageSwiper=new Swiper(e.$el.find("._rep_image_wrap"),{initialSlide:e._activeIndex,wrapperClass:"_rep_image_wrapper",slideClass:"_rep_image_slide",slidesPerView:"auto",freeMode:!0,observer:!0,observeParents:!0,onTouchMove:function(e){t=!0},onSlideChangeStart:function(e){t&&(i.splunkClickLog("ZZIM____contents__swipe__"),t=!1)},onTransitionEnd:function(e){t=!1}})},setStyleImageSwiper:function(){var e=this,t=!1;e._styleInfoList[e._activeIndex].imageList.length>1&&(e._styleImageSwiper=new Swiper(e.$el.find("._image_wrap"),{wrapperClass:"_image_wrapper",slideClass:"_image_slide",slidesPerView:"auto",pagination:".indicator",paginationType:"custom",paginationCustomRender:function(e,t,i){return'<span class="swiper-pagination-current">'.concat(("0"+(0==t?1:t)).slice(-2),'</span> / <span class="swiper-pagination-total">').concat(("0"+i).slice(-2),"</span>")},observer:!0,onTouchMove:function(e){t=!0},onSlideChangeStart:function(e){t&&(m.myzoneCommoGAEventData("나의관심_NONE_NONE","NONE_ilike_나의관심","NONE_스타일찜스와이프/NONE_NONE_NONE",!1),t=!1)},onTransitionEnd:function(e){t=!1}}))},setlayerImageSwiper:function(){var e=this,t=!1;e._styleInfoList[e._activeIndex].itemList.length>2&&(e._layerImageSwiper=new Swiper(e.$el.find("._item_wrap"),{wrapperClass:"_item_wrapper",slideClass:"_item_slide",slidesPerView:"auto",scrollbar:".indicator_scrollbar",scrollbarHide:!1,onTouchMove:function(e){t=!0},onSlideChangeStart:function(e){t&&(i.splunkClickLog("ZZIM____item__swipe__"),t=!1)},onTransitionEnd:function(e){t=!1}}))},render:function(){var e=this,t=e.sortTypes,i=e.collection.toJSON();e.selectedStyle&&_.each(i,function(t,i){t.styleCode==e.selectedStyle&&(e._selectedItem=i)}),e._styleInfoList=i,e._activeIndex=e._activeIndex?e._activeIndex:e._selectedItem?e._selectedItem:0,e._activeIndex=i.length>e._activeIndex?e._activeIndex:i.length-1,0==i.length?e.$el.find("._emptyList").html(e._emptytemplate({celebshopUrl:e.celebshopUrl})):(i.forEach(function(e){if(e.itemList&&e.itemList.length>0){var t=e.itemList[0];e.gaEventLabelLast="일반상품_"+t.gaInfo.itemCode+"_"+t.itemName}}),e.$el.find("._styleZzimList").html(e._template({list:e._styleInfoList,styleInfo:e._styleInfoList[e._activeIndex],activeCateIndex:e._activeIndex})),e.$el.find("._styleZzimInfo").html(e._styleInfotemplate({celebshopUrl:e.celebshopUrl,styleInfo:e._styleInfoList[e._activeIndex],activeCateIndex:e._activeIndex})),e.$el.find("._styleZzimLayer").html(e._styleItemLayertemplate({styleInfo:e._styleInfoList[e._activeIndex],activeCateIndex:e._activeIndex})),e.setRepImageSwiper(),e.setStyleImageSwiper(),e.setlayerImageSwiper(),e.setZzimYn()),e.$el.find("._styleZzimLayerTemplateContainer").html(e._stylePopupLayertemplate()),i.length>0&&e.$el.find("._sorting_option").html(e._optioniTemplate({listLength:i.length,sortTypes:t,sortTypeName:t[e.criteria.sortTpCd]})),e.setTopCount(),e.simpleLoadingBar.remove()}})}),define("page/cjmall/myzone/activity/models/beautyPouchAmountModel",["common/cjos/util/currencyUtil","common/cjos/util/dateUtil"],function(e,t){"use strict";return Backbone.Model.extend({defaults:{saveAmount:"",averagePaymentAmount:"",totalPaymentAmount:""},initialize:function(){},parse:function(t){var i=null;if(_.isEmpty(t.result))i=t;else{t.code,t.resCode,t.resMsg;i=t.result}try{_.isEmpty(i)||(i.saveAmount=_.isUndefined(i.saveAmount)?0:e.formatNumber(i.saveAmount),i.averagePaymentAmount=_.isUndefined(i.averagePaymentAmount)?0:e.formatNumber(i.averagePaymentAmount),i.totalPaymentAmount=_.isUndefined(i.totalPaymentAmount)?0:e.formatNumber(i.totalPaymentAmount))}catch(e){cjosLogUtil.log("[beautyPouchAmountModel parse error]",e)}return cjosLogUtil.log("[beautyPouchAmountModel parse]",i),i}})}),define("page/cjmall/myzone/activity/models/beautyPouchDetailModel",["common/cjos/util/currencyUtil","common/cjmall/util/cjmallUtil","page/cjmall/myzone/activity/collections/beautyPouchOrderListCollection"],function(e,t,i){"use strict";return Backbone.Model.extend({initialize:function(){},parse:function(e){var t=this;if(_.isEmpty(e.result))e;else{e.code,e.resCode,e.resMsg;e.result}var t=this;if(!_.isEmpty(e)){var o=e.result.beautyPouchAmountTuple,n=new i(e.result.beautyPouchOrderListTuple,{parse:!0});return t.set({beautyPouchAmount:null!=o?o:0,beautyPouchOrderList:null!=n?n.toJSON():""}),t}}})}),define("page/cjmall/myzone/activity/models/beautyPouchMasterListModel",["common/cjos/util/currencyUtil","common/cjos/util/dateUtil","page/cjmall/myzone/activity/collections/beautyPouchMasterCollection"],function(e,t,i){"use strict";return Backbone.Model.extend({defaults:{groupingStartDate:"",groupingEndDate:"",saveAmountStepCount:"",beautyPouchMasterList:null},initialize:function(){},url:"",parse:function(e){var o=this;if(!_.isEmpty(e)){var n=new i(e.beautyPouchMasterList,{parse:!0});o.set({groupingStartDate:_.isUndefined(e.groupingStartDate)?"":t.format("Y.m.d",e.groupingStartDate),groupingEndDate:_.isUndefined(e.groupingEndDate)?"":t.format("Y.m.d",e.groupingEndDate),saveAmountStepCount:_.isUndefined(e.saveAmountStepCount)?"":e.saveAmountStepCount,beautyPouchMasterList:_.isUndefined(n)?"":n.toJSON()})}return cjosLogUtil.log("[beautyPouchMasterListModel parse]",o),o.toJSON()}})}),define("page/cjmall/myzone/activity/models/beautyPouchMasterModel",["common/cjos/util/currencyUtil","common/cjos/util/dateUtil"],function(e,t){"use strict";return Backbone.Model.extend({defaults:{gubun:"",stepIndex:"",startDate:"",endDate:"",groupStartDate:"",groupEndDate:"",nowDate:"",betweenDay:"",progressYn:"",progressYnName:"",progressYnDate:"",saveAmountState:"",saveAmountStateName:"",saveButtonMessage:"",saveButtonHiddenState:"",saveAmountStateDate:"",insertId:"",insertDate:"",modifyId:"",modifyDate:"",totalCount:"",textColor:""},initialize:function(){},parse:function(e){var i=null;if(_.isEmpty(e.result))i=e;else{e.code,e.resCode,e.resMsg;i=e.result}try{_.isEmpty(i)||(i.gubun=_.isUndefined(i.gubun)?"":i.gubun,i.stepIndex=_.isUndefined(i.stepIndex)?"":i.stepIndex,i.startDate=_.isUndefined(i.startDate)?"":t.format("Y.m.d",i.startDate),i.endDate=_.isUndefined(i.endDate)?"":t.format("Y.m.d",i.endDate),i.groupStartDate=_.isUndefined(i.groupStartDate)?"":t.format("Y.m.d",i.groupStartDate),i.groupEndDate=_.isUndefined(i.groupEndDate)?"":t.format("Y.m.d",i.groupEndDate),i.nowDate=_.isUndefined(i.nowDate)?"":t.format("Y.m.d",i.nowDate),i.betweenDay=_.isUndefined(i.betweenDay)?"":i.betweenDay,i.progressYn=_.isUndefined(i.progressYn)?"":i.progressYn,i.progressYnName=_.isUndefined(i.progressYnName)?"":i.progressYnName,i.progressYnDate=_.isUndefined(i.progressYnDate)?"":t.format("Y.m.d",i.progressYnDate),i.saveAmountState=_.isUndefined(i.saveAmountState)?"":i.saveAmountState,i.saveAmountStateName=_.isUndefined(i.saveAmountStateName)?"":i.saveAmountStateName,i.saveButtonMessage=_.isUndefined(i.saveButtonMessage)?"":i.saveButtonMessage,i.saveButtonHiddenState=_.isUndefined(i.saveButtonHiddenState)?"":i.saveButtonHiddenState,i.textColor=_.isUndefined(i.textColor)?"":i.textColor)}catch(e){cjosLogUtil.log("[beautyPouchMasterModel parse error]",e)}return cjosLogUtil.log("[beautyPouchMasterModel parse]",i),i}})}),define("page/cjmall/myzone/activity/models/beautyPouchOrderMiddleModel",["common/cjos/util/currencyUtil","common/cjos/util/dateUtil","common/cjmall/util/cjmallUtil","page/cjmall/myzone/activity/collections/beautyPouchOrderCollection"],function(e,t,i,o){"use strict";return Backbone.Model.extend({initialize:function(){},parse:function(e){var i=this;if(_.isEmpty(e.result))e;else{e.code,e.resCode,e.resMsg;e.result}var i=this;if(!_.isEmpty(e)){var n=e.orderNo,a=e.orderDate,r=e.groupByOrderNoPayment,l=e.returnYn,s=new o(e.orderList,{parse:!0}),c=[];return _.each(s.toJSON(),function(e,t){var i=e;c.push(i)}),i.set({orderNo:null!=n?n:"",orderDate:null!=a?t.format("Y.m.d",a,!0):"",groupByOrderNoPayment:null!=r?r:0,returnYn:null!=l?l:"",orderList:null!=c?c:""}),null!=i?i.toJSON():""}}})}),define("page/cjmall/myzone/activity/models/beautyPouchOrderModel",["common/cjos/util/currencyUtil","common/cjmall/util/cjmallUtil"],function(e,t){"use strict";return Backbone.Model.extend({defaults:{itemCode:"",dispItemName:"",itemImageUrl:"",orderNo:"",orderGSeq:"",channelCode:"",unitName:"",orderDate:"",remainOrderQuantity:"",remainSalePriceExcludingDiscountsMultiplyQty:""},initialize:function(){},parse:function(t){var i=null;if(_.isEmpty(t.result))i=t;else{t.code,t.resCode,t.resMsg;i=t.result}try{_.isEmpty(i)||(i.itemCode=_.isUndefined(i.itemCode)?"":i.itemCode,i.dispItemName=_.isUndefined(i.dispItemName)?"":i.dispItemName,i.itemImageUrl=_.isUndefined(i.itemImageUrl)?"":i.itemImageUrl,i.orderNo=_.isUndefined(i.orderNo)?"":i.orderNo,i.orderGSeq=_.isUndefined(i.orderGSeq)?"":i.orderGSeq,i.channelCode=_.isUndefined(i.channelCode)?"":i.channelCode,i.unitName=_.isUndefined(i.unitName)?"":i.unitName,i.orderDate=_.isUndefined(i.orderDate)?"":i.orderDate,i.remainOrderQuantity=_.isUndefined(i.remainOrderQuantity)?0:i.remainOrderQuantity,i.remainSalePriceExcludingDiscountsMultiplyQty=_.isUndefined(i.remainSalePriceExcludingDiscountsMultiplyQty)?0:e.formatNumber(i.remainSalePriceExcludingDiscountsMultiplyQty))}catch(e){cjosLogUtil.log("[beautyPouchOrderModel parse error]",e)}return cjosLogUtil.log("[beautyPouchOrderModel parse]",i),i}})}),define("page/cjmall/myzone/activity/models/brandZzimItemModel",["common/cjos/util/urlUtil","common/cjos/util/commonUtil","common/cjos/util/loginUserInfo"],function(e,t,i){"use strict";return Backbone.Model.extend({defaults:{itemImgUrl:""},defaultOrigins:{itemLink:"",imgUrlList:[],harmGrade:""},initialize:function(){var e=this;e.defaults=_.extend({},e.defaults,e.defaultOrigins)},parse:function(o){var n=this,a=_.isObject(o)?o:{};a=_.isObject(a.itemBaseInfo)?a.itemBaseInfo:a,_.each(n.defaultOrigins,function(e,t){var i=a[t];a[t]=_.isUndefined(i)||_.isNull(i)?e:i});var r=a.imgUrlList,l=_.isArray(r)&&_.isString(r[0])&&!_.isEmpty(r[0])?r[0]:e.getDefaultBannerMoUrl(),s=2*t.getPxByRem(11.4);return _.isEmpty(a.harmGrade)||i.checkHarmGrd(a.harmGrade)||(l=e.getHarmGrdImgUrl()),a.itemImgUrl=e.getThumbUrl(l,s,s),a}})}),define("page/cjmall/myzone/activity/models/brandZzimModel",["common/cjos/util/urlUtil","common/cjos/util/commonUtil","common/cjos/util/stringUtil","page/cjmall/myzone/activity/collections/brandZzimItemCollection"],function(e,t,i,o){"use strict";return Backbone.Model.extend({defaults:{zzimCntStr:""},defaultOrigins:{repBrandCd:"",repBrandNm:"",brandLinkUrl:"",logoImgUrl:"",zzimCnt:0,itemInfoList:[]},initialize:function(){var e=this;e.defaults=_.extend({},e.defaults,e.defaultOrigins)},parse:function(n){var a=this,r=_.isObject(n)?n:{}
;_.each(a.defaultOrigins,function(e,t){var i=r[t];r[t]=_.isUndefined(i)||_.isNull(i)?e:i});var l=2*(t.getPxByRem(4.2)-2);r.logoImgUrl=_.isString(r.logoImgUrl)&&!_.isEmpty(r.logoImgUrl)?e.getThumbUrl(r.logoImgUrl,l,l):"",r.zzimCntStr=_.isNumber(r.zzimCnt)&&r.zzimCnt>0?i.formatThirdNumberComma(r.zzimCnt):"0";var s=new o(r.itemInfoList,{parse:!0});return r.itemInfoList=s.toJSON(),r}})}),define("page/cjmall/myzone/activity/models/foodAccountBookListModel",["common/cjos/util/currencyUtil","page/cjmall/myzone/activity/models/foodAccountBookTotalPriceModel","page/cjmall/myzone/activity/collections/foodAccountBookStampCollection","page/cjmall/myzone/activity/collections/foodAccountBookOrderListCollection"],function(e,t,i,o){"use strict";return Backbone.Model.extend({defaults:{ds_BookDtlStampList:null,ds_BookStampOrderDtlList:null,ds_bookStamp:null},initialize:function(){},url:"",parse:function(e){var n=this;if(!_.isEmpty(e)){var a=new t(e.result.ds_bookStamp,{parse:!0}),r=new i(e.result.ds_BookDtlStampList,{parse:!0}),l=new o(e.result.ds_BookStampOrderDtlList,{parse:!0}),s=[];_.each(l.toJSON(),function(e,t){var i=e.toJSON();s.push(i)}),n.set({priceModel:null!=a?a:"",stampModel:null!=r?r:"",orderModel:null!=s?s:""})}return n}})}),define("page/cjmall/myzone/activity/models/foodAccountBookMasterModel",["common/cjos/util/currencyUtil","common/cjos/util/dateUtil"],function(e,t){"use strict";return Backbone.Model.extend({defaults:{gubun:"",stepIndex:"",startDate:"",endDate:"",nowDate:"",betweenDay:"",progressYn:"",progressYnName:"",progressYnDate:"",saveAmountState:"",saveAmountStateName:"",saveButtonMessage:"",saveButtonHiddenState:"",saveAmountStateDate:"",insertId:"",insertDate:"",modifyId:"",modifyDate:"",totalCount:"",textColor:""},initialize:function(){},parse:function(e){var i=null;if(_.isEmpty(e.result))i=e;else{e.code,e.resCode,e.resMsg;i=e.result}try{_.isEmpty(i)||(i.gubun=_.isUndefined(i.gubun)?"":i.gubun,i.stepIndex=_.isUndefined(i.stepIndex)?"":i.stepIndex,i.startDate=_.isUndefined(i.startDate)?"":t.format("Y.m.d",i.startDate),i.endDate=_.isUndefined(i.endDate)?"":t.format("Y.m.d",i.endDate),i.nowDate=_.isUndefined(i.nowDate)?"":t.format("Y.m.d",i.nowDate),i.betweenDay=_.isUndefined(i.betweenDay)?"":i.betweenDay,i.progressYn=_.isUndefined(i.progressYn)?"":i.progressYn,i.progressYnName=_.isUndefined(i.progressYnName)?"":i.progressYnName,i.progressYnDate=_.isUndefined(i.progressYnDate)?"":t.format("Y.m.d",i.progressYnDate),i.saveAmountState=_.isUndefined(i.saveAmountState)?"":i.saveAmountState,i.saveAmountStateName=_.isUndefined(i.saveAmountStateName)?"":i.saveAmountStateName,i.saveButtonMessage=_.isUndefined(i.saveButtonMessage)?"":i.saveButtonMessage,i.saveButtonHiddenState=_.isUndefined(i.saveButtonHiddenState)?"":i.saveButtonHiddenState,i.textColor=_.isUndefined(i.textColor)?"":i.textColor)}catch(e){cjosLogUtil.log("[foodAccountBookMasterModel parse error]",e)}return cjosLogUtil.log("[foodAccountBookMasterModel parse]",i),i}})}),define("page/cjmall/myzone/activity/models/foodAccountBookOrderMiddleModel",["common/cjos/util/currencyUtil","common/cjmall/util/cjmallUtil","page/cjmall/myzone/activity/collections/foodAccountBookOrderCollection"],function(e,t,i){"use strict";return Backbone.Model.extend({initialize:function(){},parse:function(e){var t=null;if(_.isEmpty(e.result))t=e;else{e.code,e.resCode,e.resMsg;t=e.result}if(!_.isEmpty(t))return new i(t,{parse:!0})}})}),define("page/cjmall/myzone/activity/models/foodAccountBookOrderModel",["common/cjos/util/currencyUtil","common/cjmall/util/cjmallUtil"],function(e,t){"use strict";return Backbone.Model.extend({defaults:{itemCd:"",itemName:"",sumAmtViewStr:"",ordNo:"",returnCnclQty:"",slPrc:"",sumTotAmtView:"",ordGSeq:"",itemImageUrl:"",chnNm:"",returnQty:"",ordDtm:"",chnCd:"",deleveryUrl:"",cnclQty:"",ordQty:"",sumAmtView:"",beforeOrdNo:""},initialize:function(){},parse:function(e){var t=null;if(_.isEmpty(e.result))t=e;else{e.code,e.resCode,e.resMsg;t=e.result}try{_.isEmpty(t)||(t.itemCd=_.isUndefined(t.itemCd)?"":t.itemCd,t.itemName=_.isUndefined(t.itemName)?"":t.itemName,t.itemImageUrl=_.isUndefined(t.itemImageUrl)?"":t.itemImageUrl,t.ordNo=_.isUndefined(t.ordNo)?"":t.ordNo,t.ordQty=_.isUndefined(t.ordQty)?"":t.ordQty,t.sumAmtView=_.isUndefined(t.sumAmtView)?"":t.sumAmtView)}catch(e){cjosLogUtil.log("[foodAccountBookOrderModel parse error]",e)}return cjosLogUtil.log("[foodAccountBookOrderModel parse]",t),t}})}),define("page/cjmall/myzone/activity/models/foodAccountBookStampModel",["common/cjos/util/currencyUtil"],function(e){"use strict";return Backbone.Model.extend({defaults:{chnCd2:"",ordNo:"",ordGSeq:"",ordDtm:"",chnCd:""},initialize:function(){},parse:function(e){var t=null;if(_.isEmpty(e.result))t=e;else{e.code,e.resCode,e.resMsg;t=e.result}try{_.isEmpty(t)||(t.ordDtm=_.isUndefined(t.ordDtm)?"":t.ordDtm)}catch(e){cjosLogUtil.log("[foodAccountBookStampModel parse error]",e)}return cjosLogUtil.log("[foodAccountBookStampModel parse]",t),t}})}),define("page/cjmall/myzone/activity/models/foodAccountBookTotalPriceModel",["common/cjos/util/currencyUtil"],function(e){"use strict";return Backbone.Model.extend({defaults:{startDtm:"",gubun:"",betweenDay:"",saveamtDown:"",progressYn:"",downStartDate:"",stampCnt:"",sumAmt:0,downEndDate:"",saveAmt:0,avgAmt:0,saveamtState:"",stampEndCnt:"",endDtm:"",stepIndex:""},initialize:function(){},parse:function(e){var t=null;if(_.isEmpty(e.result))t=e;else{e.code,e.resCode,e.resMsg;t=e.result}try{_.isEmpty(t)||(t.sumAmt=_.isUndefined(t.sumAmt)?"":t.sumAmt,t.saveAmt=_.isUndefined(t.saveAmt)?"":t.saveAmt,t.avgAmt=_.isUndefined(t.avgAmt)?"":t.avgAmt)}catch(e){cjosLogUtil.log("[foodAccountBookTotalPriceModel parse error]",e)}return cjosLogUtil.log("[foodAccountBookTotalPriceModel parse]",t),t}})}),define("page/cjmall/myzone/activity/models/interestModel",["common/cjos/util/currencyUtil","common/cjos/util/urlUtil","common/cjos/util/loginUserInfo","common/cjmall/util/cjmallUtil"],function(e,t,i,o){"use strict";return Backbone.Model.extend({defaults:{rank:"",categoryId:"",itemCd:"",itemInfo:{basicFlagList:{flagKey:"",flagValue:"",_flagBasicClass:""},benefitFlagList:{flagKey:"",flagValue:"",_flagBenefitClass:""},imgTagUrl:"",itemBaseInfo:{bdStrDtm:"",chnCh:"",contact2ndTxtDispYn:"",custSalePrice:"",discountRate:"",displayItemName:"",harmGrade:"",hpSalePrice:"",imgUrlList:{},isContactSnd:"",isSamenessPrice:"",itemCd:"",itemLink:"",itemNm:"",itemTypeCode:"",oriWebDisplayItemName:"",repBrandCd:"",repBrandLink:"",repBrandNm:"",restockAlarmYn:"",saleClsType:"",salePrice:""},itemReviewInfo:{count:"",score:""},moCodeInfo:null,_noImage:"",_showDiscount:"",itemType:"",itemTypePrice:"",_priveOver:""}},initialize:function(){},parse:function(e){if(e&&e.groupedResults&&Array.isArray(e.groupedResults)){var n=e.groupedResults[0]||{};if(!n)return}var a,r=n.rankList,l=[];r.forEach(function(e){(a=e.itemInfo.itemBaseInfo)&&(a.repBrandNm&&a.oriWebDisplayItemName?a.renderName="<strong>"+a.repBrandNm+"</strong> "+a.oriWebDisplayItemName:a.displayItemName?a.renderName=a.displayItemName:a.renderName=a.itemNm,a.renderName.includes("[보상상품]")||l.push(e))}),e.groupedResults[0].rankList=l;for(var s=0;s<r.length;s++){var c=r[s].itemInfo,m=c.itemBaseInfo,d=c.basicFlagList||[];c.benefitFlagList;if(c._noImage=t.getItemThumbImgUrl(),""==m.imgUrlList)m.imgUrlList=t.getItemThumbImgUrl();else{var u=m.imgUrlList[0];m.imgUrlList=t.getThumbUrl(u,240,240)}c._showDiscount=m.salePrice&&m.discountRate&&!m.launchPrice;var p=m.itemTypeCode||m.itemTypeCd||"",g=function(e){return!!e&&(e+="",0===e.indexOf("8008")||0===e.indexOf("1105"))}(p),f=function(e){return!!e&&(e+="",0===e.indexOf("8008")||0===e.indexOf("8006")||0===e.indexOf("8016")||0===e.indexOf("1105")||0===e.indexOf("110401")||0===e.indexOf("110403"))}(p),_=function(e){return!!e&&(e+="",0===e.indexOf("370301")&&"37030105"!==e||0===e.indexOf("030102")&&"03010206"!==e&&"03010207"!==e&&"03010208"!==e&&"03010209"!==e&&"03010210"!==e)}(p),h=o.isOverseasTravel(p),v=o.isInstallmentTravel(p);if(h?c.itemType=m.hpSalePrice>1?"overseas":"counsel":v?c.itemType=m.hpSalePrice>1?"installment":"counsel":g?c.itemType=m.hpSalePrice>0?"rental":"counsel":f?c.itemType="counsel":_?(c.itemType="cellphone",c.itemTypePrice="hide",m.custSalePrice>1?c.itemTypePrice="customer":m.hpSalePrice>0&&(c.itemTypePrice="hpSale")):c.itemType="base",c._showFlagBasic=""!=c.basicFlagList&&null!=c.basicFlagList&&void 0!=c.basicFlagList,c.basicFlagList)for(var y=0;y<d.length;y++){var C=d[y];switch(C.flagKey){case"TV":C._flagBasicClass="broadcast";break;case"TODAY_ONE":C._flagBasicClass="o_ne_today";break;case"SUNDAY_ONE":C._flagBasicClass="o_ne_sunday";break;case"TOMORROW_ONE":C._flagBasicClass="o_ne_tomorrow"}}if(c._showFlagBenefit=null!=c.benefitFlagList,null!=c.benefitFlagList){var N=c.benefitFlagList[0],w=N.flagKey,E=N.flagValue;switch(c.benefitFlagList.flagKey=w,c.benefitFlagList.flagValue=E,w){case"MILEAGE":case"MANUAL_ADD_MILEAGE":case"MANUAL_MAX_MILEAGE":c.benefitFlagList._flagBenefitClass="save";break;case"MANUAL_CARD":c.benefitFlagList._flagBenefitClass="card";break;case"COUPON":case"SP_COUPON":case"ADD_COUPON":c.benefitFlagList._flagBenefitClass="coupon";break;case"FREE_INTEREST":c.benefitFlagList._flagBenefitClass="card"}}c._showReview=0!=c.itemReviewInfo.count,"19"!==m.harmGrade||i.checkHarmGrd(m.harmGrade)?m.imgUrlList=m.imgUrlList?m.imgUrlList:"":m.imgUrlList=t.getHarmGrdImgUrl(),c.gaInfo={itemCode:m.itemCd?m.itemCd:"",itemName:m.itemNm?m.itemNm:"",productType:m.productType?m.productType:"",brandCode:m.repBrandCd?m.repBrandCd:"",mainVenCode:m.mainVenCode?m.mainVenCode:"",mdCode:m.mdCode?m.mdCode:"",channelCode:m.channelCode?m.channelCode:"",standardCategory:m.standardCategory?m.standardCategory:""}}return e}})}),define("page/cjmall/myzone/activity/models/itemReviewableModel",["common/cjmall/util/cjmallUtil"],function(e){"use strict";return Backbone.Model.extend({defaults:{channelCode:"",orderNumber:"",orderGSeq:"",itemCode:"",orderItemName:"",isItemReview:"",isItemReviewImage:"",isMonthReview:"",isMonthReviewImage:"",imageUrl:"",commentOrderNumber:"",itemClsCd:"",itemDetailUrl:"",periodMonthReviewableCnt:""},url:"",initialize:function(){},parse:function(t){var i=null;if(_.isEmpty(t.result))i=t;else{t.code,t.resCode,t.resMsg;i=t.result}try{_.isEmpty(i)||(i.channelCode=i.channelCode,i.orderNumber=i.orderNumber,i.orderGSeq=i.orderGSeq,i.itemCode=i.itemCode,i.orderItemName=i.orderItemName,i.isItemReview=i.isItemReview,i.isItemReviewImage=i.isItemReviewImage,i.isMonthReview=i.isMonthReview,i.isMonthReviewImage=i.isMonthReviewImage,i.imageUrl=i.imageUrl,i.commentOrderNumber=i.commentOrderNumber,i.itemClsCd=i.itemClsCd,i.orderDt=i.orderDt,i.itemDetailUrl=e.getLinkUrl(i.itemCode,i.channelCode),i.periodMonthReviewableCnt=i.periodMonthReviewableCnt)}catch(e){cjosLogUtil.log("[itemReviewableModel parse error]",e)}return i}})}),define("page/cjmall/myzone/activity/models/itemReviewModel",[],function(){"use strict";return Backbone.Model.extend({defaults:{itemName:"",bodyTypeName:"",bodyTallName:"",orderUnitItemName:"",contents:"",imgYn:"",reviewPointText:"",oneMonthPointText:"",itemImage:"",modifyCommentYn:"",reviewNo:"",itemCode:"",orderDt:"",addReviewYn:!1,grade1:0,grade1Score:0,grade2:0,grade2Score:0,isPointTextShow:!1},url:"",initialize:function(){},parse:function(e){var t=null;if(_.isEmpty(e.result))t=e;else{e.code,e.resCode,e.resMsg;t=e.result}try{_.isEmpty(t)||(t.itemName=t.itemName,t.bodyTypeName=t.bodyTypeName,t.bodyTallName=t.bodyTallName,t.orderUnitItemName=t.orderUnitItemName,t.contents=t.contents,t.imgYn=t.imgYn,t.reviewPointText=t.reviewPointText,t.oneMonthPointText=t.oneMonthPointText,t.imgList=t.imgList,t.modifyCommentYn=t.modifyCommentYn,t.reviewNo=t.reviewNo,t.itemCode=t.itemCode,t.orderDt=t.orderDt,t.addReviewYn=t.addReviewYn,t.grade1=t.grade1,t.grade1Score=t.grade1Score,t.grade2=t.grade2,t.grade2Score=t.grade2Score,t.isPointTextShow=t.isPointTextShow)}catch(e){cjosLogUtil.log("[itemReviewModel parse error]",e)}return t}})}),define("page/cjmall/myzone/activity/models/itemReviewPhotoUploadInfoModel",["common/cjos/util/dateUtil"],function(e){"use strict";return Backbone.Model.extend({defaults:{tagList:""},initialize:function(){},parse:function(e){var t=null;if(!_.isEmpty(e.result)){e.code,e.resCode,e.resMsg;t=e.result}try{_.isEmpty(t)}catch(e){cjosLogUtil.log("[itemReviewPhotoUploadInfoModel parse error]",e)}return cjosLogUtil.log("[itemReviewPhotoUploadInfoModel parse]",t),t}})}),define("page/cjmall/myzone/activity/models/itemReviewWriteModel",[],function(){"use strict";return Backbone.Model.extend({defaults:{grade1:"",grade2:"",score1:"",score2:"",orderItemName:"",orderUnitItemName:"",itemCode:"",orderNo:"",orderGseq:"",imageUrl:"",contents:"",titemvalbbsImgListTupleList:"",_imageName1:"",_seq1:"",_imageUrl1:"",_imageName2:"",_seq2:"",_imageUrl2:"",_imageName3:"",_seq3:"",_imageUrl3:""},url:"",initialize:function(){},parse:function(e){var t=null;if(_.isEmpty(e.result))t=e;else{e.code,e.resCode,e.resMsg;t=e.result}try{_.isEmpty(t)||(t.grade1=t.grade1,t.grade2=t.grade2,t.score1=t.grade1,t.score2=t.grade2,t.orderItemName=t.orderItemName,t.orderUnitItemName=t.orderUnitItemName,t.itemCode=t.itemCode,t.orderNo=t.orderNo,t.orderGseq=t.orderGseq,t.imageUrl=t.imageUrl,t.contents=t.contents,t.titemvalbbsImgListTupleList=t.titemvalbbsImgListTupleList,_.each(t.titemvalbbsImgListTupleList,function(e,i){var o=e.seq,n=e.imageName,a=e.imageUrl;"1"===o?(t._imageName1=n,t._seq1=o,t._imageUrl1=a):"2"===o?(t._imageName2=n,t._seq2=o,t._imageUrl2=a):"3"===o&&(t._imageName3=n,t._seq3=o,t._imageUrl3=a)}),t._commentCustomerInfoSize=_.size(t.commentCustomerInfo))}catch(e){cjosLogUtil.log("[itemReviewWriteModel parse error]",e)}return t}})}),define("page/cjmall/myzone/activity/models/newItemReviewableModel",["common/cjmall/util/cjmallUtil"],function(e){"use strict";return Backbone.Model.extend({defaults:{orderNo:"",orderGSeq:"",orderDt:"",itemCode:"",addReviewYn:"",imageUrl:"",orderItemName:"",orderUnitItemName:"",fstReviewYn:"",itemClsCd:""},url:"",initialize:function(){},parse:function(e){var t=null;if(_.isEmpty(e.result))t=e;else{e.code,e.resCode,e.resMsg;t=e.result}try{_.isEmpty(t)||(t.orderNo=t.orderNo,t.orderGSeq=t.orderGSeq,t.orderDt=t.orderDt.substring(2),t.itemCode=t.itemCode,t.addReviewYn=t.addReviewYn,t.imageUrl=t.imageUrl,t.orderItemName=t.orderItemName,t.orderUnitItemName=t.orderUnitItemName,t.fstReviewYn=t.fstReviewYn,t.itemClsCd=t.itemClsCd)}catch(e){cjosLogUtil.log("[newItemReviewableModel parse error]",e)}return t}})}),define("page/cjmall/myzone/activity/models/newItemReviewModel",["common/cjos/util/dateUtil","common/cjmall/util/cjmallUtil"],function(e,t){"use strict";return Backbone.Model.extend({defaults:{reviewNo:"",itemCode:"",imageUrl:"",itemName:"",orderUnitItemName:"",orderNo:"",orderGSeq:"",contents:"",grade1:0,sGrade1:0,grade2:0,sGrade2:0,reviewImages:[],reviewVideos:[],addReviewYn:"",totalPoint:0,pointPaymentYn:"",insertDt:"",paymentDt:"",isPointTextShow:!1,likeCnt:0,itemClsCd:""},url:"",initialize:function(){},parse:function(i){var o=null;if(_.isEmpty(i.result))o=i;else{i.code,i.resCode,i.resMsg;o=i.result}try{if(!_.isEmpty(o)){var n=new Date(o.insertDate),a=e.format("Y.m.d",n),r=new Date(o.modifyDate),l=(e.format("Y.m.d",r),e.format("Y.m.d",new Date(n.setDate(n.getDate()+4))));o.reviewNo=o.reviewNo,o.itemCode=o.itemCode,o.imageUrl=o.imageUrl,o.itemName=o.itemName,o.orderUnitItemName=o.orderUnitItemName,o.orderNo=o.orderNo,o.orderGSeq=o.orderGSeq,o.contents=o.contents,o.grade1=o.grade1,o.sGrade1=20*o.grade1,o.grade2=o.grade2,o.sGrade2=20*o.grade2,o.reviewImages=o.reviewImages,o.reviewVideos=o.reviewVideos,o.addReviewYn=o.addReviewYn,o.totalPoint=o.totalPoint,o.pointPaymentYn=o.pointPaymentYn,o.insertDt=a,o.paymentDt=l.substring(2),o.isPointTextShow=o.isPointTextShow,o.likeCnt=o.likeCnt,o.itemClsCd=o.itemClsCd,o.defaultImg=t.getImgUrl(o.itemCode)}}catch(e){cjosLogUtil.log("[newItemReviewModel parse error]",e)}return o}})}),define("page/cjmall/myzone/activity/models/newItemSummaryModel",["common/cjos/util/commonUtil","common/cjos/util/configUtil"],function(e,t){var i=Backbone.Model.extend({url:"",initialize:function(){this.url=t.get("ecItemSslUrl")+"/api/review/my-review-summary"},parse:function(e){return cjosLogUtil.log("response : ",e),e}});return e.getSingleton(i)}),define("page/cjmall/myzone/activity/models/recentModel",["common/cjos/util/currencyUtil","common/cjos/util/urlUtil","common/cjos/util/loginUserInfo","common/cjos/util/noImageReplaceUtil","common/cjos/util/configUtil","common/cjos/util/logUtil"],function(e,t,i,o,n,a){"use strict";return Backbone.Model.extend({defaults:{cid:"",isVisibleZzimBtn:!0,isVisibleWaveSymbol:!1,priceLabel:"",targetPrice:0,contentType:"",contentId:"",contentName:"",contentUrl:"",contentImgUrl:"",contentCondition:"",harmGrd:null,salePrice:0,itemTypeCode:"",customerPrice:0,hpSalePrice:0,couponDcRt:null,cjOnePointPrice:0,noInterestMonth:0,itemCode:"",moCode:null,channelCode:null,insertDate:null,isCouncel:!1,isOnlyUnit:null,isCellPhone:null,isRental:null,launchPrice:0,contact2ndTxtDispYn:"",_accessibilityTitle:"",_benefit:"",_deliveryBenefit:"",_benefitType:"",_priveOver:!1,productType:"",brandCode:"",mainVenCode:"",mdCode:"",standardCategory:""},deleteUrl:n.get("ecBaseSslUrl")+"/c/rest/myzone/recentviewDelete",initialize:function(){var e=this;e.set("cid",e.cid)},parse:function(n){var a=n.harmGrd,r=n.contentCondition,l=n.isOnlyUnit,s=n.isRental,c=n.isCouncel,m=n.isCellPhone,d=n.salePrice,u=n.customerPrice,p=n.hpSalePrice,g=n.itemTypeCode+="",f="",h=0,v=n.contact2ndTxtDispYn;return _.isEmpty(a)||i.checkHarmGrd(a)||(n.contentImgUrl=t.getHarmGrdImgUrl()),_.isEmpty(a)&&"I"!==r&&"D"!==r?n.isVisibleZzimBtn=!0:n.isVisibleZzimBtn=!1,_.isEmpty(n.contentImgUrl)&&(n.contentImgUrl=o.getNoImgUrl()),n._accessibilityTitle="판매가격",s&&p?(f=0===g.indexOf("11050501")?"":"월",n._accessibilityTitle="렌탈가격"):c?("Y"===v&&(f="상담신청"),n._accessibilityTitle=""):m&&!u&&p&&(f="단말기 가격",n._accessibilityTitle=""),n.priceLabel=f,"I"!==r&&"D"!==r?h=c?s&&p?p:0:m?u||(p||0):u||(d||0):n.priceLabel="",n.targetPrice=h,n.targetPrice>=1e6&&(n._priveOver=!0),"M"===n.contentType||s&&p||m&&!u&&p||!l?n.isVisibleWaveSymbol=!0:n.isVisibleWaveSymbol=!1,"M"==n.contentType?(n.mocodeName&&(n.itemName=n.mocodeName),n.itemName&&(n.itemUrl=n.mocodeUrl)):n.itemName=n.displayName?n.displayName:n.itemName,n.gaInfo={itemCode:n.itemCode?n.itemCode:"",itemName:n.contentName?n.contentName:"",productType:n.productType?n.productType:"",brandCode:n.brandCode?n.brandCode:"",mainVenCode:n.mainVenCode?n.mainVenCode:"",moCode:n.moCode?n.moCode:"",mdCode:n.mdCode?n.mdCode:"",channelCode:n.channelCode?n.channelCode:"",standardCategory:n.standardCategory?n.standardCategory:""},n.isFreeDelivery&&!n._benefit&&(n._benefit="무료배송",n._benefitClass=""),n.noInterestMonth&&!n._benefit&&(n._benefit="무이자"+n.noInterestMonth,n._benefitClass="card"),n.mileagePrice&&!n._benefit&&(n._benefit="적립금"+e.formatNumber(n.mileagePrice)+"원",n._benefitClass="save"),n.cjOnePointPrice&&!n._benefit&&(n._benefit="CJONE "+e.formatNumber(n.cjOnePointPrice)+"P",n._benefitClass="save"),n.couponText&&!n._benefit&&(n._benefit="쿠폰"+n.couponText,n._benefitClass="coupon"),n.spCouponText&&!n._benefit&&(n._benefit="쇼플"+n.spCouponText,n._benefitClass="coupon"),n.isTmarvltDelivery&&!n._deliveryBenefit&&(n._deliveryBenefit="내일도착",n._benefitType="2"),n.dawnDelivYn&&!n._deliveryBenefit&&(n._deliveryBenefit="새벽배송"),n.nanumDelivYn&&!n._deliveryBenefit&&(n._deliveryBenefit="나눔배송"),n.overseasPurYn&&!n._deliveryBenefit&&(n._deliveryBenefit="해외직구"),n.isFastDelivery&&!n._deliveryBenefit&&(n._deliveryBenefit="빠른배송"),n},destroy:function(){var e=this,t={method:"POST",dataType:"json",url:e.url,xhrFields:{withCredentials:!0},timeout:5e3},i=$.Deferred(),o=e.get("contentId"),n=e.get("contentType"),r=_.extend({},t,{method:"GET",url:e.deleteUrl,data:{contentId:o,contentType:n,type:"N"}});if(e.jqXHR&&"pending"===e.jqXHR.state())try{e.jqXHR.abort()}catch(e){}return e.jqXHR=$.ajax(r).then(function(t,o,n){e.isValidateResponse(t,!0)&&"MSG_COM_SUC_999"===t.resCode?(a.log("[page/cjmall/myzone/activity/models/recentModel :: destroy] "+t.resMsg),i.resolve(e)):(a.log("[page/cjmall/myzone/activity/models/recentModel :: destroy] response validation error"),i.reject(e))}).fail(function(){a.log("[page/cjmall/myzone/activity/models/recentModel :: destroy] sync error"),i.reject(e)}).always(function(){e.jqXHR=null}),i},isValidateResponse:function(e,t,i,o){return i=_.isUndefined(i)?"code":i,o=_.isUndefined(o)?1:o,!(!e||!e[i]||e[i]!==o||!t&&!e.result)}})}),define("page/cjmall/myzone/activity/models/recommendModel",["common/cjos/util/currencyUtil","common/cjos/util/urlUtil","common/cjos/util/loginUserInfo"],function(e,t,i){"use strict";return Backbone.Model.extend({defaults:{seq:"",type:"",itemCode:"",itemName:"",itemUrl:"",itemImageUrl:"",harmGrd:"",contentCondition:"",contentType:"",customerPrice:"",salePrice:"",launchPrice:"",hpSalePrice:"",isCellPhone:"",isRental:"",isCouncel:"",isOnlyUnit:"",discountRate:"",mileagePrice:"",etvAddMileage:"",couponText:"",spCouponText:"",isFreeDelivery:"",isFastDelivery:"",isTmarvltDelivery:"",noInterestMonth:"",cjOnePointPrice:"",accumulateOrderQty:"",reviewCnt:"",avgScore:"",mocodeName:"",mocodeUrl:"",moCode:"",moOrderQty:"",channelCode:"",productType:"",brandCode:"",mainVenCode:"",mdCode:"",standardCategory:"",_noImage:"",_showingDiscount:"",_priceLabel:"",_benefit:"",_benefitType:"",_showingPrice:"",_isVisibleWaveSymbol:!1,_preTitle:"",_priveOver:!1,_autoTagClass:"",_autoTagText:""},initialize:function(){},parse:function(o){o._showingDiscount=!(o.launchPrice>0)&&o.salePrice>o.customerPrice,"19"!==o.harmGrd||i.checkHarmGrd(o.harmGrd)?o.itemImgUrl=o.itemImgUrl?o.itemImgUrl:"":o.itemImgUrl=t.getHarmGrdImgUrl(),o.isRental&&o.hpSalePrice?o._preTitle=0===o.itemCode.indexOf("11050501")?"":"월":o.isCouncel?o._priceLabel="상담신청":o.isCellPhone&&!o.customerPrice&&o.hpSalePrice&&(o._preTitle="단말기 가격");var n=0;return n=o.isCouncel?o.isRental&&o.hpSalePrice?o.hpSalePrice:0:o.isCellPhone?o.customerPrice?o.customerPrice:o.hpSalePrice?o.hpSalePrice:0:o.customerPrice?o.customerPrice:o.salePrice?o.salePrice:0,o._showingPrice=n,o._showingPrice>=1e6&&(o._priveOver=!0),"M"==o.contentType||o.isRental&&o.hpSalePrice||o.isCellPhone&&!o.customerPrice&&o.hpSalePrice||!o.isOnlyUnit?o._isVisibleWaveSymbol=!0:o._isVisibleWaveSymbol=!1,o._noImage=t.getItemThumbImgUrl(),"M"==o.contentType?(o.mocodeName&&(o.itemName=o.mocodeName),o.itemName&&(o.itemUrl=o.mocodeUrl)):o.itemName=o.displayName?o.displayName:o.itemName,o.gaInfo={itemCode:o.itemCode?o.itemCode:"",itemName:o.itemName?o.itemName:"",productType:o.productType?o.productType:"",brandCode:o.brandCode?o.brandCode:"",mainVenCode:o.mainVenCode?o.mainVenCode:"",moCode:o.moCode?o.moCode:"",mdCode:o.mdCode?o.mdCode:"",channelCode:o.channelCode?o.channelCode:"",standardCategory:o.standardCategory?o.standardCategory:""},o.isTmarvltDelivery&&!o._benefit&&(o._benefit="내일도착",o._benefitType="2"),o.isFreeDelivery&&!o._benefit&&(o._benefit="무료배송"),o.noInterestMonth&&!o._benefit&&(o._benefit="무이자"+o.noInterestMonth,o._benefitClass="card"),o.mileagePrice&&!o._benefit&&(o._benefit="적립금"+e.formatNumber(o.mileagePrice)+"원",o._benefitClass="save"),o.cjOnePointPrice&&!o._benefit&&(o._benefit="CJONE "+e.formatNumber(o.cjOnePointPrice)+"P",o._benefitClass="save"),o.couponText&&!o._benefit&&(o._benefit="쿠폰"+o.couponText,o._benefitClass="coupon"),o.spCouponText&&!o._benefit&&(o._benefit="쇼플"+o.spCouponText,o._benefitClass="coupon"),o.dawnDelivYn&&!o._benefit&&(o._benefit="새벽배송",o._benefitType="2"),o.nanumDelivYn&&!o._benefit&&(o._benefit="나눔배송",o._benefitType="2"),o.overseasPurYn&&!o._benefit&&(o._benefit="해외직구",o._benefitType="2"),o.isFastDelivery&&!o._benefit&&(o._benefit="빠른배송",o._benefitType="2"),"LIVE"==o.autoTag?(o._autoTagClass="tag_live",o._autoTagText="방송중"):"BROADCAST_ITEM"==o.autoTag&&(o._autoTagClass="tag_item",o._autoTagText="방송상품"),o}})}),define("page/cjmall/myzone/activity/models/shoppingZzimListModel",["common/cjos/util/currencyUtil","page/cjmall/myzone/activity/collections/shoppingZzimCollection"],function(e,t){"use strict";return Backbone.Model.extend({defaults:{shoppingZzimCount:null,shoppingZzimCollection:null},initialize:function(){},url:"",parse:function(i){var o=this;if(!_.isEmpty(i.result)){var n=(i.result.detailZzimList,i.result.shoppingZzimCount);o.set({list:new t(i,{parse:!0}),shoppingZzimCount:null!=n?e.formatNumber(n):"0"})}return o}})}),define("page/cjmall/myzone/activity/models/shoppingZzimModel",["common/cjos/util/currencyUtil","common/cjos/util/loginUserInfo","common/cjos/util/urlUtil","common/cjos/util/configUtil","common/cjmall/util/cjmallUtil","page/cjmall/myzone/activity/models/shoppingZzimSaleClsModel"],function(e,t,i,o,n,a){"use strict";return Backbone.Model.extend({defaults:{isOnlyUnit:"",harmGrd:"",chnlCjOnePointPrice:"",itemName:"",channelCode:"",noInterestMonth:"",itemTypeCode:"",contentType:"",contentId:"",moCode:"",couponDcRt:"",saleCls:new a,custWishlistId:"",cjOnePointPrice:"",customerPrice:"",salePrice:"",hpSalePrice:"",isCellPhone:"",isRental:"",isCouncel:"",contentCondition:"",itemImgUrl:"",itemCode:"",itemUrl:"",discountRate:"",productType:"",brandCode:"",mainVenCode:"",mdCode:"",standardCategory:"",brandName:"",gaItemName:"",category:"",variant:"",quantity:"",programCode:"",programName:"",programType:"",_sortText:"",_showingPrice:"",_isViewSaleButton:"",_isNotZeroPrice:"",_isVisibleWaveSymbol:!1,_accessibilityTitle:"",_benefit:"",_benefitType:"",_showingDiscount:"",_priveOver:!1},initialize:function(){},parse:function(r){var l=null;if(_.isEmpty(r.result))l=r;else{r.code,r.resCode,r.resMsg;l=r.result}try{if(!_.isEmpty(l)){l.isOnlyUnit=!_.isUndefined(l.isOnlyUnit)&&l.isOnlyUnit,l.harmGrd=_.isUndefined(l.harmGrd)?"":l.harmGrd,l.chnlCjOnePointPrice=null!=l.customerPrice?l.chnlCjOnePointPrice:"0",l.itemName=_.isUndefined(l.itemName)?"":l.itemName,l.channelCode=_.isUndefined(l.channelCode)?"":l.channelCode,l.noInterestMonth=_.isUndefined(l.noInterestMonth)?"":l.noInterestMonth,l.itemTypeCode=_.isUndefined(l.itemTypeCode)?"":l.itemTypeCode,l.contentType=_.isUndefined(l.contentType)?"":l.contentType,l.contentId=_.isUndefined(l.contentId)?"":l.contentId,l.moCode=_.isUndefined(l.moCode)?"":l.moCode,l.couponDcRt=_.isUndefined(l.couponDcRt)?"":l.couponDcRt,l.custWishlistId=_.isUndefined(l.custWishlistId)?"":l.custWishlistId,l.cjOnePointPrice=null!=l.cjOnePointPrice?l.cjOnePointPrice:"0",l.customerPrice=null!=l.customerPrice?l.customerPrice:0,l.salePrice=null!=l.salePrice?l.salePrice:0,l.hpSalePrice=null!=l.hpSalePrice?l.hpSalePrice:0,l.isCellPhone=!_.isUndefined(l.isCellPhone)&&l.isCellPhone,l.isRental=!_.isUndefined(l.isRental)&&l.isRental,l.isCouncel=!_.isUndefined(l.isCouncel)&&l.isCouncel,l.contentCondition=_.isUndefined(l.contentCondition)?"":l.contentCondition,l.launchPrice=null!=l.launchPrice?l.launchPrice:0,l.contact2ndTxtDispYn="Y"===l.contact2ndTxtDispYn,l.gaInfo={itemCode:l.itemCode?l.itemCode:"",itemName:l.gaItemName?l.gaItemName:"",productType:l.productType?l.productType:"",brandCode:l.brandCode?l.brandCode:"",mainVenCode:l.mainVenCode?l.mainVenCode:"",moCode:l.moCode?l.moCode:"",mdCode:l.mdCode?l.mdCode:"",channelCode:l.channelCode?l.channelCode:"",standardCategory:l.standardCategory?l.standardCategory:"",brandName:l.brandName?l.brandName:null,category:l.category?l.category:null,variant:l.variant?l.variant:null,quantity:l.quantity?l.quantity:null,programCode:l.programCode?l.programCode:null,programName:l.programName?l.programName:null,programType:l.programType?l.programType:null},l._showingDiscount=!(l.launchPrice>0)&&l.salePrice>l.customerPrice;var s=0,c=n.isOverseasTravel(l.itemTypeCode);l._accessibilityTitle="판매가격",l.isRental&&l.hpSalePrice?(l._sortText=c?"":"월",l._accessibilityTitle="렌탈가격"):l.isCouncel?"mobile"===o.get("platform")?l.contact2ndTxtDispYn&&(l._sortText="상담신청"):l._sortText="상담신청":l.isCellPhone&&!l.customerPrice&&l.hpSalePrice&&(l._sortText="단말기 가격"),"I"!==l.contentCondition&&"D"!==l.contentCondition?s=l.isCouncel?l.isRental&&l.hpSalePrice?l.hpSalePrice:0:l.isCellPhone?l.customerPrice?l.customerPrice:l.hpSalePrice?l.hpSalePrice:0:l.customerPrice?l.customerPrice:l.salePrice?l.salePrice:0:l._sortText="",l._showingPrice=s,l._showingPrice>=1e6&&(l._priveOver=!0),l.salePrice>l._showingPrice&&(l.discountRate=Math.ceil(100-100*l._showingPrice/l.salePrice)),"B"==l.contentType||l.isRental&&l.hpSalePrice||l.isCellPhone&&!l.customerPrice&&l.hpSalePrice||!l.isOnlyUnit?l._isVisibleWaveSymbol=!0:l._isVisibleWaveSymbol=!1,l._isViewSaleButton=!0,(l.isCellPhone||l.isCouncel)&&(l._isViewSaleButton=!1),"19"!==l.harmGrd||t.checkHarmGrd(l.harmGrd)?l.itemImgUrl=_.isUndefined(l.itemImgUrl)?"":l.itemImgUrl:l.itemImgUrl=i.getHarmGrdImgUrl(),l.itemCode=_.isUndefined(l.itemCode)?"":l.itemCode,l.itemUrl=_.isUndefined(l.itemUrl)?"":l.itemUrl,l.saleCls=new a(l.saleCls,{parse:!0}),l.noInterestMonth&&!l._benefit&&(l._benefit="무이자"+l.noInterestMonth,l._benefitClass="card"),l.mileagePrice&&!l._benefit&&(l._benefit="적립금"+e.formatNumber(l.mileagePrice)+"원",l._benefitClass="save"),l.cjOnePointPrice&&!l._benefit&&(l._benefit="CJONE "+e.formatNumber(l.cjOnePointPrice)+"P",l._benefitClass="save"),l.couponText&&!l._benefit&&(l._benefit="쿠폰"+l.couponText,l._benefitClass="coupon"),l.spCouponText&&!l._benefit&&(l._benefit="쇼플"+l.spCouponText,l._benefitClass="coupon")}}catch(e){cjosLogUtil.log("[shoppingZzimModel parse error]",e)}return l}})}),define("page/cjmall/myzone/activity/models/shoppingZzimSaleClsModel",["common/cjos/util/configUtil"],function(e){"use strict";return Backbone.Model.extend({defaults:{code:"",parentCode:"",enumValue:""},initialize:function(){},parse:function(e){var t=null;if(_.isEmpty(e.result))t=e;else{e.code,e.resCode,e.resMsg;t=e.result}try{_.isEmpty(t)||(t.code=_.isUndefined(t.code)?"":t.code,t.parentCode=_.isUndefined(t.parentCode)?"":t.parentCode,t.enumValue=_.isUndefined(t.enumValue)?"":t.enumValue)}catch(e){cjosLogUtil.log("[shoppingZzimSaleClsModel parse error]",e)}return t}})}),define("page/cjmall/myzone/activity/models/similarModel",["common/cjos/util/currencyUtil","common/cjos/util/urlUtil","common/cjos/util/loginUserInfo","common/cjmall/util/cjmallUtil"],function(e,t,i,o){"use strict";return Backbone.Model.extend({defaults:{renewalDate:"",recomTpCd:"",itemInfoList:{itemBaseInfo:{bdStrDtm:"",chnCh:"",contact2ndTxtDispYn:"",custSalePrice:"",discountRate:"",displayItemName:"",harmGrade:"",hpSalePrice:"",imgUrlList:{},isContactSnd:"",isSamenessPrice:"",itemCd:"",itemLink:"",itemNm:"",itemTypeCode:"",contact2ndYn:"",oriWebDisplayItemName:"",repBrandCd:"",repBrandLink:"",repBrandNm:"",restockAlarmYn:"",saleClsType:"",salePrice:""},basicFlagList:{flagKey:"",flagValue:"",_flagBasicClass:""},benefitFlagList:{flagKey:"",flagValue:"",_flagBenefitClass:""},imgTagUrl:"",moCodeInfo:"",itemReviewInfo:{count:"",score:""},_noImage:"",_showDiscount:"",_showingPrice:"",_showFlagBasic:"",_showFlagBenefit:"",_showReview:"",itemType:"",itemTypePrice:"",_priveOver:""}},initialize:function(){},parse:function(e){return _.isEmpty(e)||e.itemInfoList.forEach(function(e){if(e.itemBaseInfo.repBrandNm&&e.itemBaseInfo.oriWebDisplayItemName?e.itemBaseInfo.renderName="<strong>"+e.itemBaseInfo.repBrandNm+"</strong> "+e.itemBaseInfo.oriWebDisplayItemName:e.itemBaseInfo.displayItemName?e.itemBaseInfo.renderName=e.itemBaseInfo.displayItemName:e.itemBaseInfo.renderName=e.itemBaseInfo.itemNm,e.itemBaseInfo.renderName.includes("[보상상품]")||(e.itemBaseInfo.renderName=e.itemBaseInfo.renderName),e._noImage=t.getItemThumbImgUrl(),""==e.itemBaseInfo.imgUrlList)e.itemBaseInfo.imgUrlList=t.getItemThumbImgUrl();else{var n=e.itemBaseInfo.imgUrlList[0];e.itemBaseInfo.imgUrlList=t.getThumbUrl(n,240,240)}e._showDiscount=e.itemBaseInfo.salePrice&&e.itemBaseInfo.discountRate&&!e.itemBaseInfo.launchPrice,e._showFlagBasic=null!=e.basicFlagList,e._showFlagBenefit=null!=e.benefitFlagList,
e._isCounselTxtDisp="Y"===e.itemBaseInfo.contact2ndTxtDispYn;var a=e.itemBaseInfo.itemTypeCode||e.itemBaseInfo.itemTypeCd||"",r=function(e){return!!e&&(e+="",0===e.indexOf("8008")||0===e.indexOf("1105"))}(a),l=function(e){return!!e&&(e+="",0===e.indexOf("8008")||0===e.indexOf("8006")||0===e.indexOf("8016")||0===e.indexOf("1105")||0===e.indexOf("110401")||0===e.indexOf("110403"))}(a),s=function(e){return!!e&&(e+="",0===e.indexOf("370301")&&"37030105"!==e||0===e.indexOf("030102")&&"03010206"!==e&&"03010207"!==e&&"03010208"!==e&&"03010209"!==e&&"03010210"!==e)}(a),c=o.isOverseasTravel(a),m=o.isInstallmentTravel(a);if(c?e.itemType=e.itemBaseInfo.hpSalePrice>1?"overseas":"counsel":m?e.itemType=e.itemBaseInfo.hpSalePrice>1?"installment":"counsel":r?e.itemType=e.itemBaseInfo.hpSalePrice>0?"rental":"counsel":l?e.itemType="counsel":s?(e.itemType="cellphone",e.itemTypePrice="hide",e.itemBaseInfo.custSalePrice>1?e.itemTypePrice="customer":e.itemBaseInfo.hpSalePrice>0&&(e.itemTypePrice="hpSale")):e.itemType="base",e.basicFlagList)for(var d=0;d<e.basicFlagList.length;d++){var u=e.basicFlagList[d];switch(u.flagKey){case"TV":u._flagBasicClass="broadcast";break;case"TODAY_ONE":u._flagBasicClass="o_ne_today";break;case"SUNDAY_ONE":u._flagBasicClass="o_ne_sunday";break;case"TOMORROW_ONE":u._flagBasicClass="o_ne_tomorrow"}}if(e.benefitFlagList)for(var p=0;p<e.benefitFlagList.length;p++){var g=e.benefitFlagList[p],f=g.flagKey;switch(f){case"MILEAGE":case"MANUAL_ADD_MILEAGE":case"MANUAL_MAX_MILEAGE":g._flagBenefitClass="save";break;case"MANUAL_CARD":g._flagBenefitClass="card";break;case"COUPON":case"SP_COUPON":case"ADD_COUPON":g._flagBenefitClass="coupon";break;case"FREE_INTEREST":g._flagBenefitClass="card"}}e._showReview=0!=e.itemReviewInfo.count,"19"!==e.itemBaseInfo.harmGrade||i.checkHarmGrd(e.itemBaseInfo.harmGrade)?e.itemBaseInfo.imgUrlList=e.itemBaseInfo.imgUrlList?e.itemBaseInfo.imgUrlList:"":similarItemBaseInfo.imgUrlList=t.getHarmGrdImgUrl(),e.gaInfo={itemCode:e.itemBaseInfo.itemCd?e.itemBaseInfo.itemCd:"",itemName:e.itemBaseInfo.itemNm?e.itemBaseInfo.itemNm:"",productType:e.itemBaseInfo.productType?e.itemBaseInfo.productType:"",brandCode:e.itemBaseInfo.repBrandCd?e.itemBaseInfo.repBrandCd:"",mainVenCode:e.itemBaseInfo.mainVenCode?e.itemBaseInfo.mainVenCode:"",mdCode:e.itemBaseInfo.mdCode?e.itemBaseInfo.mdCode:"",channelCode:e.itemBaseInfo.channelCode?e.itemBaseInfo.channelCode:"",standardCategory:e.itemBaseInfo.standardCategory?e.itemBaseInfo.standardCategory:""}}),e}})}),define("page/cjmall/myzone/activity/models/styleZzimModel",["common/cjos/util/currencyUtil","common/cjos/util/urlUtil","common/cjos/util/loginUserInfo"],function(e,t,i){"use strict";return Backbone.Model.extend({defaults:{isOnlyUnit:"",harmGrd:"",customerPrice:"",salePrice:"",itemImgUrl:"",itemUrl:"",_showingPrice:"",_costUnit:"",_noimage:"",itemCode:"",itemName:"",moCode:"",channelCode:"",productType:"",brandCode:"",mainVenCode:"",mdCode:"",standardCategory:""},initialize:function(){},parse:function(o){var n=null;if(_.isEmpty(o.result))n=o,n.imageList=n.imageList.length>10?n.imageList.slice(0,10):n.imageList,n._noImage=t.getItemThumbImgUrl(),_.each(n.itemList,function(o,n){o.customerPrice=o.customerPrice?e.formatNumber(o.customerPrice):"0",o.salePrice=o.salePrice?e.formatNumber(o.salePrice):"0",o._showingPrice=o.customerPrice?o.customerPrice:o.salePrice,o._costUnit=o.isOnlyUnit?"원":"원~","19"!==o.harmGrd||i.checkHarmGrd(o.harmGrd)?o.itemImgUrl=o.itemImgUrl?o.itemImgUrl:"":o.itemImgUrl=t.getHarmGrdImgUrl(),o.gaInfo={itemCode:o.itemCode?o.itemCode:"",itemName:o.itemName?o.itemName:"",productType:o.productType?o.productType:"",brandCode:o.brandCode?o.brandCode:"",mainVenCode:o.mainVenCode?o.mainVenCode:"",mdCode:o.mdCode?o.mdCode:"",channelCode:o.channelCode?o.channelCode:"",standardCategory:o.standardCategory?o.standardCategory:""}});else{o.code,o.resCode,o.resMsg;n=o.result}try{_.isEmpty(n)}catch(e){cjosLogUtil.log("[styleZzimModel parse error]",e)}return n}})});alert(1);
